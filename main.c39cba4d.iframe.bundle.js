(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"./generated-stories-entry.js":function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js").configure)([__webpack_require__("./src sync ^\\.[\\\\/](?:(?!\\.)(?=.)[^/]*?\\.stories\\.(js|jsx|ts|tsx|mdx))$"),__webpack_require__("./src sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.(js|jsx|ts|tsx|mdx))$")],module,!1)}).call(this,__webpack_require__("./node_modules/webpack/buildin/module.js")(module))},"./src sync ^\\.[\\\\/](?:(?!\\.)(?=.)[^/]*?\\.stories\\.(js|jsx|ts|tsx|mdx))$":function(module,exports,__webpack_require__){var map={"./editor-wrap.stories.tsx":"./src/editor-wrap.stories.tsx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./src sync ^\\.[\\\\/](?:(?!\\.)(?=.)[^/]*?\\.stories\\.(js|jsx|ts|tsx|mdx))$"},"./src sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.(js|jsx|ts|tsx|mdx))$":function(module,exports,__webpack_require__){var map={"./editor-wrap.stories.tsx":"./src/editor-wrap.stories.tsx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./src sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.(js|jsx|ts|tsx|mdx))$"},"./src/assets/images/separator.png":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/separator.1813687a.png"},"./src/editor-wrap.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default})),__webpack_require__.d(__webpack_exports__,"FontSize",(function(){return FontSize})),__webpack_require__.d(__webpack_exports__,"Blockquote",(function(){return Blockquote})),__webpack_require__.d(__webpack_exports__,"Image",(function(){return editor_wrap_stories_Image})),__webpack_require__.d(__webpack_exports__,"InlineImage",(function(){return InlineImage})),__webpack_require__.d(__webpack_exports__,"Video",(function(){return Video})),__webpack_require__.d(__webpack_exports__,"OrderedListItem",(function(){return OrderedListItem})),__webpack_require__.d(__webpack_exports__,"UnorderedListItem",(function(){return UnorderedListItem})),__webpack_require__.d(__webpack_exports__,"Italic",(function(){return Italic})),__webpack_require__.d(__webpack_exports__,"Underline",(function(){return Underline})),__webpack_require__.d(__webpack_exports__,"Strikethrough",(function(){return Strikethrough})),__webpack_require__.d(__webpack_exports__,"TextDecoration",(function(){return TextDecoration})),__webpack_require__.d(__webpack_exports__,"Code",(function(){return Code})),__webpack_require__.d(__webpack_exports__,"CodeBlock",(function(){return CodeBlock})),__webpack_require__.d(__webpack_exports__,"Bold",(function(){return Bold})),__webpack_require__.d(__webpack_exports__,"Test",(function(){return Test})),__webpack_require__.d(__webpack_exports__,"TestWithControls",(function(){return TestWithControls}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js");var MenuActionMode,StyleName,react=__webpack_require__("./node_modules/react/index.js"),Draft=__webpack_require__("./node_modules/draft-js/lib/Draft.js"),react_jss_esm=__webpack_require__("./node_modules/react-jss/dist/react-jss.esm.js"),main=__webpack_require__("./node_modules/draft-js-export-html/esm/main.js"),BLOCK_TYPE_UNSTYLED="unstyled",BLOCK_TYPE_HEADER_ONE="header-one",BLOCK_TYPE_HEADER_TWO="header-two",BLOCK_TYPE_HEADER_THREE="header-three",BLOCK_TYPE_HEADER_FOUR="header-four",BLOCK_TYPE_HEADER_FIVE="header-five",BLOCK_TYPE_HEADER_SIX="header-six",BLOCK_TYPE_CODE="code-block",BLOCK_TYPE_ATOMIC="atomic",ENTITY_TYPE_LINK="LINK",ENTITY_TYPE_IMAGE="IMAGE";!function(MenuActionMode){MenuActionMode[MenuActionMode.INSERT_BEFORE=0]="INSERT_BEFORE",MenuActionMode[MenuActionMode.INSERT_AFTER=1]="INSERT_AFTER",MenuActionMode[MenuActionMode.EXCHANGE=2]="EXCHANGE"}(MenuActionMode||(MenuActionMode={})),function(StyleName){StyleName.POST_CONTENT="post-content-style",StyleName.RICH_TEXT_EDITOR_BLOCK="rich-text-editor-block-style"}(StyleName||(StyleName={}));__webpack_require__("./node_modules/core-js/modules/es.array.find.js"),__webpack_require__("./node_modules/core-js/modules/es.string.trim.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reduce.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-names.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");function applyMixins(derivedCtor,constructors){constructors.forEach((function(baseCtor){Object.getOwnPropertyNames(baseCtor.prototype).forEach((function(name){var _Object$getOwnPropert;Object.defineProperty(derivedCtor.prototype,name,null!==(_Object$getOwnPropert=Object.getOwnPropertyDescriptor(baseCtor.prototype,name))&&void 0!==_Object$getOwnPropert?_Object$getOwnPropert:Object.create(null))}))}))}var DirectiveType,BlockDirectiveKind,InlineDirectiveKind,atob=__webpack_require__("./src/utils/atob.ts");function isString(val){return"string"==typeof val}function isEmptyString(val){return""===val}function isUndefined(val){return void 0===val}function isNull(val){return null==val}function isFalsy(val){return!!isNull(val)||(!!isUndefined(val)||(0===val||""===val))}function composeImageURL(fileURL,width,height){return isFalsy(width)&&isFalsy(width)?fileURL:fileURL+"?x-oss-process=image/resize"+(isFalsy(width)?"":",w_"+width)+(isFalsy(height)?"":",h_"+height)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}!function(DirectiveType){DirectiveType.DEFAULT="default",DirectiveType.CONTAINER="container",DirectiveType.INLINE="inline",DirectiveType.BLOCK="block",DirectiveType.DUPLEX="duplex"}(DirectiveType||(DirectiveType={})),function(BlockDirectiveKind){BlockDirectiveKind.DEFAULT="default",BlockDirectiveKind.C_COMPONENT="c_component",BlockDirectiveKind.C_CLASSNAME="c_classname"}(BlockDirectiveKind||(BlockDirectiveKind={})),function(InlineDirectiveKind){InlineDirectiveKind.DEFAULT="default",InlineDirectiveKind.C_STYLES="c_styles"}(InlineDirectiveKind||(InlineDirectiveKind={}));var directive_Directive=_createClass((function Directive(params,type){_classCallCheck(this,Directive),this.type=DirectiveType.DEFAULT,this.name=void 0,this.tooltip=void 0,this.control=void 0,this.className=void 0,this.editable=void 0,this.shortcut=void 0,this.command=void 0,this.handleCommand=void 0,this.name=params.name,isUndefined(type)||(this.type=type),this.tooltip=params.tooltip,this.control=params.control,this.className=params.className,this.editable=params.editable,this.shortcut=params.shortcut,this.command=params.command,this.handleCommand=params.handleCommand})),BlockDirective=function(_Directive){_inherits(BlockDirective,_Directive);var _super=_createSuper(BlockDirective);function BlockDirective(params){var _this;return _classCallCheck(this,BlockDirective),(_this=_super.call(this,params)).type=DirectiveType.BLOCK,_this.blockKind=BlockDirectiveKind.DEFAULT,_this.capturePasteEvent=void 0,_this.blockRender=void 0,_this.capturePasteEvent=params.capturePasteEvent,_this.blockRender=params.blockRender,_this}return _createClass(BlockDirective)}(directive_Directive),directive_CompBlockDirective=function(_BlockDirective){_inherits(CompBlockDirective,_BlockDirective);var _super2=_createSuper(CompBlockDirective);function CompBlockDirective(params){var _params$parse,_this2;return _classCallCheck(this,CompBlockDirective),(_this2=_super2.call(this,params)).blockKind=BlockDirectiveKind.C_COMPONENT,_this2.component=void 0,_this2.renderToString=void 0,_this2.parse=void 0,_this2._parse=function(element){var _element$dataset$data;if(!(element instanceof HTMLElement))return null;var blockData=JSON.parse(decodeURIComponent(Object(atob.a)(null!==(_element$dataset$data=element.dataset.data)&&void 0!==_element$dataset$data?_element$dataset$data:""))),textContainer=element.querySelector(".r-text-container");return textContainer instanceof HTMLElement&&(element.innerText=textContainer.innerText),isFalsy(element.innerText)&&(element.innerText="..."),{type:_this2.name,data:blockData}},_this2.component=params.component,_this2.renderToString=params.renderToString,_this2.parse=null!==(_params$parse=params.parse)&&void 0!==_params$parse?_params$parse:_this2._parse,_this2}return _createClass(CompBlockDirective)}(BlockDirective),ClasBlockDirective=function(_BlockDirective2){_inherits(ClasBlockDirective,_BlockDirective2);var _super3=_createSuper(ClasBlockDirective);function ClasBlockDirective(params){var _this3;return _classCallCheck(this,ClasBlockDirective),(_this3=_super3.call(this,params)).blockKind=BlockDirectiveKind.C_CLASSNAME,_this3.getBlockClassName=void 0,_this3.getBlockData=void 0,_this3.getStyles=void 0,_this3.getBlockClassName=params.getBlockClassName,_this3.getBlockData=params.getBlockData,_this3.getStyles=params.getStyles,_this3}return _createClass(ClasBlockDirective)}(BlockDirective),InlineDirective=function(_Directive2){_inherits(InlineDirective,_Directive2);var _super4=_createSuper(InlineDirective);function InlineDirective(params){var _this4;return _classCallCheck(this,InlineDirective),(_this4=_super4.call(this,params)).type=DirectiveType.INLINE,_this4.inlineKind=InlineDirectiveKind.DEFAULT,_this4.getImplEntity=void 0,_this4.getImplEntity=params.getImplEntity,_this4}return _createClass(InlineDirective)}(directive_Directive),StylInlineDirective=function(_InlineDirective){_inherits(StylInlineDirective,_InlineDirective);var _super5=_createSuper(StylInlineDirective);function StylInlineDirective(params){var _this5;return _classCallCheck(this,StylInlineDirective),(_this5=_super5.call(this,params)).inlineKind=InlineDirectiveKind.C_STYLES,_this5.styleKeys=void 0,_this5.styleMap=void 0,_this5.getImplKey=void 0,_this5.styleKeys=params.styleKeys,_this5.styleMap=params.styleMap,_this5.getImplKey=params.getImplKey,_this5}return _createClass(StylInlineDirective)}(InlineDirective);applyMixins(_createClass((function DuplexDirective(params){_classCallCheck(this,DuplexDirective),this.type=DirectiveType.DUPLEX,Object.assign(this,new BlockDirective(params)),Object.assign(this,new InlineDirective(params)),this.type=DirectiveType.DUPLEX})),[BlockDirective,InlineDirective]),applyMixins(_createClass((function CompDuplexDirective(params){_classCallCheck(this,CompDuplexDirective),this.type=DirectiveType.DUPLEX,Object.assign(this,new directive_CompBlockDirective(params)),Object.assign(this,new InlineDirective(params)),this.type=DirectiveType.DUPLEX})),[directive_CompBlockDirective,InlineDirective]),applyMixins(_createClass((function ClasDuplexDirective(params){_classCallCheck(this,ClasDuplexDirective),this.type=DirectiveType.DUPLEX,Object.assign(this,new ClasBlockDirective(params)),Object.assign(this,new InlineDirective(params)),this.type=DirectiveType.DUPLEX})),[ClasBlockDirective,InlineDirective]),applyMixins(_createClass((function CompStylDuplexDirective(params){_classCallCheck(this,CompStylDuplexDirective),this.type=DirectiveType.DUPLEX,Object.assign(this,new directive_CompBlockDirective(params)),Object.assign(this,new StylInlineDirective(params)),this.type=DirectiveType.DUPLEX})),[directive_CompBlockDirective,StylInlineDirective]);var ClasStylDuplexDirective=_createClass((function ClasStylDuplexDirective(params){_classCallCheck(this,ClasStylDuplexDirective),this.type=DirectiveType.DUPLEX,Object.assign(this,new ClasBlockDirective(params)),Object.assign(this,new StylInlineDirective(params)),this.type=DirectiveType.DUPLEX}));function isBlockDirective(dire){return dire.type===DirectiveType.BLOCK}function isCompBlockDirective(dire){return dire.type===DirectiveType.BLOCK&&dire.blockKind===BlockDirectiveKind.C_COMPONENT}function isInlineDirective(dire){return dire.type===DirectiveType.INLINE}function isCompStylDuplexDirective(dire){return dire.type===DirectiveType.DUPLEX&&dire.blockKind===BlockDirectiveKind.C_COMPONENT&&dire.inlineKind===InlineDirectiveKind.C_STYLES}function isClasStylDuplexDirective(dire){return dire.type===DirectiveType.DUPLEX&&dire.blockKind===BlockDirectiveKind.C_CLASSNAME&&dire.inlineKind===InlineDirectiveKind.C_STYLES}function isStylDirective(dire){return function isStylInlineDirective(dire){return dire.type===DirectiveType.INLINE&&dire.inlineKind===InlineDirectiveKind.C_STYLES}(dire)||isCompStylDuplexDirective(dire)||isClasStylDuplexDirective(dire)}function isClasDirective(dire){return function isClasBlockDirective(dire){return dire.type===DirectiveType.BLOCK&&dire.blockKind===BlockDirectiveKind.C_CLASSNAME}(dire)||function isClasDuplexDirective(dire){return dire.type===DirectiveType.DUPLEX&&dire.blockKind===BlockDirectiveKind.C_CLASSNAME&&dire.inlineKind===InlineDirectiveKind.DEFAULT}(dire)||isClasStylDuplexDirective(dire)}function isCompDirective(dire){return isCompBlockDirective(dire)||function isCompDuplexDirective(dire){return dire.type===DirectiveType.DUPLEX&&dire.blockKind===BlockDirectiveKind.C_COMPONENT&&dire.inlineKind===InlineDirectiveKind.DEFAULT}(dire)||isCompStylDuplexDirective(dire)}applyMixins(ClasStylDuplexDirective,[ClasBlockDirective,StylInlineDirective]),applyMixins(_createClass((function StylDuplexDirective(params){_classCallCheck(this,StylDuplexDirective),this.type=DirectiveType.DUPLEX,Object.assign(this,new BlockDirective(params)),Object.assign(this,new StylInlineDirective(params)),this.type=DirectiveType.DUPLEX})),[BlockDirective,StylInlineDirective]);var classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames);function getOptions(contentState,registedDires){var _registedDires$reduce,styleMap=registedDires.reduce((function(acc,cur){return isStylDirective(cur)&&(acc=Object.assign({},acc,cur.styleMap)),acc}),{});return{blockStyleFn:function blockStyleFn(block){var classNames=[],data=block.getData();return registedDires.forEach((function(dire){isClasDirective(dire)&&(isFalsy(data.get(dire.name))||classNames.push(dire.getBlockClassName(data)))})),{attributes:{class:classnames_default()(classNames)}}},inlineStyleFn:function inlineStyleFn(styles){return{element:"span",style:styles.toArray().reduce((function(result,style){var _styleMap$style;return result=function mergeStyles(a,b){var mergedStyles={};return a.textDecoration!==b.textDecoration&&(mergedStyles.textDecoration=[a.textDecoration,b.textDecoration].join(" ").trim()),Object.assign({},a,b,mergedStyles)}(result,null!==(_styleMap$style=styleMap[style])&&void 0!==_styleMap$style?_styleMap$style:{})}),{})}},blockRenderers:registedDires.reduce((function(acc,cur){return isCompDirective(cur)&&(acc[cur.name]=function(block){return cur.renderToString(block)}),acc}),(_registedDires$reduce={},_registedDires$reduce[BLOCK_TYPE_ATOMIC]=function(block){return function renderAtomicBlockToString(contentState,block,registedDires){var entityKey=block.getEntityAt(0),entity=null;isFalsy(entityKey)||(entity=contentState.getEntity(entityKey));var data=block.getData(),type=null!=entity?entity.getType():data.get("type"),dire=registedDires.find((function(u){return u.name===type}));return null!=dire&&isCompDirective(dire)?dire.renderToString(block):""}(contentState,block,registedDires)},_registedDires$reduce))}}__webpack_require__("./node_modules/core-js/modules/es.array.fill.js"),__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js");var immutable=__webpack_require__("./node_modules/immutable/dist/immutable.js"),immutable_default=__webpack_require__.n(immutable),prism_core=__webpack_require__("./node_modules/prismjs/components/prism-core.js"),prism_core_default=__webpack_require__.n(prism_core);__webpack_require__("./node_modules/prismjs/components/prism-clike.js"),__webpack_require__("./node_modules/prismjs/components/prism-markup.js"),__webpack_require__("./node_modules/prismjs/components/prism-javascript.js"),__webpack_require__("./node_modules/prismjs/components/prism-css.js"),__webpack_require__("./node_modules/prismjs/components/prism-typescript.js"),__webpack_require__("./node_modules/prismjs/components/prism-bash.js"),__webpack_require__("./node_modules/prismjs/components/prism-go.js"),__webpack_require__("./node_modules/prismjs/components/prism-java.js"),__webpack_require__("./node_modules/prismjs/components/prism-processing.js"),__webpack_require__("./node_modules/prismjs/plugins/line-numbers/prism-line-numbers.css"),__webpack_require__("./node_modules/prismjs/plugins/line-numbers/prism-line-numbers.js"),__webpack_require__("./node_modules/prismjs/themes/prism-solarizedlight.css");prism_core_default.a.manual=!0;var prism=prism_core_default.a,jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function prism_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function prism_setPrototypeOf(o,p){return prism_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},prism_setPrototypeOf(o,p)}function prism_createSuper(Derived){var hasNativeReflectConstruct=function prism_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=prism_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=prism_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return prism_possibleConstructorReturn(this,result)}}function prism_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function prism_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function prism_getPrototypeOf(o){return prism_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},prism_getPrototypeOf(o)}function defaultRender(props){return Object(jsx_runtime.jsx)("span",{className:classnames_default()("prism-token","token",props.type),children:props.children})}defaultRender.displayName="defaultRender";var PrismOptions=immutable_default.a.Record({defaultSyntax:null,filter:function defaultFilter(block){return"code-block"===block.getType()},getSyntax:function defaultGetSyntax(block){var syntax=block.getData().get("syntax");return isFalsy(syntax)?null:syntax},render:defaultRender,prism:prism});var decorators_prism=function(_CompositeDecorator){!function prism_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&prism_setPrototypeOf(subClass,superClass)}(PrismDecorator,_CompositeDecorator);var _super=prism_createSuper(PrismDecorator);function PrismDecorator(options){var _this;return function prism_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PrismDecorator),(_this=_super.call(this,[])).options=void 0,_this.highlighted=void 0,_this.options=PrismOptions(null!=options?options:{}),_this.highlighted={},_this}return function prism_createClass(Constructor,protoProps,staticProps){return protoProps&&prism_defineProperties(Constructor.prototype,protoProps),staticProps&&prism_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(PrismDecorator,[{key:"getDecorations",value:function getDecorations(block){var token,tokenId,resultId,offset=0,tokenCount=0,filter=this.options.get("filter"),getSyntax=this.options.get("getSyntax"),blockKey=block.getKey(),blockText=block.getText(),decorations=Array(blockText.length).fill(null),_Prism=this.options.get("prism"),highlighted=this.highlighted;if(highlighted[blockKey]={},!filter(block))return immutable_default.a.List(decorations);var syntax=getSyntax(block);if(isFalsy(syntax)&&(syntax=this.options.get("defaultSyntax")),isFalsy(syntax))return immutable_default.a.List(decorations);var grammar=_Prism.languages[syntax],tokens=_Prism.tokenize(blockText,grammar);function processToken(decorations,token,offset){if("string"!=typeof token){tokenId="tok"+tokenCount++,resultId=blockKey+"-"+tokenId;var tokens=highlighted[blockKey];isUndefined(tokens)||(tokens[tokenId]=token),function occupySlice(targetArr,start,end,componentKey){for(var ii=start;ii<end;ii++)targetArr[ii]=componentKey}(decorations,offset,offset+token.length,resultId);var childOffset=offset,tokenContent=token.content;if(Array.isArray(tokenContent)&&tokenContent.length>0)for(var i=0;i<tokenContent.length;i++){var childToken=tokenContent[i];processToken(decorations,childToken,childOffset),childOffset+=childToken.length}}}for(var i=0;i<tokens.length;i++)processToken(decorations,token=tokens[i],offset),offset+=token.length;return immutable_default.a.List(decorations)}},{key:"getComponentForKey",value:function getComponentForKey(_){return this.options.get("render")}},{key:"getPropsForKey",value:function getPropsForKey(key){var _this$highlighted$blo,_token$type,parts=key.split("-"),blockKey=parts[0],tokId=parts[1],token=null===(_this$highlighted$blo=this.highlighted[blockKey])||void 0===_this$highlighted$blo?void 0:_this$highlighted$blo[tokId];return{type:null!==(_token$type=null==token?void 0:token.type)&&void 0!==_token$type?_token$type:""}}}]),PrismDecorator}(Draft.CompositeDecorator);__webpack_require__("./node_modules/core-js/modules/es.number.constructor.js");function multidecorators_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var multidecorators=function(){function MultiDecorator(decorators){!function multidecorators_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MultiDecorator),this.decorators=void 0,this.decorators=immutable_default.a.List(decorators)}return function multidecorators_createClass(Constructor,protoProps,staticProps){return protoProps&&multidecorators_defineProperties(Constructor.prototype,protoProps),staticProps&&multidecorators_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(MultiDecorator,[{key:"getDecorations",value:function getDecorations(block,contentState){var decorations=Array(block.getText().length).fill(null);return this.decorators.forEach((function(decorator,i){isUndefined(decorator)||isUndefined(i)||decorator.getDecorations(block,contentState).forEach((function(key,offset){isFalsy(key)||isUndefined(offset)||(key=i+"-"+key,decorations[offset]=key)}))})),immutable_default.a.List(decorations)}},{key:"getComponentForKey",value:function getComponentForKey(key){return this.getDecoratorForKey(key).getComponentForKey(this.getInnerKey(key))}},{key:"getPropsForKey",value:function getPropsForKey(key){return this.getDecoratorForKey(key).getPropsForKey(this.getInnerKey(key))}},{key:"getDecoratorForKey",value:function getDecoratorForKey(key){var parts=key.split("-"),index=Number(parts[0]);return this.decorators.get(index)}},{key:"getInnerKey",value:function getInnerKey(key){return key.split("-").slice(1).join("-")}}]),MultiDecorator}();__webpack_require__("./node_modules/core-js/modules/es.array.find-index.js"),__webpack_require__("./node_modules/core-js/modules/es.array.splice.js");function useDires(directives){var registedDires=Object(react.useRef)([]),registedDireMap=Object(react.useRef)({});return Object(react.useMemo)((function(){directives.forEach((function(dire){!function registerDirective(registedDires,registedDireMap,directive){var old=registedDireMap[directive.name];if(null!=old){var index=registedDires.findIndex((function(dire){return dire.name===old.name}));isFalsy(~index)||registedDires.splice(index,1)}registedDires.push(directive),registedDireMap[directive.name]=directive}(registedDires.current,registedDireMap.current,dire)}))}),[directives]),Object(react_jss_esm.a)((function(theme){return{"@global":Object.assign({},registedDires.current.reduce((function(result,dire){return isClasDirective(dire)&&(result=Object.assign({},result,dire.getStyles(theme))),result}),{}))}}),{name:StyleName.RICH_TEXT_EDITOR_BLOCK})(),[registedDires.current,registedDireMap.current]}var UndoOutlined=__webpack_require__("./node_modules/@ant-design/icons/es/icons/UndoOutlined.js"),menu=__webpack_require__("./node_modules/antd/es/menu/index.js"),tooltip=__webpack_require__("./node_modules/antd/es/tooltip/index.js"),es_button=__webpack_require__("./node_modules/antd/es/button/index.js"),create_button=function createButton(options){var ButtonCtrl=function ButtonCtrl(props){var active=Object(react.useMemo)((function(){return options.isActive(props.editorState)}),[props.editorState]),type=Object(react.useMemo)((function(){return active?"primary":"default"}),[active]),disabled=Object(react.useMemo)((function(){var _props$disabled;return!(null===(_props$disabled=props.disabled)||void 0===_props$disabled||!_props$disabled)||null!=options.isDisabled&&options.isDisabled(props.editorState)}),[props.editorState,props.disabled]),handleClick=function handleClick(e){var _props$menuActionMode;(e.preventDefault(),disabled)||(isUndefined(props.blockKey)?options.handleClick(props.editor):options.handleClick(props.editor,props.blockKey,null!==(_props$menuActionMode=props.menuActionMode)&&void 0!==_props$menuActionMode?_props$menuActionMode:MenuActionMode.EXCHANGE))};return isUndefined(props.asMenuItem)?Object(jsx_runtime.jsx)(tooltip.a,{getPopupContainer:props.getPopupContainer,placement:props.tooltipPlacement,title:props.title,children:Object(jsx_runtime.jsx)(es_button.a,{icon:options.icon,type:type,disabled:disabled,onMouseDown:handleClick})}):Object(jsx_runtime.jsx)(menu.a.Item,Object.assign({},props,{icon:options.icon,onMouseDown:handleClick,children:props.title}))};return ButtonCtrl.displayName="ButtonCtrl",ButtonCtrl.handleCommand=function(editor){return options.handleClick(editor)},ButtonCtrl};try{createbutton.displayName="createbutton",createbutton.__docgenInfo={description:"",displayName:"createbutton",props:{icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},isActive:{defaultValue:null,description:"",name:"isActive",required:!0,type:{name:"(editorState: EditorState) => boolean"}},isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!1,type:{name:"((editorState: EditorState) => boolean)"}},handleClick:{defaultValue:null,description:"",name:"handleClick",required:!0,type:{name:"ClickHandler"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/directives/create-button.tsx#createbutton"]={docgenInfo:createbutton.__docgenInfo,name:"createbutton",path:"src/directives/create-button.tsx#createbutton"})}catch(__react_docgen_typescript_loader_error){}var _styleMap,undo=new directive_Directive({name:"UNDO",tooltip:"重做",control:create_button({icon:Object(jsx_runtime.jsx)(UndoOutlined.a,{}),isActive:function isActive(_){return!1},isDisabled:function isDisabled(editorState){return editorState.getUndoStack().size<=0},handleClick:function handleClick(editor){editor.setEditorState((function(editorState){return Draft.EditorState.undo(editorState)}))}})}),RedoOutlined=__webpack_require__("./node_modules/@ant-design/icons/es/icons/RedoOutlined.js"),redo=new directive_Directive({name:"REDO",tooltip:"重做",control:create_button({icon:Object(jsx_runtime.jsx)(RedoOutlined.a,{}),isActive:function isActive(_){return!1},isDisabled:function isDisabled(editorState){return editorState.getRedoStack().size<=0},handleClick:function handleClick(editor){editor.setEditorState((function(editorState){return Draft.EditorState.redo(editorState)}))}})}),BoldOutlined=__webpack_require__("./node_modules/@ant-design/icons/es/icons/BoldOutlined.js"),BoldControl=create_button({icon:Object(jsx_runtime.jsx)(BoldOutlined.a,{}),isActive:function isActive(editorState){return editorState.getCurrentInlineStyle().has("BOLD")},handleClick:function handleClick(editor){editor.setEditorState((function(editorState){return Draft.RichUtils.toggleInlineStyle(editorState,"BOLD")}))}}),bold=new StylInlineDirective({name:"BOLD",tooltip:"粗体",control:BoldControl,styleKeys:["BOLD"],styleMap:(_styleMap={},_styleMap.BOLD={fontWeight:"bold"},_styleMap),getImplKey:function getImplKey(style){return"bold"===style.fontWeight?"BOLD":null},shortcut:"ctrl+b",command:"directive-BOLD",handleCommand:function handleCommand(editor){return BoldControl.handleCommand(editor),!0}}),gkx=(__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.string.replace.js"),__webpack_require__("./node_modules/core-js/modules/es.string.starts-with.js"),__webpack_require__("./node_modules/core-js/modules/es.parse-float.js"),__webpack_require__("./node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.string.includes.js"),__webpack_require__("./node_modules/draft-js/lib/gkx.js")),experimentalTreeDataSupport=__webpack_require__.n(gkx)()("draft_tree_data_support");function getSelectedBlocksList(editorState){return function getSelectedBlocksMap(editorState){var selectionState=editorState.getSelection();return getSelectedBlocksMapOfContentState(editorState.getCurrentContent(),selectionState)}(editorState).toList()}function getSelectedBlocksMapOfContentState(contentState,selection){var startKey=selection.getStartKey(),endKey=selection.getEndKey(),blockMap=contentState.getBlockMap();return blockMap.toSeq().skipUntil((function(_,k){return k===startKey})).takeUntil((function(_,k){return k===endKey})).concat([[endKey,blockMap.get(endKey)]])}function setBlockData(editorState,data,blockKey){var currentContent=editorState.getCurrentContent(),selection=editorState.getSelection(),currentBlock=currentContent.getBlockForKey(selection.first());if(!isUndefined(blockKey)){if(isUndefined(currentBlock=currentContent.getBlockForKey(blockKey)))return editorState;selection=Draft.SelectionState.createEmpty(blockKey)}var dataOfBlock=currentBlock.getData(),newContentState=Draft.Modifier.setBlockData(currentContent,selection,dataOfBlock.merge(data));return Draft.EditorState.push(editorState,newContentState,"change-block-data")}function getSelectedBlocksMetadata(editorState){var metaData=immutable_default.a.Map({}),selectedBlocks=getSelectedBlocksList(editorState);if(selectedBlocks.size>0)for(var _loop=function _loop(i){var data=selectedBlocks.get(i).getData();if(0===data.size)return metaData.clear(),"break";if(0===i)metaData=data;else if(metaData.forEach((function(value,key){isUndefined(key)||(isFalsy(data.get(key))||data.get(key)!==value)&&(metaData=metaData.delete(key))})),0===metaData.size)return metaData=metaData.clear(),"break"},i=0;i<selectedBlocks.size;i+=1){if("break"===_loop(i))break}return metaData}function getBlockMetadata(editorState,key){var block=editorState.getCurrentContent().getBlockForKey(key);return isUndefined(block)?immutable_default.a.Map({}):block.getData()}function getSelectedBlock(editorState){return getSelectedBlocksList(editorState).get(0)}function insertBlock(editorState,data,type,text){var contentState=editorState.getCurrentContent(),selectionState=editorState.getSelection(),afterRemoval=Draft.Modifier.removeRange(contentState,selectionState,"backward"),targetSelection=afterRemoval.getSelectionAfter(),afterSplit=Draft.Modifier.splitBlock(afterRemoval,targetSelection),insertionTarget=afterSplit.getSelectionAfter(),asAtomicBlock=Draft.Modifier.setBlockType(afterSplit,insertionTarget,BLOCK_TYPE_ATOMIC),atomicBlockConfig={key:Object(Draft.genKey)(),type:type,text:null!=text?text:"",data:data},atomicDividerBlockConfig={key:Object(Draft.genKey)(),type:BLOCK_TYPE_UNSTYLED};experimentalTreeDataSupport&&(atomicBlockConfig=Object.assign({},atomicBlockConfig,{nextSibling:atomicDividerBlockConfig.key}),atomicDividerBlockConfig=Object.assign({},atomicDividerBlockConfig,{prevSibling:atomicBlockConfig.key}));var fragmentArray=[new Draft.ContentBlock(atomicBlockConfig),new Draft.ContentBlock(atomicDividerBlockConfig)],fragment=Draft.BlockMapBuilder.createFromArray(fragmentArray),withAtomicBlock=Draft.Modifier.replaceWithFragment(asAtomicBlock,insertionTarget,fragment),newContent=withAtomicBlock.merge({selectionBefore:selectionState,selectionAfter:withAtomicBlock.getSelectionAfter().set("hasFocus",!0)});return Draft.EditorState.push(editorState,newContent,"insert-fragment")}function insertBlankBlock(editorState,pivotBlockKey,before,type){pivotBlockKey.includes("-")&&(pivotBlockKey=pivotBlockKey.split("-")[0]);var content=editorState.getCurrentContent(),blockMap=content.getBlockMap(),block=blockMap.get(pivotBlockKey);if(isFalsy(block))throw new Error("The pivot key - "+pivotBlockKey+" is not present in blockMap.");var blocksBefore=blockMap.toSeq().takeUntil((function(v){return v===block}));null!=before&&before||(blocksBefore=blocksBefore.concat([[pivotBlockKey,block]]));var blocksAfter=blockMap.toSeq().skipUntil((function(v){return v===block}));null!=before&&before||(blocksAfter=blocksAfter.rest());var newBlockKey=Object(Draft.genKey)(),newBlock=new Draft.ContentBlock({key:newBlockKey,type:null!=type?type:BLOCK_TYPE_UNSTYLED,text:""}),newBlockMap=blocksBefore.concat([[newBlockKey,newBlock]],blocksAfter).toOrderedMap(),selection=editorState.getSelection(),newContent=content.merge({blockMap:newBlockMap,selectionBefore:selection,selectionAfter:selection.merge({anchorKey:newBlockKey,anchorOffset:0,focusKey:newBlockKey,focusOffset:0,isBackward:!1})});return Draft.EditorState.push(editorState,newContent,"insert-fragment")}var LineHeightOutlined=__webpack_require__("./node_modules/@ant-design/icons/es/icons/LineHeightOutlined.js"),es_select=__webpack_require__("./node_modules/antd/es/select/index.js"),create_select_useStyles=Object(react_jss_esm.a)((function(theme){return{select:{width:"100%"},active:{"@global .ant-select-selector":{backgroundColor:theme.primaryColor+" !important",borderColor:theme.primaryColor+" !important",color:"#fff"},"@global .ant-select-arrow":{color:"#cdcdcd"}},itemName:{marginLeft:theme.marginSm}}}),{name:"createSelect"}),create_select=function createSelect(options){var SelectCtrl=function SelectCtrl(props){var _clx,_options$defaultText,classes=create_select_useStyles(),value=Object(react.useMemo)((function(){var _options$getValue,val=null===(_options$getValue=options.getValue(props.editorState,props.blockKey))||void 0===_options$getValue?void 0:_options$getValue.toString();return isUndefined(val)?"normal":val}),[props.editorState,props.blockKey]),disabled=Object(react.useMemo)((function(){var _props$disabled;return!(null===(_props$disabled=props.disabled)||void 0===_props$disabled||!_props$disabled)||null!=options.isDisabled&&options.isDisabled(props.editorState,props.blockKey)}),[props.editorState,props.disabled,props.blockKey]),handleToggle=Object(react.useCallback)((function(newValue){var _props$menuActionMode;isUndefined(props.blockKey)?options.handleChange(props.editor,newValue):options.handleChange(props.editor,newValue,props.blockKey,null!==(_props$menuActionMode=props.menuActionMode)&&void 0!==_props$menuActionMode?_props$menuActionMode:MenuActionMode.EXCHANGE)}),[props.editor,props.blockKey,props.menuActionMode]),isActive=Object(react.useMemo)((function(){return"normal"!==value}),[value]),wrap=Object(react.useRef)(null),handleClickSelect=Object(react.useCallback)((function(e){e.preventDefault(),e.stopPropagation()}),[]),handleClickOption=Object(react.useCallback)((function(e){if(e.target instanceof HTMLElement&&!isNull(wrap.current)){var elem=wrap.current.querySelector(".rc-virtual-list-holder-inner");isNull(elem)||elem.contains(e.target)&&(e.preventDefault(),e.stopPropagation())}}),[]);return Object(react.useEffect)((function(){if(!isNull(wrap.current)){var selectItem=wrap.current.querySelector(".ant-select-selection-item");return selectItem instanceof HTMLElement&&selectItem.addEventListener("click",handleClickSelect,!1),document.body.addEventListener("mousedown",handleClickOption,!0),function(){selectItem instanceof HTMLElement&&selectItem.removeEventListener("click",handleClickSelect,!1),document.body.removeEventListener("mousedown",handleClickOption,!0)}}}),[handleClickSelect,handleClickOption]),isUndefined(props.asMenuItem)?Object(jsx_runtime.jsx)(tooltip.a,{getPopupContainer:props.getPopupContainer,placement:props.tooltipPlacement,title:props.title,children:Object(jsx_runtime.jsx)("span",{ref:wrap,style:{flex:1},children:Object(jsx_runtime.jsxs)(es_select.a,{className:classnames_default()(classes.select,(_clx={},_clx[classes.active]=isActive,_clx)),getPopupContainer:function getPopupContainer(){var _wrap$current;return null!==(_wrap$current=wrap.current)&&void 0!==_wrap$current?_wrap$current:document.body},disabled:disabled,value:value,onSelect:handleToggle,dropdownMatchSelectWidth:!1,children:[Object(jsx_runtime.jsxs)(es_select.a.Option,{value:"normal",children:[options.icon,Object(jsx_runtime.jsx)("span",{className:classes.itemName,children:null!==(_options$defaultText=options.defaultText)&&void 0!==_options$defaultText?_options$defaultText:"默认"})]},"normal"),options.options.map((function(option){var _option$icon;return Object(jsx_runtime.jsxs)(es_select.a.Option,{value:""+option.value,children:[null!==(_option$icon=option.icon)&&void 0!==_option$icon?_option$icon:options.icon,Object(jsx_runtime.jsx)("span",{className:classes.itemName,children:option.key})]},option.key)}))]})})}):Object(jsx_runtime.jsx)(menu.a.SubMenu,Object.assign({},props,{icon:options.icon,title:props.title,children:Object(jsx_runtime.jsx)(menu.a,{selectedKeys:isUndefined(props.menuActionMode)||props.menuActionMode===MenuActionMode.EXCHANGE?[value]:[],getPopupContainer:props.getPopupContainer,children:options.options.map((function(option){return Object(jsx_runtime.jsx)(menu.a.Item,{icon:option.icon,onClick:function onClick(){return handleToggle(""+option.value)},children:option.key},option.value)}))})}))};return SelectCtrl.displayName="SelectCtrl",SelectCtrl.handleCommand=function(editor,value){return options.handleChange(editor,value)},SelectCtrl};try{createselect.displayName="createselect",createselect.__docgenInfo={description:"",displayName:"createselect",props:{icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},getValue:{defaultValue:null,description:"",name:"getValue",required:!0,type:{name:"(editorState: EditorState, blockKey?: string | undefined) => string | undefined"}},handleChange:{defaultValue:null,description:"",name:"handleChange",required:!0,type:{name:"ChangeHandler"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"readonly IOptions<any>[]"}},isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!1,type:{name:"((editorState: EditorState, blockKey?: string) => boolean)"}},defaultText:{defaultValue:null,description:"",name:"defaultText",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/directives/create-select.tsx#createselect"]={docgenInfo:createselect.__docgenInfo,name:"createselect",path:"src/directives/create-select.tsx#createselect"})}catch(__react_docgen_typescript_loader_error){}var lineHeights=[1.2,1.5,1.8,2],LineHeightControl=create_select({icon:Object(jsx_runtime.jsx)(LineHeightOutlined.a,{}),getValue:function getValue(editorState,blockKey){return isUndefined(blockKey)?getSelectedBlocksMetadata(editorState).get("LINEHEIGHT"):getBlockMetadata(editorState,blockKey).get("LINEHEIGHT")},handleChange:function handleChange(editor,value,blockKey){editor.setEditorState((function(editorState){var _Immutable$Map;return setBlockData(editorState,immutable_default.a.Map(((_Immutable$Map={}).LINEHEIGHT="normal"===value?void 0:value,_Immutable$Map)),blockKey)}))},options:lineHeights.map((function(lineHeight){return{key:lineHeight.toString(),value:lineHeight.toString()}}))});var line_height=new ClasBlockDirective({className:"r-lineheight",name:"LINEHEIGHT",control:LineHeightControl,tooltip:"行高",getBlockClassName:function getBlockClassName(data){var lineHeight=data.get("LINEHEIGHT");return isFalsy(lineHeight)?"":("r-lineheight-"+lineHeight).replace(".","_")},getBlockData:function line_height_getBlockData(classList){var res={};return classList.forEach((function(className){if(className.startsWith("r-lineheight"))try{var value=parseFloat(className.replace("_",".").replace("r-lineheight-",""));lineHeights.includes(value)&&(res.LINEHEIGHT=value)}catch(err){console.log("parse value failed:",className,err)}})),res},getStyles:function getStyles(_){return lineHeights.reduce((function(acc,cur){return acc["."+("r-lineheight-"+cur).replace(".","_")]={lineHeight:cur},acc}),{})}});__webpack_require__("./node_modules/core-js/modules/es.parse-int.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js");function getStyleAtOffset(block,stylePrefix,offset){var style=block.getInlineStyleAt(offset).toList().filter((function(s){return!isUndefined(s)&&s.startsWith(stylePrefix)}));if(style.size>0){var value=style.get(0);return value.startsWith(stylePrefix+"-")?value.replace(stylePrefix+"-",""):value}}function getSelectionCustomInlineStyle(editorState,styles){if(styles.length>0){var _ret=function(){var currentSelection=editorState.getSelection(),inlineStyles={};if(currentSelection.isCollapsed())return styles.forEach((function(s){inlineStyles[s]=function getCurrentInlineStyle(editorState,stylePrefix){var style=editorState.getCurrentInlineStyle().toList().filter((function(s){return!isUndefined(s)&&s.startsWith(stylePrefix)}));if(style.size>0){var value=style.get(0);return value.startsWith(stylePrefix+"-")?value.replace(stylePrefix+"-",""):value}}(editorState,s)})),{v:inlineStyles};var start=currentSelection.getStartOffset(),end=currentSelection.getEndOffset(),selectedBlocks=getSelectedBlocksList(editorState);if(selectedBlocks.size>0){for(var _loop=function _loop(i){var blockStart=0===i?start:0,blockEnd=i===selectedBlocks.size-1?end:selectedBlocks.get(i).getText().length;blockStart===blockEnd&&0===blockStart?(blockStart=1,blockEnd=2):blockStart===blockEnd&&(blockStart-=1);for(var _loop2=function _loop2(j){j===blockStart?styles.forEach((function(s){inlineStyles[s]=getStyleAtOffset(selectedBlocks.get(i),s,j)})):styles.forEach((function(s){isUndefined(inlineStyles[s])||inlineStyles[s]===getStyleAtOffset(selectedBlocks.get(i),s,j)||(inlineStyles[s]=void 0)}))},j=blockStart;j<blockEnd;j+=1)_loop2(j)},i=0;i<selectedBlocks.size;i+=1)_loop(i);return{v:inlineStyles}}}();if("object"==typeof _ret)return _ret.v}return{}}function toggleCustomInlineStyle(editorState,oldStyles,newStyle){var _oldStyles$reduce,selection=editorState.getSelection(),contentState=editorState.getCurrentContent(),nextContentState=null!==(_oldStyles$reduce=oldStyles.reduce((function(contentState,s){return Draft.Modifier.removeInlineStyle(contentState,selection,s)}),contentState))&&void 0!==_oldStyles$reduce?_oldStyles$reduce:contentState,nextEditorState=Draft.EditorState.push(editorState,nextContentState,"change-inline-style"),currentStyle=editorState.getCurrentInlineStyle();return selection.isCollapsed()&&(nextEditorState=currentStyle.reduce((function(state,s){return null==state?Draft.EditorState.createEmpty():isUndefined(s)?state:Draft.RichUtils.toggleInlineStyle(state,s)}),nextEditorState)),isUndefined(newStyle)||currentStyle.has(newStyle)||(nextEditorState=Draft.RichUtils.toggleInlineStyle(nextEditorState,newStyle)),nextEditorState}var FontSizeOutlined=__webpack_require__("./node_modules/@ant-design/icons/es/icons/FontSizeOutlined.js"),fontSizes=[8,9,10,11,12,14,16,18,24,30,36,48,60,72,96],styleKeys=[],font_size_styleMap=fontSizes.reduce((function(acc,cur){var key="FONTSIZE-"+cur;return styleKeys.push(key),acc[key]={fontSize:cur+"px"},acc}),{});function font_size_getBlockClassName(data){var fontSize=data.get("FONTSIZE");return isFalsy(fontSize)?"":"r-fontsize-"+fontSize}function font_size_getBlockData(classList){var res={};return classList.forEach((function(className){if(className.startsWith("r-fontsize"))try{var value=parseFloat(className.replace("r-fontsize-",""));fontSizes.includes(value)&&(res.FONTSIZE=value)}catch(err){console.log("parse value failed:",className,err)}})),res}function font_size_getStyles(_){return fontSizes.reduce((function(acc,cur){return acc[".r-fontsize-"+cur]={fontSize:cur+"px"},acc}),{})}var font_size_getValue=function getValue(editorState,blockKey){return editorState.getSelection().isCollapsed()?isUndefined(blockKey)?getSelectedBlocksMetadata(editorState).get("FONTSIZE"):getBlockMetadata(editorState,blockKey).get("FONTSIZE"):getSelectionCustomInlineStyle(editorState,["FONTSIZE"]).FONTSIZE},FontSizeControl=create_select({icon:Object(jsx_runtime.jsx)(FontSizeOutlined.a,{}),getValue:font_size_getValue,handleChange:function handleChange(editor,newValue,blockKey){editor.setEditorState((function(editorState){var _Immutable$Map,value=font_size_getValue(editorState);return editorState.getSelection().isCollapsed()?setBlockData(editorState,immutable_default.a.Map(((_Immutable$Map={}).FONTSIZE="normal"===newValue||newValue===value?void 0:newValue,_Immutable$Map)),blockKey):toggleCustomInlineStyle(editorState,styleKeys,"normal"===newValue||newValue===value?void 0:"FONTSIZE-"+newValue)}))},options:fontSizes.map((function(fontSize){return{key:fontSize.toString(),value:fontSize.toString()}}))}),font_size=new ClasStylDuplexDirective({name:"FONTSIZE",className:"r-fontsize",tooltip:"字号",control:FontSizeControl,styleKeys:styleKeys,styleMap:font_size_styleMap,getBlockClassName:font_size_getBlockClassName,getBlockData:font_size_getBlockData,getStyles:font_size_getStyles,getImplKey:function getImplKey(style){var fontSize=parseFloat(style.fontSize);return isNaN(fontSize)?null:"FONTSIZE-"+fontSize},shortcut:["ctrl+=","ctrl+-","ctrl+0"],command:["directive-FONTSIZE->","directive-FONTSIZE-<","directive-FONTSIZE-0"],handleCommand:function handleCommand(editor,command,editorState){var _getValue,value=parseInt(null!==(_getValue=font_size_getValue(editorState))&&void 0!==_getValue?_getValue:fontSizes[6].toString());if(isNaN(value))return!1;var i=fontSizes.indexOf(value);if(i<0)return!1;var newValue="";switch(command.split("-")[2]){case"0":newValue="normal";break;case"<":(i-=1)>=0&&(newValue=fontSizes[i].toString());break;case">":(i+=1)<fontSizes.length&&(newValue=fontSizes[i].toString())}return""!==newValue&&(FontSizeControl.handleCommand(editor,newValue),!0)}});try{font_size_getBlockClassName.displayName="getBlockClassName",font_size_getBlockClassName.__docgenInfo={description:"",displayName:"getBlockClassName",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/directives/font-size.tsx#getBlockClassName"]={docgenInfo:font_size_getBlockClassName.__docgenInfo,name:"getBlockClassName",path:"src/directives/font-size.tsx#getBlockClassName"})}catch(__react_docgen_typescript_loader_error){}try{font_size_getBlockData.displayName="getBlockData",font_size_getBlockData.__docgenInfo={description:"",displayName:"getBlockData",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/directives/font-size.tsx#getBlockData"]={docgenInfo:font_size_getBlockData.__docgenInfo,name:"getBlockData",path:"src/directives/font-size.tsx#getBlockData"})}catch(__react_docgen_typescript_loader_error){}try{font_size_getStyles.displayName="getStyles",font_size_getStyles.__docgenInfo={description:"",displayName:"getStyles",props:{primaryColor:{defaultValue:null,description:"",name:"primaryColor",required:!0,type:{name:"string"}},linkColor:{defaultValue:null,description:"",name:"linkColor",required:!0,type:{name:"string"}},successColor:{defaultValue:null,description:"",name:"successColor",required:!0,type:{name:"string"}},warningColor:{defaultValue:null,description:"",name:"warningColor",required:!0,type:{name:"string"}},errorColor:{defaultValue:null,description:"",name:"errorColor",required:!0,type:{name:"string"}},headingColor:{defaultValue:null,description:"",name:"headingColor",required:!0,type:{name:"string"}},textColor:{defaultValue:null,description:"",name:"textColor",required:!0,type:{name:"string"}},textColorSecondary:{defaultValue:null,description:"",name:"textColorSecondary",required:!0,type:{name:"string"}},disabledColor:{defaultValue:null,description:"",name:"disabledColor",required:!0,type:{name:"string"}},borderColorBase:{defaultValue:null,description:"",name:"borderColorBase",required:!0,type:{name:"string"}},boxShadowBase:{defaultValue:null,description:"",name:"boxShadowBase",required:!0,type:{name:"string"}},backgroundColor:{defaultValue:null,description:"",name:"backgroundColor",required:!0,type:{name:"string"}},backgroundColorLight:{defaultValue:null,description:"",name:"backgroundColorLight",required:!0,type:{name:"string"}},backgroundColorBase:{defaultValue:null,description:"",name:"backgroundColorBase",required:!0,type:{name:"string"}},wechatColor:{defaultValue:null,description:"",name:"wechatColor",required:!0,type:{name:"string"}},alipayColor:{defaultValue:null,description:"",name:"alipayColor",required:!0,type:{name:"string"}},paddingLg:{defaultValue:null,description:"",name:"paddingLg",required:!0,type:{name:"number"}},paddingMd:{defaultValue:null,description:"",name:"paddingMd",required:!0,type:{name:"number"}},paddingSm:{defaultValue:null,description:"",name:"paddingSm",required:!0,type:{name:"number"}},paddingXs:{defaultValue:null,description:"",name:"paddingXs",required:!0,type:{name:"number"}},paddingXss:{defaultValue:null,description:"",name:"paddingXss",required:!0,type:{name:"number"}},marginLg:{defaultValue:null,description:"",name:"marginLg",required:!0,type:{name:"number"}},marginMd:{defaultValue:null,description:"",name:"marginMd",required:!0,type:{name:"number"}},marginSm:{defaultValue:null,description:"",name:"marginSm",required:!0,type:{name:"number"}},marginXs:{defaultValue:null,description:"",name:"marginXs",required:!0,type:{name:"number"}},marginXss:{defaultValue:null,description:"",name:"marginXss",required:!0,type:{name:"number"}},zindexBadge:{defaultValue:null,description:"",name:"zindexBadge",required:!0,type:{name:"string"}},zindexTableFixed:{defaultValue:null,description:"",name:"zindexTableFixed",required:!0,type:{name:"number"}},zindexAffix:{defaultValue:null,description:"",name:"zindexAffix",required:!0,type:{name:"number"}},zindexBackTop:{defaultValue:null,description:"",name:"zindexBackTop",required:!0,type:{name:"number"}},zindexPickerPanel:{defaultValue:null,description:"",name:"zindexPickerPanel",required:!0,type:{name:"number"}},zindexPopupClose:{defaultValue:null,description:"",name:"zindexPopupClose",required:!0,type:{name:"number"}},zindexModal:{defaultValue:null,description:"",name:"zindexModal",required:!0,type:{name:"number"}},zindexModalMask:{defaultValue:null,description:"",name:"zindexModalMask",required:!0,type:{name:"number"}},zindexMessage:{defaultValue:null,description:"",name:"zindexMessage",required:!0,type:{name:"number"}},zindexNotification:{defaultValue:null,description:"",name:"zindexNotification",required:!0,type:{name:"number"}},zindexPopover:{defaultValue:null,description:"",name:"zindexPopover",required:!0,type:{name:"number"}},zindexDropdown:{defaultValue:null,description:"",name:"zindexDropdown",required:!0,type:{name:"number"}},zindexPicker:{defaultValue:null,description:"",name:"zindexPicker",required:!0,type:{name:"number"}},zindexPopoconfirm:{defaultValue:null,description:"",name:"zindexPopoconfirm",required:!0,type:{name:"number"}},zindexTooltip:{defaultValue:null,description:"",name:"zindexTooltip",required:!0,type:{name:"number"}},zindexImage:{defaultValue:null,description:"",name:"zindexImage",required:!0,type:{name:"number"}},maxPostWidth:{defaultValue:null,description:"",name:"maxPostWidth",required:!0,type:{name:"number"}},footerHeight:{defaultValue:null,description:"",name:"footerHeight",required:!0,type:{name:"number"}},fontSizeBase:{defaultValue:null,description:"",name:"fontSizeBase",required:!0,type:{name:"number"}},borderRadiusBase:{defaultValue:null,description:"",name:"borderRadiusBase",required:!0,type:{name:"number"}},breakpoints:{defaultValue:null,description:"",name:"breakpoints",required:!0,type:{name:"{ up(key: BreakpointKey): string; down(key: BreakpointKey): string; only(key: BreakpointKey): string; between(start: BreakpointKey, end: BreakpointKey): string; phoneScreen(): string; phoneScreenHidden(): string; }"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/directives/font-size.tsx#getStyles"]={docgenInfo:font_size_getStyles.__docgenInfo,name:"getStyles",path:"src/directives/font-size.tsx#getStyles"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("./node_modules/core-js/modules/es.array.some.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.constructor.js");var AlignCenterOutlined=__webpack_require__("./node_modules/@ant-design/icons/es/icons/AlignCenterOutlined.js"),AlignLeftOutlined=__webpack_require__("./node_modules/@ant-design/icons/es/icons/AlignLeftOutlined.js"),AlignRightOutlined=__webpack_require__("./node_modules/@ant-design/icons/es/icons/AlignRightOutlined.js"),IconFont=__webpack_require__("./node_modules/@ant-design/icons/lib/components/IconFont.js"),icon_font=__webpack_require__.n(IconFont)()({scriptUrl:["//at.alicdn.com/t/font_3165884_5btdjmjfc67.js"]});try{iconfont.displayName="iconfont",iconfont.__docgenInfo={description:"",displayName:"iconfont",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icon-font.tsx#iconfont"]={docgenInfo:iconfont.__docgenInfo,name:"iconfont",path:"src/icon-font.tsx#iconfont"})}catch(__react_docgen_typescript_loader_error){}var textAligns=[{key:"居中对齐",value:"center",icon:Object(jsx_runtime.jsx)(AlignCenterOutlined.a,{})},{key:"左对齐",value:"left",icon:Object(jsx_runtime.jsx)(AlignLeftOutlined.a,{})},{key:"右对齐",value:"right",icon:Object(jsx_runtime.jsx)(AlignRightOutlined.a,{})},{key:"两端对齐",value:"justify",icon:Object(jsx_runtime.jsx)(icon_font,{type:"icon-justify"})}],text_align_getValue=function getValue(editorState,blockKey){return isUndefined(blockKey)?getSelectedBlocksMetadata(editorState).get("TEXTALIGN"):getBlockMetadata(editorState,blockKey).get("TEXTALIGN")},TextAlignControl=create_select({icon:Object(jsx_runtime.jsx)(AlignLeftOutlined.a,{}),getValue:text_align_getValue,handleChange:function handleChange(editor,value,blockKey){editor.setEditorState((function(editorState){var _Immutable$Map,oldValue=text_align_getValue(editorState,blockKey);return setBlockData(editorState,immutable_default.a.Map(((_Immutable$Map={}).TEXTALIGN="normal"===value||isString(oldValue)&&value===oldValue?void 0:value,_Immutable$Map)),blockKey)}))},options:textAligns});var text_align=new ClasBlockDirective({name:"TEXTALIGN",className:"r-textalign",control:TextAlignControl,tooltip:"对齐",getBlockClassName:function text_align_getBlockClassName(data){var textAlign=data.get("TEXTALIGN");return isString(textAlign)&&!isEmptyString(textAlign)?"r-textalign-"+textAlign:""},getBlockData:function text_align_getBlockData(classList){var res={};return classList.forEach((function(className){if(className.startsWith("r-textalign")){var value=className.replace("r-textalign-","");textAligns.some((function(option){return option.value===value}))&&(res.TEXTALIGN=value)}})),res},getStyles:function text_align_getStyles(_){return textAligns.reduce((function(acc,cur){return acc[".r-textalign-"+cur.value]={textAlign:cur.value,"& > div":{textAlign:cur.value,display:"inline-block"}},acc}),{})},shortcut:["ctrl+ArrowDown","ctrl+ArrowLeft","ctrl+ArrowRight","ctrl+ArrowUp"],command:textAligns.map((function(option){return"directive-TEXTALIGN-"+option.value})),handleCommand:function handleCommand(editor,command){return TextAlignControl.handleCommand(editor,command.replace(new RegExp("^directive-TEXTALIGN-"),"")),!0}}),CopyOutlined=__webpack_require__("./node_modules/@ant-design/icons/es/icons/CopyOutlined.js"),copy_html=function copyHTML(text,copyAsText){function listener(e){var _e$clipboardData,_e$clipboardData2;null===(_e$clipboardData=e.clipboardData)||void 0===_e$clipboardData||_e$clipboardData.setData("text/plain",text),null===(_e$clipboardData2=e.clipboardData)||void 0===_e$clipboardData2||_e$clipboardData2.setData("text/html",text),e.preventDefault()}text=text.replace(/\\n/g,"\\n"),document.addEventListener("copy",listener),document.execCommand("copy"),document.removeEventListener("copy",listener)},message=__webpack_require__("./node_modules/antd/es/message/index.js");function createLinkUnderlineStyle(theme){var underlineHeightOnHover=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"60%";return{position:"relative","&::after":{content:'""',position:"absolute",bottom:"-3px",left:0,right:0,height:"10%",backgroundColor:theme.primaryColor,opacity:.5,transition:"all 200ms ease"},"&:hover::after":{height:underlineHeightOnHover}}}var post_content_style=function useStyles(theme){var _ref;return(_ref={}).postContent={"& .r-link":Object.assign({color:theme.textColor},createLinkUnderlineStyle(theme,"70%")),"& h1":{fontSize:"2em",margin:"0.67em 0",fontWeight:"bold"},"& h2":{fontSize:"1.5em",margin:"0.83em 0",fontWeight:"bold"},"& h3":{fontSize:"1.17em",margin:"1em 0",fontWeight:"bold"},"& h4":{fontSize:"1em",margin:"1.33em 0",fontWeight:"bold"},"& h5":{fontSize:"0.83em",margin:"1.67em 0",fontWeight:"bold"},"& h6":{fontSize:"0.67em",margin:"2.33em 0",fontWeight:"bold"},"& figure":{},"& figcaption":{display:"block",fontSize:"14px",lineHeight:1.4,color:"rgba(0,0,0,.6)",letterSpacing:0,fontWeight:300,fontStyle:"normal",textAlign:"center",padding:"5px 0","& *":{textAlign:"center"}},"& img":{maxWidth:"100%"},"& .r-img":{maxWidth:"100%",height:"auto",display:"block",margin:"0 auto"},"& pre pre":{marginBottom:0},"& blockquote":{borderLeft:"5px solid #eee",color:"#666",fontFamily:'"Hoefler Text", "Georgia", serif',fontStyle:"italic",margin:"16px 0",padding:"10px 20px"},"& .r-iframe-container":{position:"relative",overflow:"hidden",paddingTop:"56.25%"},"& .r-iframe":{top:0,left:0,width:"100%",border:0,height:"100%",position:"absolute"},"& code pre":{outline:"none"},"& p > code":{background:"#efefef",padding:"3px 5px",fontSize:"0.8em",borderRadius:"5px"}},_ref},copy=new directive_Directive({name:"COPY",tooltip:"复制全文",control:create_button({icon:Object(jsx_runtime.jsx)(CopyOutlined.a,{}),isActive:function isActive(_){return!1},handleClick:function handleClick(editor){editor.setEditorState((function(editorState){var _postConentStyleElem$,_editorBlockStyleElem,postConentStyleElem=document.querySelector('style[data-meta="'+StyleName.POST_CONTENT+', Themed"]'),postContentStyle=null!==(_postConentStyleElem$=null==postConentStyleElem?void 0:postConentStyleElem.innerHTML)&&void 0!==_postConentStyleElem$?_postConentStyleElem$:"";postContentStyle=postContentStyle.replace(new RegExp("."+StyleName.POST_CONTENT+"-postContent(-\\d+)*\\s+","g"),"");var editorBlockStyleElem=document.querySelector('style[data-meta="'+StyleName.RICH_TEXT_EDITOR_BLOCK+', Themed"]'),content=editor.getHTML().replace(/<noscript\s[^>]*>|<\/\s*noscript>/g,"");return console.log("content",content),copy_html(content+"<br>\n        <style>\n        "+postContentStyle+"\n        "+(null!==(_editorBlockStyleElem=null==editorBlockStyleElem?void 0:editorBlockStyleElem.innerHTML)&&void 0!==_editorBlockStyleElem?_editorBlockStyleElem:"")+"\n        </style>\n        "),message.b.success("复制成功"),editorState}))}})}),modal=__webpack_require__("./node_modules/antd/es/modal/index.js"),es=__webpack_require__("./node_modules/@monaco-editor/react/lib/es/index.js"),spin=__webpack_require__("./node_modules/antd/es/spin/index.js"),code_editor_useStyles=Object(react_jss_esm.a)((function(theme){return{container:{border:"solid 1px "+theme.borderColorBase,borderRadius:theme.borderRadiusBase,minHeight:"100px"}}}),{name:"CodeEditor"});function CodeEditor(props){var _props$width,_props$height,_props$language,classes=code_editor_useStyles();return Object(jsx_runtime.jsx)("div",{className:classnames_default()(classes.container,props.className),children:Object(jsx_runtime.jsx)(es.a,{width:null!==(_props$width=props.width)&&void 0!==_props$width?_props$width:"100%",height:null!==(_props$height=props.height)&&void 0!==_props$height?_props$height:"600px",language:null!==(_props$language=props.language)&&void 0!==_props$language?_props$language:"html",options:{minimap:{enabled:!1}},loading:Object(jsx_runtime.jsx)(spin.a,{tip:"编辑器第一次加载可能会比较久，请耐心等待哦～"}),value:props.value,onChange:props.onChange})})}CodeEditor.displayName="CodeEditor";var code_editor=CodeEditor;try{CodeEditor.displayName="CodeEditor",CodeEditor.__docgenInfo={description:"",displayName:"CodeEditor",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"OnChange"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"string"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"string"}},language:{defaultValue:null,description:"",name:"language",required:!1,type:{name:"string"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/code-editor.tsx#CodeEditor"]={docgenInfo:CodeEditor.__docgenInfo,name:"CodeEditor",path:"src/code-editor.tsx#CodeEditor"})}catch(__react_docgen_typescript_loader_error){}var edit_source=new directive_Directive({name:"EDIT_SOURCE",tooltip:"编辑源码",control:create_button({icon:Object(jsx_runtime.jsx)(icon_font,{type:"icon-edit-source-code"}),isActive:function isActive(){return!1},handleClick:function handleClick(editor){editor.setEditorState((function(editorState){var contentState=editorState.getCurrentContent(),contentJSON=JSON.stringify(Object(Draft.convertToRaw)(contentState),null,2),config={title:"编辑源码",icon:null,width:700,content:Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsx)(code_editor,{value:contentJSON,language:"json",onChange:function onChange(value){return contentJSON=null!=value?value:""}})}),onOk:function onOk(){try{var newContentState=Object(Draft.convertFromRaw)(JSON.parse(contentJSON));editor.setEditorState((function(editorState){return Draft.EditorState.push(editorState,newContentState,"change-block-data")})),message.b.success("更新源码成功")}catch(err){console.log(err),message.b.error("更新源码失败")}}};return modal.a.confirm(config),editorState}))}})}),es_form=(__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.promise.js"),__webpack_require__("./node_modules/antd/es/form/index.js")),es_switch=__webpack_require__("./node_modules/antd/es/switch/index.js"),server_browser=__webpack_require__("./node_modules/react-dom/server.browser.js"),CodeOutlined=__webpack_require__("./node_modules/@ant-design/icons/es/icons/CodeOutlined.js"),btoa=__webpack_require__("./src/utils/btoa.ts"),_excluded=["style"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var editor_block_wrapper_EditorBlockWrapper=function EditorBlockWrapper(props){var _props$renderContent,_props$renderContent2,style=props.style,rest=_objectWithoutProperties(props,_excluded);return Object(jsx_runtime.jsx)("section",{className:"r-text-container",onPaste:function onPaste(e){e.stopPropagation(),e.preventDefault();var text=e.clipboardData.getData("text/plain");props.blockProps.onChange((function(editorState){var contentState=editorState.getCurrentContent(),selection=editorState.getSelection(),newContentState=Draft.Modifier.replaceText(contentState,selection,text);return Draft.EditorState.push(editorState,newContentState,"insert-characters")}))},style:style,children:null!==(_props$renderContent=null===(_props$renderContent2=props.renderContent)||void 0===_props$renderContent2?void 0:_props$renderContent2.call(props,rest))&&void 0!==_props$renderContent?_props$renderContent:Object(jsx_runtime.jsx)(Draft.EditorBlock,Object.assign({},rest))})};editor_block_wrapper_EditorBlockWrapper.displayName="EditorBlockWrapper";var editor_block_wrapper=editor_block_wrapper_EditorBlockWrapper;try{editorblockwrapper.displayName="editorblockwrapper",editorblockwrapper.__docgenInfo={description:"",displayName:"editorblockwrapper",props:{block:{defaultValue:null,description:"",name:"block",required:!0,type:{name:"ContentBlock"}},contentState:{defaultValue:null,description:"",name:"contentState",required:!0,type:{name:"ContentState"}},blockProps:{defaultValue:null,description:"",name:"blockProps",required:!0,type:{name:"{ onChange: (editorState: EditorState | ((editorState: EditorState) => EditorState)) => void; onReadOnly: (readOnly: boolean) => void; registedBlockInstanceMap: MutableRefObject<...>; }"}},renderContent:{defaultValue:null,description:"",name:"renderContent",required:!1,type:{name:"((props: IAtomicBlockProps) => ReactNode)"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/editor-block-wrapper.tsx#editorblockwrapper"]={docgenInfo:editorblockwrapper.__docgenInfo,name:"editorblockwrapper",path:"src/editor-block-wrapper.tsx#editorblockwrapper"})}catch(__react_docgen_typescript_loader_error){}var use_register_block=function useRegisterBlock(props,setSettingModalVisible){Object(react.useEffect)((function(){var key=props.block.getKey();return props.blockProps.registedBlockInstanceMap.current[key]={key:key,showSettingModal:function showSettingModal(){return setSettingModalVisible(!0)}},function(){delete props.blockProps.registedBlockInstanceMap.current[key]}}),[props.block,props.blockProps.registedBlockInstanceMap,setSettingModalVisible])},exchange_block_type=function exchangeBlockType(editorState,type,blockKey){if(isUndefined(blockKey))return editorState;var selection=Draft.SelectionState.createEmpty(blockKey),contentState=editorState.getCurrentContent(),block=contentState.getBlockForKey(blockKey);return isUndefined(block)||block.getType()===type?editorState:(contentState=Draft.Modifier.setBlockType(contentState,selection,type),contentState=Draft.Modifier.setBlockData(contentState,selection,Object(immutable.Map)({})),Draft.EditorState.push(editorState,contentState,"change-block-type"))},handle_menu_action=function handleMenuAction(editor,blockKey,menuActionMode,blockType){switch(menuActionMode){case MenuActionMode.INSERT_AFTER:editor.setEditorState((function(editorState){return insertBlankBlock(editorState,blockKey,!1,blockType)}));break;case MenuActionMode.INSERT_BEFORE:editor.setEditorState((function(editorState){return insertBlankBlock(editorState,blockKey,!0,blockType)}));break;default:editor.setEditorState((function(editorState){return exchange_block_type(editorState,blockType,blockKey)}))}};function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var FormItemKey,code_block_DIRE_NAME=BLOCK_TYPE_CODE,code_block_options=Object.keys(prism.languages).reduce((function(acc,cur){return"function"!=typeof prism.languages[cur]&&acc.push({label:cur,value:cur}),acc}),[]);!function(FormItemKey){FormItemKey.SYNTAX="syntax",FormItemKey.SHOW_LINE_NUMBERS="show-line-numbers"}(FormItemKey||(FormItemKey={}));var code_block_layout={labelCol:{span:4},wrapperCol:{span:20}},code_block_BlockCodeBlock=function BlockCodeBlock(props){var _JSON$stringify,form=_slicedToArray(es_form.a.useForm(),1)[0],_useState2=_slicedToArray(Object(react.useState)(!1),2),settingModalVisible=_useState2[0],setSettingModalVisible=_useState2[1],data=Object(react.useMemo)((function(){return props.block.getData()}),[props.block]),codeElem=Object(react.useRef)(null),text=Object(react.useMemo)((function(){return props.block.getText()}),[props.block]),syntax=Object(react.useMemo)((function(){return data.get(FormItemKey.SYNTAX)}),[data]),showLineNumbers=Object(react.useMemo)((function(){var _data$get;return null===(_data$get=data.get(FormItemKey.SHOW_LINE_NUMBERS))||void 0===_data$get||_data$get}),[data]);Object(react.useEffect)((function(){var _form$setFieldsValue,syntax=data.get(FormItemKey.SYNTAX);form.setFieldsValue(((_form$setFieldsValue={})[FormItemKey.SYNTAX]=isFalsy(syntax)?"text":syntax,_form$setFieldsValue))}),[form,data]),Object(react.useEffect)((function(){if(null!=codeElem.current){var lineNumbersRows=codeElem.current.querySelector(".line-numbers-rows");null!=lineNumbersRows&&lineNumbersRows.remove(),null!=showLineNumbers&&showLineNumbers&&prism.hooks.run("complete",{code:text,element:codeElem.current})}}),[text,showLineNumbers]);var handleConfirm=Object(react.useCallback)(_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var values;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,form.validateFields();case 2:values=_context.sent,props.blockProps.onChange((function(editorState){var _data$merge,contentState=editorState.getCurrentContent(),selection=Draft.SelectionState.createEmpty(props.block.getKey()),newContentState=Draft.Modifier.setBlockData(contentState,selection,data.merge(((_data$merge={})[FormItemKey.SYNTAX]=values[FormItemKey.SYNTAX],_data$merge[FormItemKey.SHOW_LINE_NUMBERS]=values[FormItemKey.SHOW_LINE_NUMBERS],_data$merge)));return Draft.EditorState.push(editorState,newContentState,"change-block-data")})),setSettingModalVisible(!1);case 5:case"end":return _context.stop()}}),_callee)}))),[form,props.block,data,props.blockProps]),popoverContent=Object(react.useMemo)((function(){return Object(jsx_runtime.jsxs)(es_form.a,{form:form,style:{width:400},onFinish:handleConfirm,children:[Object(jsx_runtime.jsx)(es_form.a.Item,Object.assign({},code_block_layout,{label:"语言",name:FormItemKey.SYNTAX,initialValue:"text",rules:[{required:!0,message:"请选择语言"}],children:Object(jsx_runtime.jsx)(es_select.a,{showSearch:!0,onDropdownVisibleChange:function onDropdownVisibleChange(open){return props.blockProps.onReadOnly(open)},dropdownMatchSelectWidth:!1,options:code_block_options})})),Object(jsx_runtime.jsx)(es_form.a.Item,Object.assign({},code_block_layout,{label:"显示行数",name:FormItemKey.SHOW_LINE_NUMBERS,initialValue:!0,valuePropName:"checked",rules:[{required:!1}],children:Object(jsx_runtime.jsx)(es_switch.a,{})}))]})}),[props.blockProps,form,handleConfirm]),dataStr=JSON.stringify(((_JSON$stringify={})[FormItemKey.SYNTAX]=syntax,_JSON$stringify[FormItemKey.SHOW_LINE_NUMBERS]=showLineNumbers,_JSON$stringify));return use_register_block(props,setSettingModalVisible),Object(jsx_runtime.jsxs)("pre",{className:classnames_default()("language-"+(null!=syntax?syntax:""),"r-code-block",{"line-numbers":showLineNumbers}),"data-data":Object(btoa.a)(encodeURIComponent(dataStr)),children:[Object(jsx_runtime.jsx)("code",{ref:codeElem,className:"language-"+(null!=syntax?syntax:""),children:Object(jsx_runtime.jsx)(editor_block_wrapper,Object.assign({},props))}),Object(jsx_runtime.jsx)(modal.a,{title:"配置",visible:settingModalVisible,onOk:handleConfirm,onCancel:function onCancel(){return setSettingModalVisible(!1)},children:popoverContent})]})};function renderBlockToString(block){var _data$get2,_JSON$stringify2,data=block.getData(),syntax=data.get(FormItemKey.SYNTAX),showLineNumbers=null===(_data$get2=data.get(FormItemKey.SHOW_LINE_NUMBERS))||void 0===_data$get2||_data$get2,dataStr=JSON.stringify(((_JSON$stringify2={})[FormItemKey.SYNTAX]=syntax,_JSON$stringify2)),text=block.getText(),codeElem=document.createElement("code");if(null!=showLineNumbers&&showLineNumbers){var preElem=document.createElement("pre");preElem.classList.add("line-numbers"),preElem.append(codeElem),prism.hooks.run("complete",{code:text,element:codeElem})}return Object(server_browser.renderToStaticMarkup)(Object(jsx_runtime.jsx)("pre",{className:classnames_default()("language-"+(null!=syntax?syntax:""),"r-code-block",{"line-numbers":showLineNumbers}),"data-data":Object(btoa.a)(encodeURIComponent(dataStr)),children:Object(jsx_runtime.jsx)("code",{className:"language-"+(null!=syntax?syntax:""),children:Object(jsx_runtime.jsx)("span",{className:"r-text-container",dangerouslySetInnerHTML:{__html:(isEmptyString(null!=syntax?syntax:"")?prism.highlight(text,prism.languages[null!=syntax?syntax:""],null!=syntax?syntax:""):text)+codeElem.innerHTML}})})}))}code_block_BlockCodeBlock.displayName="BlockCodeBlock";var CodeBlockControl=create_button({icon:Object(jsx_runtime.jsx)(CodeOutlined.a,{}),isActive:function isActive(editorState){var selection=editorState.getSelection();return editorState.getCurrentContent().getBlockForKey(selection.getStartKey()).getType()===code_block_DIRE_NAME},handleClick:function handleClick(editor,blockKey,menuActionMode){isUndefined(blockKey)?editor.setEditorState((function(editorState){var _selectedBlocks$reduc;if(editorState.getSelection().isCollapsed())return Draft.RichUtils.toggleBlockType(editorState,code_block_DIRE_NAME);var contentState=editorState.getCurrentContent(),selectedBlocks=getSelectedBlocksList(editorState),blockMap=contentState.getBlockMap(),text=null!==(_selectedBlocks$reduc=selectedBlocks.reduce((function(result,block){var _result;null!=block&&(result=""+(null!==(_result=result)&&void 0!==_result?_result:"")+block.getText()+"\n",blockMap=blockMap.delete(block.getKey()));return result}),""))&&void 0!==_selectedBlocks$reduc?_selectedBlocks$reduc:"",newBlock=new Draft.ContentBlock({key:Object(Draft.genKey)(),type:code_block_DIRE_NAME,text:text}),newBlockMap=blockMap.set(newBlock.getKey(),newBlock),newContentState=Draft.ContentState.createFromBlockArray(newBlockMap.toArray()).set("selectionAfter",new Draft.SelectionState({anchorKey:newBlock.getKey(),focusKey:newBlock.getKey(),anchorOffset:0,focusOffset:0}));return Draft.EditorState.push(editorState,newContentState,"change-block-type")})):handle_menu_action(editor,blockKey,null!=menuActionMode?menuActionMode:MenuActionMode.EXCHANGE,code_block_DIRE_NAME)}}),code_block=new directive_CompBlockDirective({name:code_block_DIRE_NAME,className:"r-code-block",tooltip:"代码块",control:CodeBlockControl,component:code_block_BlockCodeBlock,renderToString:renderBlockToString,capturePasteEvent:!0,blockRender:{element:""}});try{renderBlockToString.displayName="renderBlockToString",renderBlockToString.__docgenInfo={description:"",displayName:"renderBlockToString",props:{getKey:{defaultValue:null,description:"",name:"getKey",required:!0,type:{name:"() => string"}},getType:{defaultValue:null,description:"",name:"getType",required:!0,type:{name:"() => string"}},getText:{defaultValue:null,description:"",name:"getText",required:!0,type:{name:"() => string"}},getCharacterList:{defaultValue:null,description:"",name:"getCharacterList",required:!0,type:{name:"() => List<CharacterMetadata>"}},getLength:{defaultValue:null,description:"",name:"getLength",required:!0,type:{name:"() => number"}},getDepth:{defaultValue:null,description:"",name:"getDepth",required:!0,type:{name:"() => number"}},getData:{defaultValue:null,description:"",name:"getData",required:!0,type:{name:"() => Map<any, any>"}},getInlineStyleAt:{defaultValue:null,description:"",name:"getInlineStyleAt",required:!0,type:{name:"(offset: number) => DraftInlineStyle"}},getEntityAt:{defaultValue:null,description:"",name:"getEntityAt",required:!0,type:{name:"(offset: number) => string"}},findStyleRanges:{defaultValue:null,description:"Execute a callback for every contiguous range of styles within the block.",name:"findStyleRanges",required:!0,type:{name:"(filterFn: (value: CharacterMetadata) => boolean, callback: (start: number, end: number) => void) => void"}},findEntityRanges:{defaultValue:null,description:"Execute a callback for every contiguous range of entities within the block.",name:"findEntityRanges",required:!0,type:{name:"(filterFn: (value: CharacterMetadata) => boolean, callback: (start: number, end: number) => void) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/directives/code-block.tsx#renderBlockToString"]={docgenInfo:renderBlockToString.__docgenInfo,name:"renderBlockToString",path:"src/directives/code-block.tsx#renderBlockToString"})}catch(__react_docgen_typescript_loader_error){}var input_number=__webpack_require__("./node_modules/antd/es/input-number/index.js"),separator=__webpack_require__("./src/assets/images/separator.png"),separator_default=__webpack_require__.n(separator),react_color_es=__webpack_require__("./node_modules/react-color/es/index.js");function color_picker_sketch_slicedToArray(arr,i){return function color_picker_sketch_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function color_picker_sketch_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function color_picker_sketch_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return color_picker_sketch_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return color_picker_sketch_arrayLikeToArray(o,minLen)}(arr,i)||function color_picker_sketch_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function color_picker_sketch_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var color_picker_sketch_useStyles=Object(react_jss_esm.a)((function(theme){return{color:{width:60,height:20,borderRadius:theme.borderRadiusBase},swatch:{padding:"5px",background:"#fff",borderRadius:"1px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},popover:{position:"absolute",zIndex:"2"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}}}),{name:"ColorPickerSketch"}),color_picker_sketch_ColorPickerSketch=function ColorPickerSketch(props){var classes=color_picker_sketch_useStyles(),_useState2=color_picker_sketch_slicedToArray(Object(react.useState)(!1),2),pickerVisible=_useState2[0],setPickerVisible=_useState2[1],onChange=props.onChange,handleChange=Object(react.useCallback)((function(color){var colorRgb=color.rgb;null==onChange||onChange(isUndefined(colorRgb.a)?"rgb("+colorRgb.r+", "+colorRgb.g+", "+colorRgb.b+")":"rgba("+colorRgb.r+", "+colorRgb.g+", "+colorRgb.b+", "+colorRgb.a+")")}),[onChange]),handleShowPicker=Object(react.useCallback)((function(){return setPickerVisible(!0)}),[]),handleHidePicker=Object(react.useCallback)((function(){return setPickerVisible(!1)}),[]);return Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("div",{className:classes.swatch,onClick:handleShowPicker,children:Object(jsx_runtime.jsx)("div",{className:classes.color,style:{backgroundColor:props.value}})}),pickerVisible?Object(jsx_runtime.jsxs)("div",{className:classes.popover,children:[Object(jsx_runtime.jsx)("div",{className:classes.cover,onClick:handleHidePicker}),Object(jsx_runtime.jsx)(react_color_es.b,{color:props.value,onChange:handleChange})]}):null]})};color_picker_sketch_ColorPickerSketch.displayName="ColorPickerSketch";var color_picker_sketch=color_picker_sketch_ColorPickerSketch;try{colorpickersketch.displayName="colorpickersketch",colorpickersketch.__docgenInfo={description:"",displayName:"colorpickersketch",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: string) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/color-picker-sketch.tsx#colorpickersketch"]={docgenInfo:colorpickersketch.__docgenInfo,name:"colorpickersketch",path:"src/color-picker-sketch.tsx#colorpickersketch"})}catch(__react_docgen_typescript_loader_error){}var BlockOutlined=__webpack_require__("./node_modules/@ant-design/icons/es/icons/BlockOutlined.js");function separator_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function separator_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){separator_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){separator_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function separator_slicedToArray(arr,i){return function separator_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function separator_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function separator_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return separator_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return separator_arrayLikeToArray(o,minLen)}(arr,i)||function separator_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function separator_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var separator_FormItemKey;!function(FormItemKey){FormItemKey.COLOR="color",FormItemKey.MARGIN_H="margin_h"}(separator_FormItemKey||(separator_FormItemKey={}));var separator_layout={labelCol:{span:4},wrapperCol:{span:20}},separator_renderFormItems=function renderFormItems(className){return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(es_form.a.Item,Object.assign({},separator_layout,{initialValue:"black",className:className,label:"颜色",name:separator_FormItemKey.COLOR,rules:[{required:!1,message:"请输入颜色"}],children:Object(jsx_runtime.jsx)(color_picker_sketch,{})})),Object(jsx_runtime.jsx)(es_form.a.Item,Object.assign({},separator_layout,{initialValue:0,className:className,label:"两端缩进",name:separator_FormItemKey.MARGIN_H,rules:[{required:!1,message:"两端缩进"}],children:Object(jsx_runtime.jsx)(input_number.a,{})}))]})},separator_BlockSeparator=function BlockSeparator(props){var form=separator_slicedToArray(es_form.a.useForm(),1)[0],_useState2=separator_slicedToArray(Object(react.useState)(!1),2),settingModalVisible=_useState2[0],setSettingModalVisible=_useState2[1],data=Object(react.useMemo)((function(){return props.block.getData()}),[props.block]),color=Object(react.useMemo)((function(){var _data$get;return null!==(_data$get=data.get(separator_FormItemKey.COLOR))&&void 0!==_data$get?_data$get:"black"}),[data]),marginH=Object(react.useMemo)((function(){var _data$get2;return null!==(_data$get2=data.get(separator_FormItemKey.MARGIN_H))&&void 0!==_data$get2?_data$get2:0}),[data]);Object(react.useEffect)((function(){var _form$setFieldsValue;form.setFieldsValue(((_form$setFieldsValue={})[separator_FormItemKey.COLOR]=color,_form$setFieldsValue[separator_FormItemKey.MARGIN_H]=marginH,_form$setFieldsValue))}),[form,color,marginH]);var handleConfirm=Object(react.useCallback)(separator_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var values;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,form.validateFields();case 2:values=_context.sent,props.blockProps.onChange((function(editorState){var _data$merge,contentState=editorState.getCurrentContent(),selection=Draft.SelectionState.createEmpty(props.block.getKey()),newContentState=Draft.Modifier.setBlockData(contentState,selection,data.merge(((_data$merge={})[separator_FormItemKey.COLOR]=values[separator_FormItemKey.COLOR],_data$merge[separator_FormItemKey.MARGIN_H]=values[separator_FormItemKey.MARGIN_H],_data$merge)));return Draft.EditorState.push(editorState,newContentState,"change-block-data")})),setSettingModalVisible(!1);case 5:case"end":return _context.stop()}}),_callee)}))),[form,props.block,props.blockProps,data]),popoverContent=Object(react.useMemo)((function(){return Object(jsx_runtime.jsx)(es_form.a,{form:form,layout:"horizontal",onFinish:handleConfirm,children:separator_renderFormItems()})}),[form,handleConfirm]),dataStr=Object(react.useMemo)((function(){var _JSON$stringify;return JSON.stringify(((_JSON$stringify={})[separator_FormItemKey.COLOR]=color,_JSON$stringify[separator_FormItemKey.MARGIN_H]=marginH,_JSON$stringify))}),[color,marginH]);return use_register_block(props,setSettingModalVisible),Object(jsx_runtime.jsxs)("section",{className:"r-block-separator","data-data":Object(btoa.a)(encodeURIComponent(dataStr)),style:{fontFamily:"sans-serif",margin:"10px "+marginH+"px",textAlign:"center"},children:[Object(jsx_runtime.jsx)("section",{style:{display:"block",height:"2px",backgroundColor:color,transform:"translateY(13px)"}}),Object(jsx_runtime.jsx)("section",{style:{fontSize:"14px",lineHeight:"14px",backgroundColor:color,color:"white",borderRadius:"5px",display:"inline-block",padding:"6px 8px",transform:"translateY(0px) skewX(-10deg)"},children:Object(jsx_runtime.jsx)(editor_block_wrapper,Object.assign({},props,{style:{display:"inline-block",transform:"skewX(10deg)",margin:0}}))}),Object(jsx_runtime.jsx)(modal.a,{title:"配置",visible:settingModalVisible,onOk:handleConfirm,onCancel:function onCancel(){return setSettingModalVisible(!1)},children:popoverContent})]})};separator_BlockSeparator.displayName="BlockSeparator";var separator_SeparatorControl=function SeparatorControl(props){var handleClick=function handleClick(){var _props$menuActionMode;isUndefined(props.blockKey)?props.editor.setEditorState((function(editorState){return insertBlock(editorState,Object(immutable.Map)({}),"atomic_separator","标题")})):handle_menu_action(props.editor,props.blockKey,null!==(_props$menuActionMode=props.menuActionMode)&&void 0!==_props$menuActionMode?_props$menuActionMode:MenuActionMode.EXCHANGE,"atomic_separator")};return isUndefined(props.asMenuItem)?Object(jsx_runtime.jsx)(tooltip.a,{getPopupContainer:props.getPopupContainer,title:props.title,children:Object(jsx_runtime.jsx)(es_button.a,{onClick:handleClick,children:"分割线"})}):Object(jsx_runtime.jsx)(menu.a.Item,Object.assign({},props,{icon:Object(jsx_runtime.jsx)(BlockOutlined.a,{}),onMouseDown:function onMouseDown(e){e.preventDefault(),handleClick()},children:"分割线"}))};separator_SeparatorControl.displayName="SeparatorControl";var directives_separator=new directive_CompBlockDirective({name:"atomic_separator",className:"r-block-separator",tooltip:Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsx)("img",{width:300,style:{maxWidth:"100%"},src:separator_default.a})}),control:separator_SeparatorControl,component:separator_BlockSeparator,renderToString:function separator_renderBlockToString(block){var contentState=Draft.ContentState.createFromText(""),text=block.getText();return Object(server_browser.renderToStaticMarkup)(Object(jsx_runtime.jsx)(separator_BlockSeparator,{block:block,contentState:contentState,blockProps:{onChange:function onChange(){},onReadOnly:function onReadOnly(){},getPopupContainer:function getPopupContainer(element){return element},registedBlockInstanceMap:{current:{}}},renderContent:function renderContent(){return text}}))},editable:!0}),input=__webpack_require__("./node_modules/antd/es/input/index.js");function image_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function image_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){image_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){image_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function image_slicedToArray(arr,i){return function image_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function image_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function image_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return image_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return image_arrayLikeToArray(o,minLen)}(arr,i)||function image_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function image_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var image_FormItemKey;!function(FormItemKey){FormItemKey.IMAGE="image",FormItemKey.BG_COLOR="bg-color",FormItemKey.SHOW_CAPTION="show-caption",FormItemKey.DISPLAY_WIDTH="display-width",FormItemKey.RESIZE_WIDTH="resize-width",FormItemKey.RESIZE_HEIGHT="resize-height"}(image_FormItemKey||(image_FormItemKey={}));var image_layout={labelCol:{span:4},wrapperCol:{span:20}},image_renderFormItems=function renderFormItems(){return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(es_form.a.Item,Object.assign({},image_layout,{style:{width:"100%"},label:"显示说明",initialValue:!1,valuePropName:"checked",name:image_FormItemKey.SHOW_CAPTION,rules:[{required:!1}],children:Object(jsx_runtime.jsx)(es_switch.a,{})})),Object(jsx_runtime.jsx)(es_form.a.Item,Object.assign({},image_layout,{style:{width:"100%"},label:"背景色",name:image_FormItemKey.BG_COLOR,rules:[{required:!1}],children:Object(jsx_runtime.jsx)(color_picker_sketch,{})})),Object(jsx_runtime.jsx)(es_form.a.Item,Object.assign({},image_layout,{label:"显示宽度",style:{width:"100%"},name:image_FormItemKey.DISPLAY_WIDTH,rules:[{required:!1,message:"请输入显示宽度"}],children:Object(jsx_runtime.jsx)(input.a,{placeholder:"实际的显示宽度（支持 '200px'、'100%' 等格式）"})})),Object(jsx_runtime.jsx)(es_form.a.Item,Object.assign({},image_layout,{label:"像素宽度",style:{width:"100%"},name:image_FormItemKey.RESIZE_WIDTH,initialValue:750,rules:[{required:!1,message:"请输入像素宽度"}],children:Object(jsx_runtime.jsx)(input_number.a,{})})),Object(jsx_runtime.jsx)(es_form.a.Item,Object.assign({},image_layout,{label:"像素高度",style:{width:"100%"},name:image_FormItemKey.RESIZE_HEIGHT,rules:[{required:!1,message:"请输入像素高度"}],children:Object(jsx_runtime.jsx)(input_number.a,{})}))]})},image_ImageComponent=function ImageComponent(props){var _JSON$stringify,form=image_slicedToArray(es_form.a.useForm(),1)[0],data=Object(react.useMemo)((function(){return props.block.getData()}),[props.block]),url=Object(react.useMemo)((function(){return data.get(image_FormItemKey.IMAGE)}),[data]),showCaption=Object(react.useMemo)((function(){return data.get(image_FormItemKey.SHOW_CAPTION)}),[data]),bgColor=Object(react.useMemo)((function(){return data.get(image_FormItemKey.BG_COLOR)}),[data]),displayWidth=Object(react.useMemo)((function(){return data.get(image_FormItemKey.DISPLAY_WIDTH)}),[data]),resizeWidth=Object(react.useMemo)((function(){return data.get(image_FormItemKey.RESIZE_WIDTH)}),[data]),resizeHeight=Object(react.useMemo)((function(){return data.get(image_FormItemKey.RESIZE_HEIGHT)}),[data]),_useState2=image_slicedToArray(Object(react.useState)(!1),2),settingModalVisible=_useState2[0],setSettingModalVisible=_useState2[1],src=Object(react.useMemo)((function(){return composeImageURL(url,resizeWidth,resizeHeight)}),[url,resizeWidth,resizeHeight]);Object(react.useEffect)((function(){var _form$setFieldsValue;form.setFieldsValue(((_form$setFieldsValue={})[image_FormItemKey.IMAGE]=url,_form$setFieldsValue[image_FormItemKey.SHOW_CAPTION]=showCaption,_form$setFieldsValue[image_FormItemKey.BG_COLOR]=bgColor,_form$setFieldsValue[image_FormItemKey.DISPLAY_WIDTH]=displayWidth,_form$setFieldsValue[image_FormItemKey.RESIZE_WIDTH]=resizeWidth,_form$setFieldsValue[image_FormItemKey.RESIZE_HEIGHT]=resizeHeight,_form$setFieldsValue))}),[url,form,resizeWidth,resizeHeight,showCaption,bgColor,displayWidth]);var handleConfirm=Object(react.useCallback)(image_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var values;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,form.validateFields();case 2:values=_context.sent,props.blockProps.onChange((function(editorState){var _data$merge,contentState=editorState.getCurrentContent(),selection=Draft.SelectionState.createEmpty(props.block.getKey()),newContentState=Draft.Modifier.setBlockData(contentState,selection,data.merge(((_data$merge={})[image_FormItemKey.IMAGE]=values[image_FormItemKey.IMAGE],_data$merge[image_FormItemKey.SHOW_CAPTION]=values[image_FormItemKey.SHOW_CAPTION],_data$merge[image_FormItemKey.BG_COLOR]=values[image_FormItemKey.BG_COLOR],_data$merge[image_FormItemKey.DISPLAY_WIDTH]=values[image_FormItemKey.DISPLAY_WIDTH],_data$merge[image_FormItemKey.RESIZE_WIDTH]=values[image_FormItemKey.RESIZE_WIDTH],_data$merge[image_FormItemKey.RESIZE_HEIGHT]=values[image_FormItemKey.RESIZE_HEIGHT],_data$merge)));return Draft.EditorState.push(editorState,newContentState,"change-block-data")})),setSettingModalVisible(!1);case 5:case"end":return _context.stop()}}),_callee)}))),[form,data,props.block,props.blockProps]),popoverContent=Object(react.useMemo)((function(){return Object(jsx_runtime.jsxs)(es_form.a,{form:form,layout:"horizontal",onFinish:handleConfirm,children:[Object(jsx_runtime.jsx)(es_form.a.Item,Object.assign({},image_layout,{style:{width:"100%"},label:"URL",name:image_FormItemKey.IMAGE,rules:[{required:!0,message:"请输入图片 URL"}],children:Object(jsx_runtime.jsx)(input.a,{title:form.getFieldValue(image_FormItemKey.IMAGE)})})),image_renderFormItems()]})}),[form,handleConfirm]),handleImgMouseDown=Object(react.useCallback)((function(e){return e.preventDefault()}),[]),containerStyle=void 0===bgColor?{}:{backgroundColor:bgColor},dataStr=JSON.stringify(((_JSON$stringify={})[image_FormItemKey.IMAGE]=url,_JSON$stringify[image_FormItemKey.SHOW_CAPTION]=showCaption,_JSON$stringify[image_FormItemKey.BG_COLOR]=bgColor,_JSON$stringify[image_FormItemKey.DISPLAY_WIDTH]=displayWidth,_JSON$stringify[image_FormItemKey.RESIZE_WIDTH]=resizeWidth,_JSON$stringify[image_FormItemKey.RESIZE_HEIGHT]=resizeHeight,_JSON$stringify));return use_register_block(props,setSettingModalVisible),Object(jsx_runtime.jsxs)("div",{className:"r-image-container","data-data":Object(btoa.a)(encodeURIComponent(dataStr)),style:containerStyle,children:[Object(jsx_runtime.jsxs)("div",{contentEditable:!1,children:[isFalsy(src)&&Object(jsx_runtime.jsx)("div",{style:{fontSize:"40px",background:"#ededed",color:"#ababab",textAlign:"center",padding:"20px 0"},children:Object(jsx_runtime.jsx)(icon_font,{type:"icon-image"})}),!isFalsy(src)&&Object(jsx_runtime.jsx)("img",{style:{width:displayWidth},className:"r-img",onMouseDown:handleImgMouseDown,src:src})]}),null!=showCaption&&showCaption&&Object(jsx_runtime.jsx)("figcaption",{children:Object(jsx_runtime.jsx)(editor_block_wrapper,Object.assign({},props))}),Object(jsx_runtime.jsx)(modal.a,{title:"配置",visible:settingModalVisible,onOk:handleConfirm,onCancel:function onCancel(){return setSettingModalVisible(!1)},children:popoverContent})]})};function image_renderBlockToString(block){var _JSON$stringify2,data=block.getData(),url=data.get(image_FormItemKey.IMAGE),showCaption=data.get(image_FormItemKey.SHOW_CAPTION),bgColor=data.get(image_FormItemKey.BG_COLOR),displayWidth=data.get(image_FormItemKey.DISPLAY_WIDTH),resizeWidth=data.get(image_FormItemKey.RESIZE_WIDTH),resizeHeight=data.get(image_FormItemKey.RESIZE_HEIGHT),src=composeImageURL(url,resizeWidth,resizeHeight),text=block.getText(),dataStr=JSON.stringify(((_JSON$stringify2={})[image_FormItemKey.IMAGE]=url,_JSON$stringify2[image_FormItemKey.SHOW_CAPTION]=showCaption,_JSON$stringify2[image_FormItemKey.BG_COLOR]=bgColor,_JSON$stringify2[image_FormItemKey.DISPLAY_WIDTH]=displayWidth,_JSON$stringify2[image_FormItemKey.RESIZE_WIDTH]=resizeWidth,_JSON$stringify2[image_FormItemKey.RESIZE_HEIGHT]=resizeHeight,_JSON$stringify2)),containerStyle=void 0===bgColor?{}:{backgroundColor:bgColor};return Object(server_browser.renderToStaticMarkup)(Object(jsx_runtime.jsxs)("figure",{style:containerStyle,className:"r-image-container","data-data":Object(btoa.a)(encodeURIComponent(dataStr)),children:[Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsx)("noscript",{className:"loading-lazy",children:Object(jsx_runtime.jsx)("img",{src:src,style:{width:displayWidth},className:"r-img",loading:"lazy",alt:""})})}),null!=showCaption&&showCaption&&Object(jsx_runtime.jsx)("figcaption",{className:"r-text-container",children:text})]}))}image_ImageComponent.displayName="ImageComponent";var image_ImageControl=function ImageControl(props){var handleClick=function handleClick(){var _props$menuActionMode;isUndefined(props.blockKey)?props.editor.setEditorState((function(editorState){return insertBlock(editorState,Object(immutable.Map)({}),"atomic_image")})):handle_menu_action(props.editor,props.blockKey,null!==(_props$menuActionMode=props.menuActionMode)&&void 0!==_props$menuActionMode?_props$menuActionMode:MenuActionMode.EXCHANGE,"atomic_image")};return isUndefined(props.asMenuItem)?Object(jsx_runtime.jsx)(tooltip.a,{getPopupContainer:props.getPopupContainer,placement:props.tooltipPlacement,title:props.title,children:Object(jsx_runtime.jsx)(es_button.a,{icon:Object(jsx_runtime.jsx)(icon_font,{type:"icon-image"}),disabled:props.disabled,onClick:handleClick})}):Object(jsx_runtime.jsx)(menu.a.Item,Object.assign({},props,{icon:Object(jsx_runtime.jsx)(icon_font,{type:"icon-image"}),onMouseDown:function onMouseDown(e){e.preventDefault(),handleClick()},children:props.title}))};image_ImageControl.displayName="ImageControl";var directives_image=new directive_CompBlockDirective({name:"atomic_image",className:"r-image-container",tooltip:"图片",editable:!0,control:image_ImageControl,component:image_ImageComponent,renderToString:image_renderBlockToString});try{image_renderBlockToString.displayName="renderBlockToString",image_renderBlockToString.__docgenInfo={description:"",displayName:"renderBlockToString",props:{getKey:{defaultValue:null,description:"",name:"getKey",required:!0,type:{name:"() => string"}},getType:{defaultValue:null,description:"",name:"getType",required:!0,type:{name:"() => string"}},getText:{defaultValue:null,description:"",name:"getText",required:!0,type:{name:"() => string"}},getCharacterList:{defaultValue:null,description:"",name:"getCharacterList",required:!0,type:{name:"() => List<CharacterMetadata>"}},getLength:{defaultValue:null,description:"",name:"getLength",required:!0,type:{name:"() => number"}},getDepth:{defaultValue:null,description:"",name:"getDepth",required:!0,type:{name:"() => number"}},getData:{defaultValue:null,description:"",name:"getData",required:!0,type:{name:"() => Map<any, any>"}},getInlineStyleAt:{defaultValue:null,description:"",name:"getInlineStyleAt",required:!0,type:{name:"(offset: number) => DraftInlineStyle"}},getEntityAt:{defaultValue:null,description:"",name:"getEntityAt",required:!0,type:{name:"(offset: number) => string"}},findStyleRanges:{defaultValue:null,description:"Execute a callback for every contiguous range of styles within the block.",name:"findStyleRanges",required:!0,type:{name:"(filterFn: (value: CharacterMetadata) => boolean, callback: (start: number, end: number) => void) => void"}},findEntityRanges:{defaultValue:null,description:"Execute a callback for every contiguous range of entities within the block.",name:"findEntityRanges",required:!0,type:{name:"(filterFn: (value: CharacterMetadata) => boolean, callback: (start: number, end: number) => void) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/directives/image.tsx#renderBlockToString"]={docgenInfo:image_renderBlockToString.__docgenInfo,name:"renderBlockToString",path:"src/directives/image.tsx#renderBlockToString"})}catch(__react_docgen_typescript_loader_error){}function image_inline_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function image_inline_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){image_inline_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){image_inline_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function image_inline_slicedToArray(arr,i){return function image_inline_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function image_inline_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function image_inline_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return image_inline_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return image_inline_arrayLikeToArray(o,minLen)}(arr,i)||function image_inline_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function image_inline_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var image_inline_FormItemKey;!function(FormItemKey){FormItemKey.SRC="src",FormItemKey.FLOAT="float",FormItemKey.DISPLAY_WIDTH="display-width",FormItemKey.DISPLAY_HEIGHT="display-height",FormItemKey.MARGIN="margin"}(image_inline_FormItemKey||(image_inline_FormItemKey={}));var image_inline_renderFormItems=function renderFormItems(className,layout){return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(es_form.a.Item,Object.assign({},layout,{className:className,label:"图片地址",style:{width:"100%"},name:image_inline_FormItemKey.SRC,rules:[{required:!0,message:"请输入图片地址"}],children:Object(jsx_runtime.jsx)(input.a,{})})),Object(jsx_runtime.jsx)(es_form.a.Item,Object.assign({},layout,{className:className,label:"浮动",style:{width:"100%"},name:image_inline_FormItemKey.FLOAT,rules:[{required:!1}],children:Object(jsx_runtime.jsxs)(es_select.a,{allowClear:!0,children:[Object(jsx_runtime.jsx)(es_select.a.Option,{value:"left",children:"左"}),Object(jsx_runtime.jsx)(es_select.a.Option,{value:"right",children:"右"})]})})),Object(jsx_runtime.jsx)(es_form.a.Item,Object.assign({},layout,{className:className,label:"显示宽度",style:{width:"100%"},name:image_inline_FormItemKey.DISPLAY_WIDTH,rules:[{required:!1,message:"请输入显示宽度"}],children:Object(jsx_runtime.jsx)(input.a,{})})),Object(jsx_runtime.jsx)(es_form.a.Item,Object.assign({},layout,{className:className,label:"显示高度",style:{width:"100%"},name:image_inline_FormItemKey.DISPLAY_HEIGHT,rules:[{required:!1,message:"请输入显示宽度"}],children:Object(jsx_runtime.jsx)(input.a,{})})),Object(jsx_runtime.jsx)(es_form.a.Item,Object.assign({},layout,{className:className,label:"外边距",style:{width:"100%"},name:image_inline_FormItemKey.MARGIN,rules:[{required:!1}],children:Object(jsx_runtime.jsx)(input.a,{})}))]})},image_inline=new InlineDirective({name:"IMAGE",tooltip:"行内图片",control:function ImageControl(props){var _useState2=image_inline_slicedToArray(Object(react.useState)(!1),2),configFormVisible=_useState2[0],setConfigFormVisible=_useState2[1],form=image_inline_slicedToArray(es_form.a.useForm(),1)[0],contentState=Object(react.useMemo)((function(){return props.editorState.getCurrentContent()}),[props.editorState]),selection=Object(react.useMemo)((function(){return props.editorState.getSelection()}),[props.editorState]),selectedText=Object(react.useMemo)((function(){if(selection.isCollapsed())return"";var text=contentState.getBlockForKey(selection.getAnchorKey()).getText(),_ref2=image_inline_slicedToArray(selection.getIsBackward()?[selection.getFocusOffset(),selection.getAnchorOffset()]:[selection.getAnchorOffset(),selection.getFocusOffset()],2),start=_ref2[0],end=_ref2[1];return text.slice(start,end)}),[contentState,selection]);Object(react.useEffect)((function(){form.setFieldsValue({text:selectedText})}),[selectedText,form]);var handleClick=Object(react.useCallback)((function(){setConfigFormVisible(!0)}),[]),handleComfirm=Object(react.useCallback)(image_inline_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var values,src,displayWidth,displayHeight,_float,margin;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,form.validateFields();case 2:values=_context.sent,src=values[image_inline_FormItemKey.SRC],displayWidth=values[image_inline_FormItemKey.DISPLAY_WIDTH],displayHeight=values[image_inline_FormItemKey.DISPLAY_HEIGHT],_float=values[image_inline_FormItemKey.FLOAT],margin=values[image_inline_FormItemKey.MARGIN],props.editor.setEditorState((function(editorState){var _contentState$createE,contentState=editorState.getCurrentContent(),entityKey=contentState.createEntity("IMAGE","IMMUTABLE",((_contentState$createE={})[image_inline_FormItemKey.SRC]=src,_contentState$createE[image_inline_FormItemKey.DISPLAY_WIDTH]=displayWidth,_contentState$createE[image_inline_FormItemKey.DISPLAY_HEIGHT]=displayHeight,_contentState$createE[image_inline_FormItemKey.FLOAT]=_float,_contentState$createE[image_inline_FormItemKey.MARGIN]=margin,_contentState$createE)).getLastCreatedEntityKey(),newEditorState=editorState;if(!isEmptyString(selectedText)){var newContentState=Draft.Modifier.replaceText(contentState,selection," ",editorState.getCurrentInlineStyle(),entityKey);newEditorState=Draft.EditorState.push(editorState,newContentState,"insert-characters")}return setConfigFormVisible(!1),newEditorState}));case 9:case"end":return _context.stop()}}),_callee)}))),[form,props.editor,selectedText,selection]),handleCancel=Object(react.useCallback)((function(){setConfigFormVisible(!1)}),[]);return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(tooltip.a,{getPopupContainer:props.getPopupContainer,placement:props.tooltipPlacement,title:props.title,children:Object(jsx_runtime.jsx)(es_button.a,{icon:Object(jsx_runtime.jsx)(icon_font,{type:"icon-image"}),disabled:props.disabled,onClick:handleClick})}),Object(jsx_runtime.jsx)(modal.a,{title:"创建图片",onOk:handleComfirm,onCancel:handleCancel,visible:configFormVisible,destroyOnClose:!0,children:Object(jsx_runtime.jsx)(es_form.a,{form:form,preserve:!1,children:image_inline_renderFormItems()})})]})},getImplEntity:function getImplEntity(element,inlineCreators){var _inlineCreators$Entit;return"IMG"===element.tagName?inlineCreators.Entity("IMAGE",((_inlineCreators$Entit={})[image_inline_FormItemKey.SRC]=element.getAttribute("src"),_inlineCreators$Entit)):null}}),InfoCircleOutlined=(__webpack_require__("./node_modules/core-js/modules/es.string.match.js"),__webpack_require__("./node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js")),GlobalOutlined=__webpack_require__("./node_modules/@ant-design/icons/es/icons/GlobalOutlined.js");function embed_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function embed_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){embed_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){embed_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function embed_slicedToArray(arr,i){return function embed_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function embed_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function embed_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return embed_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return embed_arrayLikeToArray(o,minLen)}(arr,i)||function embed_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function embed_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var embed_FormItemKey;!function(FormItemKey){FormItemKey.URL="url",FormItemKey.SHOW_CAPTION="show-caption",FormItemKey.BG_COLOR="bg-color",FormItemKey.WIDTH="width",FormItemKey.HEIGHT="height"}(embed_FormItemKey||(embed_FormItemKey={}));var embed_useStyles=Object(react_jss_esm.a)((function(theme){return{infoIcon:{marginRight:theme.marginXss,verticalAlign:"text-top"},tips:{color:"grey",marginBottom:theme.marginSm,fontSize:.12}}}),{name:"Embed"}),embed_layout={labelCol:{span:4},wrapperCol:{span:20}},tailLayout={wrapperCol:{offset:4,span:20}};function getTips(containerClassName,iconClassName){return Object(jsx_runtime.jsxs)("div",{className:containerClassName,children:[Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)(InfoCircleOutlined.a,{className:iconClassName})," 注意："]}),Object(jsx_runtime.jsx)("br",{}),Object(jsx_runtime.jsx)("div",{children:"1. URL 内容支持格式："}),Object(jsx_runtime.jsxs)("ul",{children:[Object(jsx_runtime.jsx)("li",{children:"http://***"}),Object(jsx_runtime.jsx)("li",{children:'<iframe src="***"></iframe>'})]}),Object(jsx_runtime.jsx)("div",{children:"2. 高度如果为百分比值，则该值为相对于宽度的百分比，即长宽比例"})]})}getTips.displayName="getTips";var embed_renderFormItems=function renderFormItems(){return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(es_form.a.Item,Object.assign({},embed_layout,{label:"URL",name:embed_FormItemKey.URL,rules:[{required:!0,message:"请输入 URL"}],children:Object(jsx_runtime.jsx)(input.a,{})})),Object(jsx_runtime.jsx)(es_form.a.Item,Object.assign({},embed_layout,{label:"显示说明",initialValue:!1,valuePropName:"checked",name:embed_FormItemKey.SHOW_CAPTION,rules:[{required:!1}],children:Object(jsx_runtime.jsx)(es_switch.a,{})})),Object(jsx_runtime.jsx)(es_form.a.Item,Object.assign({},embed_layout,{label:"背景色",name:embed_FormItemKey.BG_COLOR,rules:[{required:!1}],children:Object(jsx_runtime.jsx)(color_picker_sketch,{})})),Object(jsx_runtime.jsx)(es_form.a.Item,Object.assign({},embed_layout,{label:"宽度",name:embed_FormItemKey.WIDTH,initialValue:"100%",rules:[{required:!0,message:"请输入宽度"}],children:Object(jsx_runtime.jsx)(input.a,{})})),Object(jsx_runtime.jsx)(es_form.a.Item,Object.assign({},embed_layout,{label:"高度",name:embed_FormItemKey.HEIGHT,initialValue:"56.25%",rules:[{required:!0,message:"请输入宽度"}],children:Object(jsx_runtime.jsx)(input.a,{})}))]})},embed_BlockEmbed=function BlockEmbed(props){var _JSON$stringify,classes=embed_useStyles(),form=embed_slicedToArray(es_form.a.useForm(),1)[0],_useState2=embed_slicedToArray(Object(react.useState)(!1),2),settingModalVisible=_useState2[0],setSettingModalVisible=_useState2[1],data=Object(react.useMemo)((function(){return props.block.getData()}),[props.block]);Object(react.useEffect)((function(){var _form$setFieldsValue;form.setFieldsValue(((_form$setFieldsValue={})[embed_FormItemKey.URL]=data.get(embed_FormItemKey.URL),_form$setFieldsValue))}),[form,data]);var handleConfirm=Object(react.useCallback)(embed_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var values;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,form.validateFields();case 2:values=_context.sent,props.blockProps.onChange((function(editorState){var _data$merge,contentState=editorState.getCurrentContent(),selection=Draft.SelectionState.createEmpty(props.block.getKey()),newContentState=Draft.Modifier.setBlockData(contentState,selection,data.merge(((_data$merge={})[embed_FormItemKey.URL]=values[embed_FormItemKey.URL],_data$merge[embed_FormItemKey.SHOW_CAPTION]=values[embed_FormItemKey.SHOW_CAPTION],_data$merge[embed_FormItemKey.BG_COLOR]=values[embed_FormItemKey.BG_COLOR],_data$merge[embed_FormItemKey.WIDTH]=values[embed_FormItemKey.WIDTH],_data$merge[embed_FormItemKey.HEIGHT]=values[embed_FormItemKey.HEIGHT],_data$merge)));return Draft.EditorState.push(editorState,newContentState,"change-block-data")})),setSettingModalVisible(!1);case 5:case"end":return _context.stop()}}),_callee)}))),[form,props.block,data,props.blockProps]),tips=Object(react.useMemo)((function(){return getTips(classes.tips,classes.infoIcon)}),[classes]),popoverContent=Object(react.useMemo)((function(){return Object(jsx_runtime.jsxs)(es_form.a,{form:form,onFinish:handleConfirm,children:[embed_renderFormItems(),Object(jsx_runtime.jsx)(es_form.a.Item,Object.assign({},tailLayout,{children:tips}))]})}),[form,handleConfirm,tips]),src=Object(react.useMemo)((function(){return getSrc(data)}),[data]),width=Object(react.useMemo)((function(){var _data$get;return null!==(_data$get=data.get(embed_FormItemKey.WIDTH))&&void 0!==_data$get?_data$get:"100%"}),[data]),height=Object(react.useMemo)((function(){var _data$get2;return null!==(_data$get2=data.get(embed_FormItemKey.HEIGHT))&&void 0!==_data$get2?_data$get2:"56.25%"}),[data]),showCaption=Object(react.useMemo)((function(){return data.get(embed_FormItemKey.SHOW_CAPTION)}),[data]),bgColor=Object(react.useMemo)((function(){return data.get(embed_FormItemKey.BG_COLOR)}),[data]),handleIframemgMouseDown=Object(react.useCallback)((function(e){return e.preventDefault()}),[]),containerStyle=void 0===bgColor?{}:{backgroundColor:bgColor},dataStr=JSON.stringify(((_JSON$stringify={})[embed_FormItemKey.URL]=src,_JSON$stringify[embed_FormItemKey.BG_COLOR]=bgColor,_JSON$stringify[embed_FormItemKey.SHOW_CAPTION]=showCaption,_JSON$stringify[embed_FormItemKey.WIDTH]=width,_JSON$stringify[embed_FormItemKey.HEIGHT]=height,_JSON$stringify));return use_register_block(props,setSettingModalVisible),Object(jsx_runtime.jsxs)("div",{className:"r-embed",style:containerStyle,"data-data":Object(btoa.a)(encodeURIComponent(dataStr)),children:[isFalsy(src)&&Object(jsx_runtime.jsx)("div",{style:{fontSize:"40px",background:"#ededed",color:"#ababab",textAlign:"center",padding:"20px 0"},children:Object(jsx_runtime.jsx)(GlobalOutlined.a,{})}),!isFalsy(src)&&Object(jsx_runtime.jsx)("div",{className:"r-iframe-container",contentEditable:!1,style:{width:width,paddingTop:height},children:Object(jsx_runtime.jsx)("iframe",{onMouseDown:handleIframemgMouseDown,className:"r-iframe",style:{pointerEvents:"none"},src:src,scrolling:"no",frameBorder:"no",loading:"lazy",allowFullScreen:!0})}),!isFalsy(showCaption)&&Object(jsx_runtime.jsx)("figcaption",{children:Object(jsx_runtime.jsx)(editor_block_wrapper,Object.assign({},props))}),Object(jsx_runtime.jsx)(modal.a,{title:"配置",visible:settingModalVisible,onOk:handleConfirm,onCancel:function onCancel(){return setSettingModalVisible(!1)},children:popoverContent})]})};function getSrc(data){var _data$get3,url=null!==(_data$get3=data.get(embed_FormItemKey.URL))&&void 0!==_data$get3?_data$get3:"",matched=url.match(/<iframe.+src\s*=\s*["']([^"']+)["']/);return null==matched?url:matched[1]}function embed_renderBlockToString(block){var _data$get4,_data$get5,_JSON$stringify2,data=block.getData(),src=getSrc(data),showCaption=data.get(embed_FormItemKey.SHOW_CAPTION),bgColor=data.get(embed_FormItemKey.BG_COLOR),width=null!==(_data$get4=data.get(embed_FormItemKey.WIDTH))&&void 0!==_data$get4?_data$get4:"100%",height=null!==(_data$get5=data.get(embed_FormItemKey.HEIGHT))&&void 0!==_data$get5?_data$get5:"56.25%",text=block.getText(),dataStr=JSON.stringify(((_JSON$stringify2={})[embed_FormItemKey.URL]=src,_JSON$stringify2[embed_FormItemKey.BG_COLOR]=bgColor,_JSON$stringify2[embed_FormItemKey.SHOW_CAPTION]=showCaption,_JSON$stringify2[embed_FormItemKey.WIDTH]=width,_JSON$stringify2[embed_FormItemKey.HEIGHT]=height,_JSON$stringify2)),containerStyle=void 0===bgColor?{}:{backgroundColor:bgColor};return Object(server_browser.renderToStaticMarkup)(Object(jsx_runtime.jsxs)("figure",{style:containerStyle,className:"r-embed","data-data":Object(btoa.a)(encodeURIComponent(dataStr)),children:[Object(jsx_runtime.jsx)("div",{className:"r-iframe-container",style:{width:width,paddingTop:height},children:Object(jsx_runtime.jsx)("noscript",{className:"loading-lazy",children:Object(jsx_runtime.jsx)("iframe",{className:"r-iframe",src:src,scrolling:"no",frameBorder:"no",allowFullScreen:!0,loading:"lazy"})})}),!isFalsy(showCaption)&&Object(jsx_runtime.jsx)("figcaption",{className:"r-text-container",children:text})]}))}embed_BlockEmbed.displayName="BlockEmbed";var embed_EmbedControl=function EmbedControl(props){var handleClick=function handleClick(){var _props$menuActionMode;isUndefined(props.blockKey)?props.editor.setEditorState((function(editorState){return insertBlock(editorState,Object(immutable.Map)({}),"atomic_embed")})):handle_menu_action(props.editor,props.blockKey,null!==(_props$menuActionMode=props.menuActionMode)&&void 0!==_props$menuActionMode?_props$menuActionMode:MenuActionMode.EXCHANGE,"atomic_embed")};return isUndefined(props.asMenuItem)?Object(jsx_runtime.jsx)(tooltip.a,{getPopupContainer:props.getPopupContainer,placement:props.tooltipPlacement,title:props.title,children:Object(jsx_runtime.jsx)(es_button.a,{icon:Object(jsx_runtime.jsx)(GlobalOutlined.a,{}),disabled:props.disabled,onClick:handleClick})}):Object(jsx_runtime.jsx)(menu.a.Item,Object.assign({},props,{icon:Object(jsx_runtime.jsx)(GlobalOutlined.a,{}),onMouseDown:function onMouseDown(e){e.preventDefault(),handleClick()},children:props.title}))};embed_EmbedControl.displayName="EmbedControl";var directives_embed=new directive_CompBlockDirective({name:"atomic_embed",className:"r-embed",tooltip:"嵌入内容（网页）",editable:!0,control:embed_EmbedControl,component:embed_BlockEmbed,renderToString:embed_renderBlockToString});try{embed_renderBlockToString.displayName="renderBlockToString",embed_renderBlockToString.__docgenInfo={description:"",displayName:"renderBlockToString",props:{getKey:{defaultValue:null,description:"",name:"getKey",required:!0,type:{name:"() => string"}},getType:{defaultValue:null,description:"",name:"getType",required:!0,type:{name:"() => string"}},getText:{defaultValue:null,description:"",name:"getText",required:!0,type:{name:"() => string"}},getCharacterList:{defaultValue:null,description:"",name:"getCharacterList",required:!0,type:{name:"() => List<CharacterMetadata>"}},getLength:{defaultValue:null,description:"",name:"getLength",required:!0,type:{name:"() => number"}},getDepth:{defaultValue:null,description:"",name:"getDepth",required:!0,type:{name:"() => number"}},getData:{defaultValue:null,description:"",name:"getData",required:!0,type:{name:"() => Map<any, any>"}},getInlineStyleAt:{defaultValue:null,description:"",name:"getInlineStyleAt",required:!0,type:{name:"(offset: number) => DraftInlineStyle"}},getEntityAt:{defaultValue:null,description:"",name:"getEntityAt",required:!0,type:{name:"(offset: number) => string"}},findStyleRanges:{defaultValue:null,description:"Execute a callback for every contiguous range of styles within the block.",name:"findStyleRanges",required:!0,type:{name:"(filterFn: (value: CharacterMetadata) => boolean, callback: (start: number, end: number) => void) => void"}},findEntityRanges:{defaultValue:null,description:"Execute a callback for every contiguous range of entities within the block.",name:"findEntityRanges",required:!0,type:{name:"(filterFn: (value: CharacterMetadata) => boolean, callback: (start: number, end: number) => void) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/directives/embed.tsx#renderBlockToString"]={docgenInfo:embed_renderBlockToString.__docgenInfo,name:"renderBlockToString",path:"src/directives/embed.tsx#renderBlockToString"})}catch(__react_docgen_typescript_loader_error){}var LinkOutlined=__webpack_require__("./node_modules/@ant-design/icons/es/icons/LinkOutlined.js");function link_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function link_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){link_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){link_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function link_slicedToArray(arr,i){return function link_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function link_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function link_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return link_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return link_arrayLikeToArray(o,minLen)}(arr,i)||function link_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function link_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var link_FormItemKey;!function(FormItemKey){FormItemKey.URL="url",FormItemKey.TEXT="text"}(link_FormItemKey||(link_FormItemKey={}));var italic_styleMap,underline_styleMap,strikethrough_styleMap,code_styleMap,directives_link=new InlineDirective({name:"LINK",tooltip:"链接",control:function LinkControl(props){var _useState2=link_slicedToArray(Object(react.useState)(!1),2),configFormVisible=_useState2[0],setConfigFormVisible=_useState2[1],form=link_slicedToArray(es_form.a.useForm(),1)[0],contentState=Object(react.useMemo)((function(){return props.editorState.getCurrentContent()}),[props.editorState]),selection=Object(react.useMemo)((function(){return props.editorState.getSelection()}),[props.editorState]),selectedText=Object(react.useMemo)((function(){if(selection.isCollapsed())return"";var text=contentState.getBlockForKey(selection.getAnchorKey()).getText(),_ref2=link_slicedToArray(selection.getIsBackward()?[selection.getFocusOffset(),selection.getAnchorOffset()]:[selection.getAnchorOffset(),selection.getFocusOffset()],2),start=_ref2[0],end=_ref2[1];return text.slice(start,end)}),[contentState,selection]);Object(react.useEffect)((function(){form.setFieldsValue({text:selectedText})}),[selectedText,form]);var handleComfirm=Object(react.useCallback)(link_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var values,url,text;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,form.validateFields();case 2:values=_context.sent,url=values[link_FormItemKey.URL],text=values[link_FormItemKey.TEXT],props.editor.setEditorState((function(editorState){var contentState=editorState.getCurrentContent(),entityKey=contentState.createEntity("LINK","MUTABLE",{url:url}).getLastCreatedEntityKey(),newEditorState=editorState;if(isEmptyString(selectedText)){var newContentState=Draft.Modifier.replaceText(contentState,selection,text,editorState.getCurrentInlineStyle(),entityKey);newEditorState=Draft.EditorState.push(editorState,newContentState,"insert-characters")}else newEditorState=Draft.RichUtils.toggleLink(editorState,editorState.getSelection(),entityKey);return setConfigFormVisible(!1),newEditorState}));case 6:case"end":return _context.stop()}}),_callee)}))),[form,props.editor,selectedText,selection]),handleCancel=Object(react.useCallback)((function(){setConfigFormVisible(!1)}),[]);return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(tooltip.a,{getPopupContainer:props.getPopupContainer,placement:props.tooltipPlacement,title:props.title,children:Object(jsx_runtime.jsx)(es_button.a,{icon:Object(jsx_runtime.jsx)(LinkOutlined.a,{}),disabled:props.disabled,onClick:function handleClick(){setConfigFormVisible(!0)}})}),Object(jsx_runtime.jsx)(modal.a,{title:"创建链接",onOk:handleComfirm,onCancel:handleCancel,visible:configFormVisible,destroyOnClose:!0,children:Object(jsx_runtime.jsxs)(es_form.a,{form:form,preserve:!1,children:[Object(jsx_runtime.jsx)(es_form.a.Item,{label:"文本",name:link_FormItemKey.TEXT,rules:[{required:!0,message:"请输入文本"}],children:Object(jsx_runtime.jsx)(input.a,{disabled:!isEmptyString(selectedText)})}),Object(jsx_runtime.jsx)(es_form.a.Item,{label:"URL",name:link_FormItemKey.URL,style:{marginBottom:0},rules:[{required:!0,message:"请输入 URL"}],children:Object(jsx_runtime.jsx)(input.a,{})})]})})]})},getImplEntity:function getImplEntity(element,inlineCreators){var _inlineCreators$Entit;return"A"===element.tagName?inlineCreators.Entity("LINK",((_inlineCreators$Entit={})[link_FormItemKey.URL]=element.getAttribute("href"),_inlineCreators$Entit)):null}}),title_options=[{key:"标题一",value:BLOCK_TYPE_HEADER_ONE},{key:"标题二",value:BLOCK_TYPE_HEADER_TWO},{key:"标题三",value:BLOCK_TYPE_HEADER_THREE},{key:"标题四",value:BLOCK_TYPE_HEADER_FOUR},{key:"标题五",value:BLOCK_TYPE_HEADER_FIVE},{key:"标题六",value:BLOCK_TYPE_HEADER_SIX}],TitleControl=create_select({icon:Object(jsx_runtime.jsx)(icon_font,{type:"icon-title"}),defaultText:"段落",getValue:function getValue(editorState,blockKey){var currentContent=editorState.getCurrentContent(),selection=editorState.getSelection(),type="normal",block=currentContent.getBlockForKey(null!=blockKey?blockKey:selection.getStartKey());return isUndefined(block)||title_options.forEach((function(item){item.value===block.getType()&&(type=item.value)})),type},handleChange:function handleChange(editor,value,blockKey,menuActionMode){editor.setEditorState((function(editorState){return isUndefined(blockKey)||handle_menu_action(editor,blockKey,null!=menuActionMode?menuActionMode:MenuActionMode.EXCHANGE,value),Draft.RichUtils.toggleBlockType(editorState,"normal"===value?BLOCK_TYPE_UNSTYLED:value)}))},options:title_options}),title=new BlockDirective({name:"HEADER",tooltip:"标题",control:TitleControl,shortcut:["ctrl+1","ctrl+2","ctrl+3","ctrl+4","ctrl+5","ctrl+6"],command:title_options.map((function(option){return"directive-"+option.value})),handleCommand:function handleCommand(editor,command){return TitleControl.handleCommand(editor,command.replace(/^directive-/,"")),!0}}),BlockquoteControl=create_button({icon:Object(jsx_runtime.jsx)(icon_font,{type:"icon-quote"}),isActive:function isActive(editorState){var selection=editorState.getSelection();return"blockquote"===editorState.getCurrentContent().getBlockForKey(selection.getStartKey()).getType()},handleClick:function handleClick(editor,blockKey,menuActionMode){isUndefined(blockKey)?editor.setEditorState((function(editorState){return Draft.RichUtils.toggleBlockType(editorState,"blockquote")})):handle_menu_action(editor,blockKey,null!=menuActionMode?menuActionMode:MenuActionMode.EXCHANGE,"blockquote")}}),blockquote=new BlockDirective({name:"blockquote",tooltip:"引用",control:BlockquoteControl}),OrderedListOutlined=__webpack_require__("./node_modules/@ant-design/icons/es/icons/OrderedListOutlined.js"),OrderedListItemControl=create_button({icon:Object(jsx_runtime.jsx)(OrderedListOutlined.a,{}),isActive:function isActive(editorState){var selection=editorState.getSelection();return"ordered-list-item"===editorState.getCurrentContent().getBlockForKey(selection.getStartKey()).getType()},handleClick:function handleClick(editor,blockKey,menuActionMode){isUndefined(blockKey)?editor.setEditorState((function(editorState){return Draft.RichUtils.toggleBlockType(editorState,"ordered-list-item")})):handle_menu_action(editor,blockKey,null!=menuActionMode?menuActionMode:MenuActionMode.EXCHANGE,"ordered-list-item")}}),ol=new BlockDirective({name:"ordered-list-item",tooltip:"有序列表",control:OrderedListItemControl}),UnorderedListOutlined=__webpack_require__("./node_modules/@ant-design/icons/es/icons/UnorderedListOutlined.js"),ul_DIRE_NAME="unordered-list-item",UnorderedListItemControl=create_button({icon:Object(jsx_runtime.jsx)(UnorderedListOutlined.a,{}),isActive:function isActive(editorState){var selection=editorState.getSelection();return editorState.getCurrentContent().getBlockForKey(selection.getStartKey()).getType()===ul_DIRE_NAME},handleClick:function handleClick(editor,blockKey,menuActionMode){isUndefined(blockKey)?editor.setEditorState((function(editorState){return Draft.RichUtils.toggleBlockType(editorState,ul_DIRE_NAME)})):handle_menu_action(editor,blockKey,null!=menuActionMode?menuActionMode:MenuActionMode.EXCHANGE,ul_DIRE_NAME)}}),ul=new BlockDirective({name:ul_DIRE_NAME,tooltip:"无序列表",control:UnorderedListItemControl}),ItalicOutlined=__webpack_require__("./node_modules/@ant-design/icons/es/icons/ItalicOutlined.js"),ItalicControl=create_button({icon:Object(jsx_runtime.jsx)(ItalicOutlined.a,{}),isActive:function isActive(editorState){return editorState.getCurrentInlineStyle().has("ITALIC")},handleClick:function handleClick(editor){editor.setEditorState((function(editorState){return Draft.RichUtils.toggleInlineStyle(editorState,"ITALIC")}))}}),italic=new StylInlineDirective({name:"ITALIC",tooltip:"斜体",control:ItalicControl,styleKeys:["ITALIC"],styleMap:(italic_styleMap={},italic_styleMap.ITALIC={fontStyle:"italic"},italic_styleMap),getImplKey:function getImplKey(style){return"italic"===style.fontStyle?"ITALIC":null},shortcut:"ctrl+i",command:"directive-ITALIC",handleCommand:function handleCommand(editor){return ItalicControl.handleCommand(editor),!0}}),UnderlineOutlined=__webpack_require__("./node_modules/@ant-design/icons/es/icons/UnderlineOutlined.js"),UnderlineControl=create_button({icon:Object(jsx_runtime.jsx)(UnderlineOutlined.a,{}),isActive:function isActive(editorState){return editorState.getCurrentInlineStyle().has("UNDERLINE")},handleClick:function handleClick(editor){editor.setEditorState((function(editorState){return Draft.RichUtils.toggleInlineStyle(editorState,"UNDERLINE")}))}}),underline=new StylInlineDirective({name:"UNDERLINE",tooltip:"下划线",control:UnderlineControl,styleKeys:["UNDERLINE"],styleMap:(underline_styleMap={},underline_styleMap.UNDERLINE={textDecoration:"underline"},underline_styleMap),getImplKey:function getImplKey(style){return style.textDecoration.includes("underline")?"UNDERLINE":null}}),StrikethroughOutlined=__webpack_require__("./node_modules/@ant-design/icons/es/icons/StrikethroughOutlined.js"),StrikethroughControl=create_button({icon:Object(jsx_runtime.jsx)(StrikethroughOutlined.a,{}),isActive:function isActive(editorState){return editorState.getCurrentInlineStyle().has("STRIKETHROUGH")},handleClick:function handleClick(editor){editor.setEditorState((function(editorState){return Draft.RichUtils.toggleInlineStyle(editorState,"STRIKETHROUGH")}))}}),strikethrough=new StylInlineDirective({name:"STRIKETHROUGH",tooltip:"删除线",control:StrikethroughControl,styleKeys:["STRIKETHROUGH"],styleMap:(strikethrough_styleMap={},strikethrough_styleMap.STRIKETHROUGH={textDecoration:"line-through"},strikethrough_styleMap),getImplKey:function getImplKey(style){return style.textDecoration.includes("line-through")?"STRIKETHROUGH":null}}),CodeControl=create_button({icon:Object(jsx_runtime.jsx)(icon_font,{type:"icon-codeworking"}),isActive:function isActive(editorState){return editorState.getCurrentInlineStyle().has("CODE")},handleClick:function handleClick(editor){editor.setEditorState((function(editorState){return Draft.RichUtils.toggleInlineStyle(editorState,"CODE")}))}}),code=new StylInlineDirective({name:"CODE",tooltip:"代码",control:CodeControl,styleKeys:["CODE"],styleMap:(code_styleMap={},code_styleMap.CODE={fontFamily:"monospace",overflowWrap:"break-word"},code_styleMap),getImplKey:function getImplKey(style){return"monospace"===style.fontFamily?"CODE":null}}),popover=__webpack_require__("./node_modules/antd/es/popover/index.js"),color_picker_useStyles=Object(react_jss_esm.a)((function(theme){return{button:{display:"block",fontSize:16,padding:"0 "+theme.paddingXs+"px","&.ant-popover-disabled-compatible-wrapper":{padding:0,verticalAlign:0},"& button":{padding:"0 "+theme.paddingXs+"px"}},icon:{marginRight:theme.marginMd+"px"},popoverOverlay:{"@global .ant-popover-inner-content":{padding:theme.paddingXs+"px "+theme.paddingXs+"px "+theme.paddingXss+"px"}},swatch:{width:20,height:20,borderRadius:theme.borderRadiusBase,border:"solid 1px "+theme.borderColorBase,transition:"all .3s cubic-bezier(.645,.045,.355,1)","$button:hover &":{borderColor:"var(--ant-primary-color-hover)"}},swatchNone:{background:"linear-gradient(-45deg, rgba(255,255,255,1) 49%, rgba(0,0,0,0.3) 50%, rgba(255,255,255,1) 51%)"},picker:{"& > div > div":{boxShadow:"none !important"},"@global .flexbox-fix":{display:"none !important"}},clearButton:{marginLeft:"5px",marginBottom:theme.marginXss}}}),{name:"ColorPicker"}),color_picker_ColorPicker=function ColorPicker(props){var _clx,classes=color_picker_useStyles(),onChange=props.onChange,handleChange=Object(react.useCallback)((function(color){null==onChange||onChange(color.hex)}),[onChange]),type=Object(react.useMemo)((function(){var _props$active;return null!==(_props$active=props.active)&&void 0!==_props$active&&_props$active?"primary":"default"}),[props.active]),handleClear=Object(react.useCallback)((function(){isFalsy(props.clearBtnValue)||null==onChange||onChange(props.clearBtnValue)}),[onChange,props.clearBtnValue]),popoverContent=Object(react.useMemo)((function(){return Object(jsx_runtime.jsxs)("div",{className:classes.picker,children:[!isFalsy(props.clearBtnValue)&&Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsx)(es_button.a,{onClick:handleClear,className:classes.clearButton,size:"small",children:"清除"})}),Object(jsx_runtime.jsx)(react_color_es.a,{colors:props.colors,color:props.value,onChange:handleChange})]})}),[classes,handleClear,props.value,handleChange,props.colors,props.clearBtnValue]),overlayStyle=Object(react.useMemo)((function(){var _props$disabled;return{visibility:null!==(_props$disabled=props.disabled)&&void 0!==_props$disabled&&_props$disabled?"hidden":"visible"}}),[props.disabled]);return Object(jsx_runtime.jsx)(popover.a,{getPopupContainer:props.getPopupContainer,overlayClassName:classes.popoverOverlay,trigger:"click",placement:"bottomLeft",overlayStyle:overlayStyle,content:popoverContent,children:Object(jsx_runtime.jsx)(es_button.a,{className:classes.button,type:type,disabled:props.disabled,children:Object(jsx_runtime.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[null!=props.icon&&Object(jsx_runtime.jsx)("span",{className:classes.icon,children:props.icon}),Object(jsx_runtime.jsx)("span",{className:classnames_default()(classes.swatch,(_clx={},_clx[classes.swatchNone]=isFalsy(props.value),_clx)),style:{backgroundColor:props.value}})]})})})};color_picker_ColorPicker.displayName="ColorPicker";var color_picker=color_picker_ColorPicker;try{colorpicker.displayName="colorpicker",colorpicker.__docgenInfo={description:"",displayName:"colorpicker",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},icon:{defaultValue:null,description:"",name:"icon",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},colors:{defaultValue:null,description:"",name:"colors",required:!1,type:{name:"string[]"}},active:{defaultValue:null,description:"",name:"active",required:!1,type:{name:"boolean"}},clearBtnValue:{defaultValue:null,description:"",name:"clearBtnValue",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: string) => void)"}},getPopupContainer:{defaultValue:null,description:"",name:"getPopupContainer",required:!1,type:{name:"((triggerNode: HTMLElement) => HTMLElement)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/color-picker.tsx#colorpicker"]={docgenInfo:colorpicker.__docgenInfo,name:"colorpicker",path:"src/color-picker.tsx#colorpicker"})}catch(__react_docgen_typescript_loader_error){}var create_color_picker=function createColorPicker(options){return function PickerCtrl(props){var value=Object(react.useMemo)((function(){var val=options.getValue(props.editorState);if(!isFalsy(val))return val}),[props.editorState]),disabled=Object(react.useMemo)((function(){var _props$disabled;return!(null===(_props$disabled=props.disabled)||void 0===_props$disabled||!_props$disabled)||null!=options.isDisabled&&options.isDisabled(props.editorState)}),[props.editorState,props.disabled]),handleToggle=Object(react.useCallback)((function(value){options.handleChange(props.editor,value)}),[props.editor]),isActive=Object(react.useMemo)((function(){return!isFalsy(value)}),[value]);return Object(jsx_runtime.jsx)(tooltip.a,{getPopupContainer:props.getPopupContainer,placement:props.tooltipPlacement,title:props.title,children:Object(jsx_runtime.jsx)("span",{onMouseDown:function onMouseDown(e){return e.preventDefault()},children:Object(jsx_runtime.jsx)(color_picker,{getPopupContainer:props.getPopupContainer,active:isActive,disabled:disabled,clearBtnValue:"normal",colors:options.colors,icon:options.icon,value:value,onChange:handleToggle})})})}};try{createcolorpicker.displayName="createcolorpicker",createcolorpicker.__docgenInfo={description:"",displayName:"createcolorpicker",props:{icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},getValue:{defaultValue:null,description:"",name:"getValue",required:!0,type:{name:"(editorState: EditorState) => string | undefined"}},handleChange:{defaultValue:null,description:"",name:"handleChange",required:!0,type:{name:"(editor: EditorInstance, value: string) => void"}},colors:{defaultValue:null,description:"",name:"colors",required:!0,type:{name:"string[]"}},isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!1,type:{name:"((editorState: EditorState) => boolean)"}},defaultText:{defaultValue:null,description:"",name:"defaultText",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/directives/create-color-picker.tsx#createcolorpicker"]={docgenInfo:createcolorpicker.__docgenInfo,name:"createcolorpicker",path:"src/directives/create-color-picker.tsx#createcolorpicker"})}catch(__react_docgen_typescript_loader_error){}var FontColorsOutlined=__webpack_require__("./node_modules/@ant-design/icons/es/icons/FontColorsOutlined.js");function parseColor(color){var arr=[];return color.replace(/[\d+.]+/g,(function(v){return arr.push(parseFloat(v)),""})),{hex:"#"+arr.slice(0,3).map(toHex).join(""),opacity:4===arr.length?arr[3]:1}}function toHex(_int){var hex=_int.toString(16);return 1===hex.length?"0"+hex:hex}var colors=["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],text_color_styleKeys=[],text_color_styleMap=colors.reduce((function(acc,cur){var key="TEXTCOLOR-"+cur.toUpperCase();return text_color_styleKeys.push(key),acc[key]={color:cur},acc}),{}),TextColorControl=create_color_picker({icon:Object(jsx_runtime.jsx)(FontColorsOutlined.a,{}),getValue:function getValue(editorState){var _getSelectionCustomIn;return null===(_getSelectionCustomIn=getSelectionCustomInlineStyle(editorState,["TEXTCOLOR"]).TEXTCOLOR)||void 0===_getSelectionCustomIn?void 0:_getSelectionCustomIn.toUpperCase()},handleChange:function handleChange(editor,value){editor.setEditorState((function(editorState){if("normal"===value){var currentStyle=editorState.getCurrentInlineStyle(),newEditorState=editorState;return currentStyle.forEach((function(value){isUndefined(value)||value.startsWith("TEXTCOLOR")&&(newEditorState=Draft.RichUtils.toggleInlineStyle(editorState,value))})),newEditorState}return toggleCustomInlineStyle(editorState,text_color_styleKeys,"TEXTCOLOR-"+value.toUpperCase())}))},colors:[].concat(colors)}),text_color=new StylInlineDirective({name:"TEXTCOLOR",tooltip:"文字颜色",control:TextColorControl,styleKeys:text_color_styleKeys,styleMap:text_color_styleMap,getImplKey:function getImplKey(style){var color=style.color;return isFalsy(color)?null:"TEXTCOLOR-"+(color=color.startsWith("#")?color.toUpperCase():parseColor(color).hex.toUpperCase())}}),BgColorsOutlined=__webpack_require__("./node_modules/@ant-design/icons/es/icons/BgColorsOutlined.js");function text_bg_color_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var text_bg_color_styleKeys=[],text_bg_color_styleMap=colors.reduce((function(acc,cur){var key="TEXTBGCOLOR-"+cur.toUpperCase();return text_bg_color_styleKeys.push(key),acc[key]={backgroundColor:cur},acc}),{}),TextBgColorControl=create_color_picker({icon:Object(jsx_runtime.jsx)(BgColorsOutlined.a,{}),getValue:function getValue(editorState){var _getSelectionCustomIn;return null===(_getSelectionCustomIn=getSelectionCustomInlineStyle(editorState,["TEXTBGCOLOR"]).TEXTBGCOLOR)||void 0===_getSelectionCustomIn?void 0:_getSelectionCustomIn.toUpperCase()},handleChange:function handleChange(editor,value){editor.setEditorState((function(editorState){if("normal"===value){var currentStyle=editorState.getCurrentInlineStyle(),newEditorState=editorState;return currentStyle.forEach((function(value){isUndefined(value)||value.startsWith("TEXTBGCOLOR")&&(newEditorState=Draft.RichUtils.toggleInlineStyle(editorState,value))})),newEditorState}return toggleCustomInlineStyle(editorState,text_bg_color_styleKeys,"TEXTBGCOLOR-"+value.toUpperCase())}))},colors:function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return text_bg_color_arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function text_bg_color_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return text_bg_color_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return text_bg_color_arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(colors)}),text_bg_color=new StylInlineDirective({name:"TEXTBGCOLOR",tooltip:"文字背景色",control:TextBgColorControl,styleKeys:text_bg_color_styleKeys,styleMap:text_bg_color_styleMap,getImplKey:function getImplKey(style){var color=style.backgroundColor;return isFalsy(color)?null:"TEXTBGCOLOR-"+(color=color.startsWith("#")?color.toUpperCase():parseColor(color).hex.toUpperCase())}}),FullscreenOutlined=(__webpack_require__("./node_modules/core-js/modules/web.timers.js"),__webpack_require__("./node_modules/@ant-design/icons/es/icons/FullscreenOutlined.js")),FullscreenControl=create_button({icon:Object(jsx_runtime.jsx)(FullscreenOutlined.a,{}),isActive:function isActive(_){return!1},handleClick:function handleClick(editor){editor.setFullscreen((function(fullscreen){return fullscreen?setTimeout((function(){window.scrollTo({top:editor.windowScrollTop.current,behavior:"auto"})}),0):(editor.windowScrollTop.current=window.pageYOffset,window.scrollTo({top:0,behavior:"auto"})),!fullscreen}))}}),directives_fullscreen=new directive_Directive({name:"FULLSCREEN",tooltip:"全屏/退出全屏",control:FullscreenControl,shortcut:"ctrl+shift+f",command:"directive-FULLSCREEN",handleCommand:function handleCommand(editor){return FullscreenControl.handleCommand(editor),!0}}),SaveOutlined=__webpack_require__("./node_modules/@ant-design/icons/es/icons/SaveOutlined.js"),save=new directive_Directive({name:"SAVE",tooltip:"保存",control:create_button({icon:Object(jsx_runtime.jsx)(SaveOutlined.a,{}),isActive:function isActive(_){return!1},handleClick:function handleClick(editor){var _editor$onSave;null===(_editor$onSave=editor.onSave)||void 0===_editor$onSave||_editor$onSave.call(editor)}})}),group_useStyles=Object(react_jss_esm.a)((function(theme){return{content:{marginRight:-theme.marginMd,marginBottom:-theme.marginSm,"& > *":{marginRight:theme.marginMd,marginBottom:theme.marginSm,verticalAlign:"top"}}}}),{name:"GroupCtrl"}),group_GroupCtrl=function GroupCtrl(props){var classes=group_useStyles();return isUndefined(props.asMenuItem)?Object(jsx_runtime.jsx)(tooltip.a,{getPopupContainer:props.getPopupContainer,placement:props.tooltipPlacement,title:props.title,children:Object(jsx_runtime.jsx)(popover.a,{placement:"bottom",trigger:"click",getPopupContainer:props.getPopupContainer,content:Object(jsx_runtime.jsx)("div",{className:classes.content,children:props.children}),children:Object(jsx_runtime.jsx)(es_button.a,{icon:Object(jsx_runtime.jsx)(BlockOutlined.a,{}),onMouseDown:function onMouseDown(e){return e.preventDefault()}})})}):Object(jsx_runtime.jsx)(menu.a.SubMenu,Object.assign({},props,{icon:Object(jsx_runtime.jsx)(BlockOutlined.a,{}),title:props.title,children:Object(jsx_runtime.jsx)(menu.a,{selectedKeys:[],getPopupContainer:props.getPopupContainer,children:props.children})}))};group_GroupCtrl.displayName="GroupCtrl";var decorators_link_FormItemKey,group=new directive_Directive({name:"GROUP",tooltip:"块",control:group_GroupCtrl},DirectiveType.CONTAINER),ClearOutlined=__webpack_require__("./node_modules/@ant-design/icons/es/icons/ClearOutlined.js"),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),clear_removeInlineStyles=function removeInlineStyles(data){return{contentState:data.editor.registedDires.reduce((function(acc,cur){return isStylDirective(cur)&&(acc=acc.concat(cur.styleKeys)),isInlineDirective(cur)&&cur.inlineKind===InlineDirectiveKind.DEFAULT&&acc.push(cur.name),acc}),[]).reduce((function(newContentState,cur){return Draft.Modifier.removeInlineStyle(newContentState,data.selection,cur)}),data.contentState),selection:data.selection,editor:data.editor}},clear_removeEntities=function removeEntities(data){return{contentState:Draft.Modifier.applyEntity(data.contentState,data.selection,null),selection:data.selection,editor:data.editor}},clear_removeBlockTypes=function removeBlockTypes(data){var blocksMap=getSelectedBlocksMapOfContentState(data.contentState,data.selection),dataKeys=data.editor.registedDires.reduce((function(acc,cur){return isClasDirective(cur)&&acc.push(cur.name),acc}),[]),contentWithoutBlocks=blocksMap.toArray().reduce((function(newContentState,block){var blockType=block.getType(),selectionState=Draft.SelectionState.createEmpty(block.getKey()),updatedSelection=selectionState.merge({focusOffset:0,anchorOffset:block.getText().length});blockType!==BLOCK_TYPE_UNSTYLED&&(newContentState=Draft.Modifier.setBlockType(newContentState,updatedSelection,BLOCK_TYPE_UNSTYLED));var data=block.getData();return newContentState=dataKeys.reduce((function(newContentState,key){return data=data.remove(key),Draft.Modifier.setBlockData(newContentState,selectionState,data)}),newContentState)}),data.contentState);return{contentState:contentWithoutBlocks,selection:data.selection,editor:data.editor}},clear=new directive_Directive({name:"CLEAR",tooltip:"清除样式",control:create_button({icon:Object(jsx_runtime.jsx)(ClearOutlined.a,{}),isActive:function isActive(_){return!1},handleClick:function handleClick(editor){editor.setEditorState((function(editorState){var contentState=editorState.getCurrentContent(),selection=editorState.getSelection(),data=Object(lodash.flow)([clear_removeInlineStyles,clear_removeEntities,clear_removeBlockTypes])({contentState:contentState,selection:selection,editor:editor});return Draft.EditorState.push(editorState,data.contentState,"clear-all-style")}))}})}),EditOutlined=__webpack_require__("./node_modules/@ant-design/icons/es/icons/EditOutlined.js"),Modal=__webpack_require__("./node_modules/antd/lib/modal/Modal.js"),Modal_default=__webpack_require__.n(Modal);function decorators_link_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function decorators_link_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){decorators_link_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){decorators_link_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function decorators_link_slicedToArray(arr,i){return function decorators_link_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function decorators_link_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function decorators_link_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return decorators_link_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return decorators_link_arrayLikeToArray(o,minLen)}(arr,i)||function decorators_link_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function decorators_link_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}!function(FormItemKey){FormItemKey.URL="url",FormItemKey.TEXT="text"}(decorators_link_FormItemKey||(decorators_link_FormItemKey={}));var link_useStyles=Object(react_jss_esm.a)((function(theme){return{formItem:{width:400,marginBottom:theme.marginSm,"&:last-child":{marginBottom:0}},infoIcon:{marginRight:theme.marginXss,verticalAlign:"text-top"},tips:{color:"grey",marginBottom:theme.marginSm,fontSize:12}}}),{name:"Link"}),link_layout={labelCol:{span:4},wrapperCol:{span:20}},link_tailLayout={wrapperCol:{offset:4,span:20}};var link_Link=function Link(props){var classes=link_useStyles(),url=props.contentState.getEntity(props.entityKey).getData().url,form=decorators_link_slicedToArray(es_form.a.useForm(),1)[0],onChange=props.onChange,onReadOnly=props.onReadOnly,_useState2=decorators_link_slicedToArray(Object(react.useState)(!1),2),editModalVisible=_useState2[0],setEditModalVisible=_useState2[1],showEditModal=Object(react.useCallback)((function(){onReadOnly(!0),setEditModalVisible(!0)}),[onReadOnly]),hideEditModal=Object(react.useCallback)((function(){onReadOnly(!1),setEditModalVisible(!1)}),[onReadOnly]);Object(react.useEffect)((function(){form.setFieldsValue({url:url,text:props.decoratedText})}),[url,props.decoratedText,form]);var handleComfirm=Object(react.useCallback)(decorators_link_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var values,newUrl,newText;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,form.validateFields();case 2:values=_context.sent,newUrl=values[decorators_link_FormItemKey.URL],newText=values[decorators_link_FormItemKey.TEXT],onChange((function(editorState){if(newUrl===url&&newText===props.decoratedText)return editorState;var newEditorState=editorState,newContentState=props.contentState,entityKey=props.entityKey;newText!==props.decoratedText&&newContentState.getBlockForKey(props.blockKey).findEntityRanges((function(character){return character.getEntity()===props.entityKey}),(function(start,end){var selection=new Draft.SelectionState({anchorKey:props.blockKey,focusKey:props.blockKey,anchorOffset:start,focusOffset:end});newContentState=Draft.Modifier.replaceText(newContentState,selection,newText,newEditorState.getCurrentInlineStyle(),entityKey),newEditorState=Draft.EditorState.push(newEditorState,newContentState,"apply-entity")}));newUrl!==url&&newContentState.getBlockForKey(props.blockKey).findEntityRanges((function(character){return character.getEntity()===props.entityKey}),(function(start,end){var selection=new Draft.SelectionState({anchorKey:props.blockKey,focusKey:props.blockKey,anchorOffset:start,focusOffset:end});newContentState=newContentState.createEntity(ENTITY_TYPE_LINK,"MUTABLE",{url:newUrl}),entityKey=newContentState.getLastCreatedEntityKey(),newEditorState=Draft.RichUtils.toggleLink(newEditorState,selection,entityKey)}));return newEditorState})),hideEditModal();case 7:case"end":return _context.stop()}}),_callee)}))),[form,onChange,hideEditModal,props.contentState,props.entityKey,props.blockKey,props.decoratedText,url]),handleRemoveLink=Object(react.useCallback)((function(){onChange((function(editorState){var selection=Draft.SelectionState.createEmpty(props.blockKey);if(!isFalsy(props.contentState.getEntity(props.entityKey))){var entityRange=function getEntityRange(editorState,entityKey,blockKey){var block=getSelectedBlock(editorState);isUndefined(blockKey)||(block=editorState.getCurrentContent().getBlockForKey(blockKey));var entityRange={start:0,end:0,text:""};return null!=block&&block.findEntityRanges((function(value){return value.getEntity()===entityKey}),(function(start,end){var _block$getText$slice,_block;entityRange={start:start,end:end,text:null!==(_block$getText$slice=null===(_block=block)||void 0===_block?void 0:_block.getText().slice(start,end))&&void 0!==_block$getText$slice?_block$getText$slice:""}})),entityRange}(editorState,props.entityKey,props.blockKey),isBackward=selection.getIsBackward();return selection=isBackward?selection.merge({anchorOffset:entityRange.end,focusOffset:entityRange.start}):selection.merge({anchorOffset:entityRange.start,focusOffset:entityRange.end}),Draft.RichUtils.toggleLink(editorState,selection,null)}return editorState})),hideEditModal()}),[onChange,hideEditModal,props.entityKey,props.blockKey,props.contentState]),handleOpen=Object(react.useCallback)((function(){window.open(url)}),[url]),popoverContent=Object(react.useMemo)((function(){return Object(jsx_runtime.jsxs)("div",{contentEditable:!1,style:{display:"flex",alignItems:"center",gap:10},children:[Object(jsx_runtime.jsx)("div",{title:url,style:{maxWidth:200,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:url}),Object(jsx_runtime.jsx)(es_button.a,{size:"small",icon:Object(jsx_runtime.jsx)(LinkOutlined.a,{}),onClick:handleOpen,children:"打开"}),Object(jsx_runtime.jsx)(es_button.a,{size:"small",type:"primary",icon:Object(jsx_runtime.jsx)(EditOutlined.a,{}),onClick:function onClick(){return showEditModal()},children:"编辑"})]})}),[showEditModal,url,handleOpen]),handleClick=Object(react.useCallback)((function(e){e.preventDefault()}),[]);return Object(jsx_runtime.jsxs)("span",{children:[Object(jsx_runtime.jsx)(popover.a,{getPopupContainer:props.getPopupContainer,trigger:"hover",content:popoverContent,children:Object(jsx_runtime.jsx)("a",{className:"r-link",rel:"noreferrer",href:url,onClick:handleClick,onTouchStartCapture:function onTouchStartCapture(e){e.preventDefault(),e.stopPropagation()},onTouchStart:function onTouchStart(e){e.preventDefault(),e.stopPropagation()},children:props.children})}),Object(jsx_runtime.jsx)(Modal_default.a,{title:"编辑链接",visible:editModalVisible,getContainer:function getContainer(){return document.body},onCancel:function onCancel(){return hideEditModal()},onOk:handleComfirm,okText:"确定",cancelText:"取消",children:Object(jsx_runtime.jsxs)(es_form.a,{form:form,children:[Object(jsx_runtime.jsx)(es_form.a.Item,Object.assign({className:classes.formItem},link_layout,{label:"文本",name:decorators_link_FormItemKey.TEXT,rules:[{required:!0,message:"请输入文本"}],children:Object(jsx_runtime.jsx)(input.a,{})})),Object(jsx_runtime.jsx)(es_form.a.Item,Object.assign({className:classes.formItem},link_layout,{label:"URL",name:decorators_link_FormItemKey.URL,rules:[{required:!0,message:"请输入 URL"}],children:Object(jsx_runtime.jsx)(input.a,{allowClear:!0})})),Object(jsx_runtime.jsx)(es_form.a.Item,{noStyle:!0,shouldUpdate:function shouldUpdate(prevValues,currentValues){return prevValues[decorators_link_FormItemKey.URL]!==currentValues[decorators_link_FormItemKey.URL]},children:function children(_ref2){return isFalsy((0,_ref2.getFieldValue)(decorators_link_FormItemKey.URL))?Object(jsx_runtime.jsx)(es_form.a.Item,Object.assign({className:classes.formItem},link_tailLayout,{children:Object(jsx_runtime.jsx)(es_button.a,{type:"primary",danger:!0,onClick:handleRemoveLink,children:"移除"})})):Object(jsx_runtime.jsx)(es_form.a.Item,Object.assign({className:classes.formItem},link_tailLayout,{children:Object(jsx_runtime.jsxs)("div",{className:classes.tips,children:[Object(jsx_runtime.jsx)(InfoCircleOutlined.a,{className:classes.infoIcon}),"删除 URL 内容后，可以移除链接"]})}))}})]})})]})};link_Link.displayName="Link";var decorators_link={strategy:function findLinkEntities(contentBlock,callback,contentState){contentBlock.findEntityRanges((function(character){var entityKey=character.getEntity();return null!==entityKey&&contentState.getEntity(entityKey).getType()===ENTITY_TYPE_LINK}),callback)},component:link_Link};try{link_Link.displayName="Link",link_Link.__docgenInfo={description:"",displayName:"Link",props:{contentState:{defaultValue:null,description:"",name:"contentState",required:!0,type:{name:"ContentState"}},entityKey:{defaultValue:null,description:"",name:"entityKey",required:!0,type:{name:"string"}},blockKey:{defaultValue:null,description:"",name:"blockKey",required:!0,type:{name:"string"}},start:{defaultValue:null,description:"",name:"start",required:!0,type:{name:"number"}},end:{defaultValue:null,description:"",name:"end",required:!0,type:{name:"number"}},decoratedText:{defaultValue:null,description:"",name:"decoratedText",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(fn: (editorState: EditorState) => EditorState) => void"}},onReadOnly:{defaultValue:null,description:"",name:"onReadOnly",required:!0,type:{name:"(readOnly: boolean) => void"}},getPopupContainer:{defaultValue:null,description:"",name:"getPopupContainer",required:!0,type:{name:"(triggerNode: HTMLElement) => HTMLElement"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/decorators/link.tsx#Link"]={docgenInfo:link_Link.__docgenInfo,name:"Link",path:"src/decorators/link.tsx#Link"})}catch(__react_docgen_typescript_loader_error){}try{DraftDecorator.displayName="DraftDecorator",DraftDecorator.__docgenInfo={description:'A DraftDecorator is a strategy-component pair intended for use when\nrendering content.\n\n  - A "strategy": A function that accepts a ContentBlock object and\n    continuously executes a callback with start/end values corresponding to\n    relevant matches in the document text. For example, getHashtagMatches\n    uses a hashtag regex to find hashtag strings in the block, and\n    for each hashtag match, executes the callback with start/end pairs.\n\n  - A "component": A React component that will be used to render the\n    "decorated" section of text.\n\n  - "props": Props to be passed into the React component that will be used.',displayName:"DraftDecorator",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/decorators/link.tsx#DraftDecorator"]={docgenInfo:DraftDecorator.__docgenInfo,name:"DraftDecorator",path:"src/decorators/link.tsx#DraftDecorator"})}catch(__react_docgen_typescript_loader_error){}function decorators_image_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function decorators_image_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){decorators_image_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){decorators_image_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function decorators_image_slicedToArray(arr,i){return function decorators_image_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function decorators_image_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function decorators_image_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return decorators_image_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return decorators_image_arrayLikeToArray(o,minLen)}(arr,i)||function decorators_image_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function decorators_image_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var image_useStyles=Object(react_jss_esm.a)((function(theme){return{formItem:{width:400,marginBottom:theme.marginSm,"&:last-child":{marginBottom:0}}}}),{name:"Image"}),decorators_image_layout={labelCol:{span:5},wrapperCol:{span:19}};var image_Image=function Image(props){var classes=image_useStyles(),data=props.contentState.getEntity(props.entityKey).getData(),src=data[image_inline_FormItemKey.SRC],displayWidth=data[image_inline_FormItemKey.DISPLAY_WIDTH],displayHeight=data[image_inline_FormItemKey.DISPLAY_HEIGHT],_float=data[image_inline_FormItemKey.FLOAT],margin=data[image_inline_FormItemKey.MARGIN],form=decorators_image_slicedToArray(es_form.a.useForm(),1)[0],onChange=props.onChange,onReadOnly=props.onReadOnly,_useState2=decorators_image_slicedToArray(Object(react.useState)(!1),2),editModalVisible=_useState2[0],setEditModalVisible=_useState2[1],showEditModal=Object(react.useCallback)((function(){onReadOnly(!0),setEditModalVisible(!0)}),[onReadOnly]),hideEditModal=Object(react.useCallback)((function(){onReadOnly(!1),setEditModalVisible(!1)}),[onReadOnly]);Object(react.useEffect)((function(){form.setFieldsValue({src:src,displayWidth:displayWidth,displayHeight:displayHeight,float:_float,margin:margin})}),[src,form,displayHeight,displayWidth,_float,margin]);var handleComfirm=Object(react.useCallback)(decorators_image_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var values,src,displayWidth,displayHeight,_float2,margin;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,form.validateFields();case 2:values=_context.sent,src=values[image_inline_FormItemKey.SRC],displayWidth=values[image_inline_FormItemKey.DISPLAY_WIDTH],displayHeight=values[image_inline_FormItemKey.DISPLAY_HEIGHT],_float2=values[image_inline_FormItemKey.FLOAT],margin=values[image_inline_FormItemKey.MARGIN],onChange((function(editorState){var newEditorState=editorState,newContentState=props.contentState,entityKey=props.entityKey;return newContentState.getBlockForKey(props.blockKey).findEntityRanges((function(character){return character.getEntity()===props.entityKey}),(function(start,end){var _newContentState$crea,selection=new Draft.SelectionState({anchorKey:props.blockKey,focusKey:props.blockKey,anchorOffset:start,focusOffset:end});newContentState=newContentState.createEntity(ENTITY_TYPE_IMAGE,"IMMUTABLE",((_newContentState$crea={})[image_inline_FormItemKey.SRC]=src,_newContentState$crea[image_inline_FormItemKey.DISPLAY_WIDTH]=displayWidth,_newContentState$crea[image_inline_FormItemKey.DISPLAY_HEIGHT]=displayHeight,_newContentState$crea[image_inline_FormItemKey.FLOAT]=_float2,_newContentState$crea[image_inline_FormItemKey.MARGIN]=margin,_newContentState$crea)),entityKey=newContentState.getLastCreatedEntityKey(),newEditorState=Draft.RichUtils.toggleLink(newEditorState,selection,entityKey)})),newEditorState})),hideEditModal();case 10:case"end":return _context.stop()}}),_callee)}))),[form,onChange,props.contentState,props.entityKey,props.blockKey,hideEditModal]),popoverContent=Object(react.useMemo)((function(){return Object(jsx_runtime.jsxs)("div",{contentEditable:!1,style:{display:"flex",alignItems:"center",gap:10},children:[Object(jsx_runtime.jsx)("div",{title:src,style:{maxWidth:200,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:src}),Object(jsx_runtime.jsx)(es_button.a,{size:"small",type:"primary",icon:Object(jsx_runtime.jsx)(EditOutlined.a,{}),onClick:function onClick(){return showEditModal()},children:"编辑"})]})}),[showEditModal,src]);return Object(jsx_runtime.jsxs)("span",{children:[Object(jsx_runtime.jsx)(popover.a,{getPopupContainer:props.getPopupContainer,trigger:"hover",content:popoverContent,children:Object(jsx_runtime.jsx)("img",{className:"r-img-inline",src:src,style:{width:displayWidth,height:displayHeight,float:_float,margin:margin},alt:"图片"})}),Object(jsx_runtime.jsx)(Modal_default.a,{title:"编辑图片",visible:editModalVisible,getContainer:function getContainer(){return document.body},onCancel:function onCancel(){return hideEditModal()},onOk:handleComfirm,okText:"确定",cancelText:"取消",children:Object(jsx_runtime.jsx)(es_form.a,{form:form,onFinish:handleComfirm,children:image_inline_renderFormItems(classes.formItem,decorators_image_layout)})})]})};image_Image.displayName="Image";var decorators_image={strategy:function findImageEntities(contentBlock,callback,contentState){contentBlock.findEntityRanges((function(character){var entityKey=character.getEntity();return null!==entityKey&&contentState.getEntity(entityKey).getType()===ENTITY_TYPE_IMAGE}),callback)},component:image_Image};try{image_Image.displayName="Image",image_Image.__docgenInfo={description:"",displayName:"Image",props:{contentState:{defaultValue:null,description:"",name:"contentState",required:!0,type:{name:"ContentState"}},entityKey:{defaultValue:null,description:"",name:"entityKey",required:!0,type:{name:"string"}},blockKey:{defaultValue:null,description:"",name:"blockKey",required:!0,type:{name:"string"}},start:{defaultValue:null,description:"",name:"start",required:!0,type:{name:"number"}},end:{defaultValue:null,description:"",name:"end",required:!0,type:{name:"number"}},decoratedText:{defaultValue:null,description:"",name:"decoratedText",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(fn: (editorState: EditorState) => EditorState) => void"}},onReadOnly:{defaultValue:null,description:"",name:"onReadOnly",required:!0,type:{name:"(readOnly: boolean) => void"}},getPopupContainer:{defaultValue:null,description:"",name:"getPopupContainer",required:!0,type:{name:"(triggerNode: HTMLElement) => HTMLElement"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/decorators/image.tsx#Image"]={docgenInfo:image_Image.__docgenInfo,name:"Image",path:"src/decorators/image.tsx#Image"})}catch(__react_docgen_typescript_loader_error){}try{DraftDecorator.displayName="DraftDecorator",DraftDecorator.__docgenInfo={description:'A DraftDecorator is a strategy-component pair intended for use when\nrendering content.\n\n  - A "strategy": A function that accepts a ContentBlock object and\n    continuously executes a callback with start/end values corresponding to\n    relevant matches in the document text. For example, getHashtagMatches\n    uses a hashtag regex to find hashtag strings in the block, and\n    for each hashtag match, executes the callback with start/end pairs.\n\n  - A "component": A React component that will be used to render the\n    "decorated" section of text.\n\n  - "props": Props to be passed into the React component that will be used.',displayName:"DraftDecorator",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/decorators/image.tsx#DraftDecorator"]={docgenInfo:DraftDecorator.__docgenInfo,name:"DraftDecorator",path:"src/decorators/image.tsx#DraftDecorator"})}catch(__react_docgen_typescript_loader_error){}var use_decorators=function useDecorators(decorators,decoratorProps){var inited=Object(react.useRef)(!1),registedDecorators=Object(react.useRef)([]),registedCompDecorators=Object(react.useRef)([]);return inited.current||(decorators.forEach((function(d){if("function"==typeof d){var Class=d;registedCompDecorators.current.push(new Class(decoratorProps))}else registedDecorators.current.push(Object.assign({},d,{props:decoratorProps}))})),inited.current=!0),[registedDecorators.current,registedCompDecorators.current]};function editor_controls_slicedToArray(arr,i){return function editor_controls_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function editor_controls_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function editor_controls_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return editor_controls_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return editor_controls_arrayLikeToArray(o,minLen)}(arr,i)||function editor_controls_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function editor_controls_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var useEditorStyles=Object(react_jss_esm.a)((function(theme){return{fullscreen:{},controls:{padding:theme.paddingMd+"px 0 0 "+theme.paddingMd+"px",borderBottom:"1px solid #ddd",background:"#fff","&:not($fullscreen)":{position:"sticky",top:function top(options){var _options$stickyOffset;return null!==(_options$stickyOffset=options.stickyOffsetTop)&&void 0!==_options$stickyOffset?_options$stickyOffset:0},zIndex:theme.zindexBackTop-3},"& > *":{display:"inline-block",verticalAlign:"middle !important",marginRight:theme.marginMd,marginBottom:theme.marginMd}},constrolsUnbordered:{"& button, & .ant-select-selector":{border:"none !important",boxShadow:"none !important"}}}}),{name:"EditorControls"}),editor_controls_EditorControls=function EditorControls(props){var _props$borderedContro,_props$className,_cls,_props$controlBarButt,classes=useEditorStyles({stickyOffsetTop:props.stickyOffsetTop}),controlsContainer=Object(react.useRef)(null),getPopupContainer=function getPopupContainer(_){return document.body};return Object(jsx_runtime.jsx)("div",{ref:controlsContainer,className:classnames_default()(classes.controls,(_cls={},_cls[classes.constrolsUnbordered]=!(null===(_props$borderedContro=props.borderedControls)||void 0===_props$borderedContro||_props$borderedContro),_cls[classes.fullscreen]=props.fullscreen,_cls[null!==(_props$className=props.className)&&void 0!==_props$className?_props$className:""]=!props.fullscreen&&props.className,_cls)),children:null===(_props$controlBarButt=props.controlBarButtons)||void 0===_props$controlBarButt?void 0:_props$controlBarButt.map((function(name){var children=[],_name$split2=editor_controls_slicedToArray(name.split(">"),2),n=_name$split2[0],rest=_name$split2[1];isFalsy(rest)||(children=rest.split(","));var dire=props.direMap[n];return isUndefined(dire)?null:Object(jsx_runtime.jsx)(dire.control,{title:dire.tooltip,disabled:props.disabled,editorState:props.editorState,editor:props.editor,tooltipPlacement:props.fullscreen?"bottom":"top",getPopupContainer:getPopupContainer,children:children.map((function(childName){var child=props.direMap[childName];return isUndefined(child)?null:Object(jsx_runtime.jsx)(child.control,{title:child.tooltip,disabled:props.disabled,editorState:props.editorState,editor:props.editor,tooltipPlacement:props.fullscreen?"bottom":"top",getPopupContainer:getPopupContainer},child.name)}))},dire.name)}))})};editor_controls_EditorControls.displayName="EditorControls",editor_controls_EditorControls.displayName="EditorControls";var editor_controls=editor_controls_EditorControls;try{editor_controls_EditorControls.displayName="EditorControls",editor_controls_EditorControls.__docgenInfo={description:"",displayName:"EditorControls",props:{stickyOffsetTop:{defaultValue:null,description:"",name:"stickyOffsetTop",required:!1,type:{name:"string | number"}},editorState:{defaultValue:null,description:"",name:"editorState",required:!0,type:{name:"EditorState"}},fullscreen:{defaultValue:null,description:"",name:"fullscreen",required:!0,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},direMap:{defaultValue:null,description:"",name:"direMap",required:!0,type:{name:"Record<string, Directive | undefined>"}},editor:{defaultValue:null,description:"",name:"editor",required:!0,type:{name:"EditorInstance"}},controlBarButtons:{defaultValue:null,description:"",name:"controlBarButtons",required:!0,type:{name:"string[]"}},borderedControls:{defaultValue:null,description:"",name:"borderedControls",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/editor-controls.tsx#EditorControls"]={docgenInfo:editor_controls_EditorControls.__docgenInfo,name:"EditorControls",path:"src/editor-controls.tsx#EditorControls"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("./node_modules/core-js/modules/es.array.every.js");var esm_main=__webpack_require__("./node_modules/draft-js-import-html/esm/main.js");function import_html_options_toConsumableArray(arr){return function import_html_options_arrayWithoutHoles(arr){if(Array.isArray(arr))return import_html_options_arrayLikeToArray(arr)}(arr)||function import_html_options_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function import_html_options_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return import_html_options_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return import_html_options_arrayLikeToArray(o,minLen)}(arr)||function import_html_options_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function import_html_options_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _customBlockFn(element,registedDires){var data=function getBlockData(classList,registedDires){return registedDires.reduce((function(result,cur){return isClasDirective(cur)&&(result=Object.assign({},result,cur.getBlockData(classList))),result}),{})}([].slice.call(element.classList),registedDires),dire=function getCompDire(classNames,registedDires){return registedDires.find((function(u){return!!isCompDirective(u)&&classNames.some((function(className){return!isUndefined(u.className)&&className.startsWith(u.className)}))}))}([].slice.call(element.classList),registedDires);if(null!=dire){try{var result=dire.parse(element);return Object.assign({},result,{data:Object.assign({},data,null==result?void 0:result.data)})}catch(err){console.log(err)}return{type:dire.name.startsWith("atomic_")?dire.name:void 0,data:data}}for(var children=element.children,i=0;i<children.length;i++){var _child$classList,child=children.item(i);if(child instanceof HTMLDivElement)(_child$classList=child.classList).add.apply(_child$classList,import_html_options_toConsumableArray(element.classList))}return{data:data}}function import_html_options_getOptions(_,registedDires){return{customInlineFn:function customInlineFn(element,inlineCreators){return function getInlineStyles(element,inlineCreators,registedDires){if(element instanceof HTMLElement){if("STYLE"===element.tagName)return void(element.innerText="");for(var keys=[],style=element.style,i=0;i<registedDires.length;i++){var dire=registedDires[i];if(isInlineDirective(dire)){var _dire$getImplEntity,entity=null===(_dire$getImplEntity=dire.getImplEntity)||void 0===_dire$getImplEntity?void 0:_dire$getImplEntity.call(dire,element,inlineCreators);if(!isFalsy(entity))return entity}if(isStylDirective(dire)){var key=dire.getImplKey(style);isNull(key)||keys.push(key)}}var innerText=element.innerText;return element.innerText=innerText,inlineCreators.Style(keys)}}(element,inlineCreators,registedDires)},customBlockFn:function customBlockFn(element){if(element instanceof HTMLElement&&"BODY"!==element.tagName)return _customBlockFn(element,registedDires)}}}var PlusOutlined=__webpack_require__("./node_modules/@ant-design/icons/es/icons/PlusOutlined.js"),RetweetOutlined=__webpack_require__("./node_modules/@ant-design/icons/es/icons/RetweetOutlined.js"),SettingOutlined=__webpack_require__("./node_modules/@ant-design/icons/es/icons/SettingOutlined.js"),HolderOutlined=__webpack_require__("./node_modules/@ant-design/icons/es/icons/HolderOutlined.js"),useDebounceFn=__webpack_require__("./node_modules/ahooks/es/useDebounceFn/index.js");function block_menu_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function block_menu_slicedToArray(arr,i){return function block_menu_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function block_menu_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function block_menu_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return block_menu_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return block_menu_arrayLikeToArray(o,minLen)}(arr,i)||function block_menu_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function block_menu_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var block_menu_useStyles=Object(react_jss_esm.a)((function(theme){return{blockMenu:{position:"absolute",display:"flex",alignItems:"center",transform:"translateX(-100%)",transition:"all 200ms",paddingRight:4,zIndex:6},btn:{color:theme.textColorSecondary,"&:focus, &:hover":{backgroundColor:"#f5f5f5"}},blockDireWrap:{display:"flex",gap:theme.paddingSm,width:380,flexWrap:"wrap"},popover:{"& .ant-popover-inner-content":{padding:0}},menuContent:{"& > div":{padding:"10px "+theme.marginSm+"px",whiteSpace:"nowrap","&:not(:last-child)":{borderBottom:"solid 1px #efefef"},"&$menuItem:hover":{backgroundColor:theme.primaryColor,color:"#fff"}}},menuItem:{cursor:"pointer"}}}),{name:"BlockMenu"}),block_menu_BlockMenu=Object(react.forwardRef)((function(props,ref){var _menuData$key$split$,_block$getType,classes=block_menu_useStyles(),_useState2=block_menu_slicedToArray(Object(react.useState)(null),2),menuData=_useState2[0],setMenuData=_useState2[1],blockMenuContent=Object(react.useRef)(null),container=Object(react.useRef)(null),_useState4=block_menu_slicedToArray(Object(react.useState)(!1),2),menuContentVisible=_useState4[0],setMenuContentVisible=_useState4[1],_useState6=block_menu_slicedToArray(Object(react.useState)(!1),2),additionMenuVisible=_useState6[0],setAddtionMenuVisible=_useState6[1],_useState8=block_menu_slicedToArray(Object(react.useState)(!0),2),insertAfterMode=_useState8[0],setInsertAfterMode=_useState8[1],blockInstance=props.registedBlockInstanceMap.current[null!==(_menuData$key$split$=null==menuData?void 0:menuData.key.split("-")[0])&&void 0!==_menuData$key$split$?_menuData$key$split$:""],showAddtionMenu=function showAddtionMenu(){setAddtionMenuVisible(!0),setMenuContentVisible(!1)},hideAddtionMenu=function hideAddtionMenu(){setInsertAfterMode(!0),setAddtionMenuVisible(!1)},hideBlockMenu=function hideBlockMenu(){setMenuData(null),setMenuContentVisible(!1),hideAddtionMenu()},handleKeyDown=Object(react.useCallback)((function(e){additionMenuVisible||setInsertAfterMode((function(insertAfterMode){return(!e.ctrlKey||!insertAfterMode)&&insertAfterMode}))}),[additionMenuVisible]),handleKeyUp=Object(react.useCallback)((function(){additionMenuVisible||setInsertAfterMode((function(insertAfterMode){return insertAfterMode||!0}))}),[additionMenuVisible]);Object(react.useEffect)((function(){return document.addEventListener("keydown",handleKeyDown,!1),document.addEventListener("keyup",handleKeyUp,!1),function(){document.removeEventListener("keydown",handleKeyDown,!1),document.removeEventListener("keyup",handleKeyUp,!1)}}),[handleKeyDown,handleKeyUp]);var handleDocClick=Object(react.useCallback)((function(e){e.target instanceof HTMLElement&&(isNull(container.current)||isFalsy(blockMenuContent.current)||blockMenuContent.current.contains(e.target)||container.current.contains(e.target)||(setMenuContentVisible(!1),hideAddtionMenu()))}),[]);Object(react.useEffect)((function(){return document.addEventListener("click",handleDocClick,!1),function(){document.removeEventListener("click",handleDocClick,!1)}}),[handleDocClick]);var instance={handleMouseMovesOverBlock:function handleMouseMovesOverBlock(e){var _blockElem$dataset$of;if(isFalsy(props.disabled)&&!isNull(props.editorContainer.current)&&e.target instanceof HTMLElement&&!menuContentVisible&&!additionMenuVisible){var contentsElem=props.editorContainer.current.querySelector('[data-contents="true"]');if(isNull(contentsElem)||contentsElem.contains(e.target)||isNull(container.current)||container.current.contains(e.target)){for(var blockElem=e.target;!isNull(blockElem);){var _blockElem$parentElem,_blockElem;if("true"===blockElem.dataset.block)break;if(blockElem=null!==(_blockElem$parentElem=null===(_blockElem=blockElem)||void 0===_blockElem?void 0:_blockElem.parentElement)&&void 0!==_blockElem$parentElem?_blockElem$parentElem:null,!props.editorContainer.current.contains(blockElem)){blockElem=null;break}}if(!isNull(blockElem)){var styleMap=window.getComputedStyle(blockElem);setMenuData({key:null!==(_blockElem$dataset$of=blockElem.dataset.offsetKey)&&void 0!==_blockElem$dataset$of?_blockElem$dataset$of:"",x:blockElem.offsetLeft,y:blockElem.offsetTop,h:parseFloat(styleMap.lineHeight)})}}else hideBlockMenu()}},hide:hideBlockMenu};Object(react.useImperativeHandle)(ref,(function(){return instance}));var triggerCustomPaste=function(){var _ref=function block_menu_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){block_menu_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){block_menu_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(){var _menuData$key2,data,dt,blob,html,_blob,text,event,blockElem;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(null!=props.editorContainer.current){_context.next=2;break}return _context.abrupt("return");case 2:return data=[],_context.prev=3,_context.next=6,navigator.clipboard.read();case 6:data=_context.sent,_context.next=14;break;case 9:return _context.prev=9,_context.t0=_context.catch(3),message.b.error("粘贴失败，尝试使用 Ctrl+v 粘贴"),console.log(_context.t0),_context.abrupt("return");case 14:return dt=new DataTransfer,_context.prev=15,_context.next=18,data[0].getType("text/html");case 18:return blob=_context.sent,_context.next=21,blob.text();case 21:html=_context.sent,dt.setData("text/html",html),_context.next=34;break;case 25:return _context.prev=25,_context.t1=_context.catch(15),_context.next=29,data[0].getType("text/plain");case 29:return _blob=_context.sent,_context.next=32,_blob.text();case 32:text=_context.sent,dt.setData("text/plain",text);case 34:if(event=new ClipboardEvent("paste",{clipboardData:dt,bubbles:!0}),null!=(blockElem=props.editorContainer.current.querySelector('[data-block="true"][data-offset-key="'+(null!==(_menuData$key2=null==menuData?void 0:menuData.key)&&void 0!==_menuData$key2?_menuData$key2:"")+'"]'))){_context.next=39;break}return message.b.error("粘贴失败，尝试使用 Ctrl+v 粘贴"),_context.abrupt("return");case 39:blockElem.dispatchEvent(event);case 40:case"end":return _context.stop()}}),_callee,null,[[3,9],[15,25]])})));return function triggerCustomPaste(){return _ref.apply(this,arguments)}}(),handleInsertBefore=Object(useDebounceFn.a)((function(){isNull(menuData)||(props.setEditorState((function(editorState){var _menuData$key3;return insertBlankBlock(editorState,null!==(_menuData$key3=null==menuData?void 0:menuData.key)&&void 0!==_menuData$key3?_menuData$key3:"",!0)})),hideBlockMenu(),props.editor.focus())}),{wait:300}).run,handleInsertAfter=Object(useDebounceFn.a)((function(){isNull(menuData)||(props.setEditorState((function(editorState){var _menuData$key4;return insertBlankBlock(editorState,null!==(_menuData$key4=null==menuData?void 0:menuData.key)&&void 0!==_menuData$key4?_menuData$key4:"")})),hideBlockMenu(),props.editor.focus())}),{wait:300}).run,_useDebounceFn3=Object(useDebounceFn.a)((function(){isNull(menuData)||(props.setEditorState((function(editorState){var _menuData$key5;return function removeBlock(editorState,pivotBlockKey){pivotBlockKey.includes("-")&&(pivotBlockKey=pivotBlockKey.split("-")[0]);var content=editorState.getCurrentContent(),blockMap=content.getBlockMap(),block=blockMap.get(pivotBlockKey);if(isFalsy(block))return editorState;var blocksBefore=blockMap.toSeq().takeUntil((function(v){return v===block})),blocksAfter=blockMap.toSeq().skipUntil((function(v){return v===block})).rest(),selectedBlock=blocksAfter.first(),blocks=blocksBefore.concat(blocksAfter);if(0===blocks.size){var newBlockKey=Object(Draft.genKey)(),newBlock=new Draft.ContentBlock({key:newBlockKey,type:BLOCK_TYPE_UNSTYLED,text:""});blocks=blocks.concat([[newBlockKey,newBlock]])}isFalsy(selectedBlock)&&(selectedBlock=blocks.last());var newBlockMap=blocks.toOrderedMap(),selection=editorState.getSelection(),newContent=content.merge({blockMap:newBlockMap,selectionBefore:selection,selectionAfter:selection.merge({anchorKey:selectedBlock.getKey(),anchorOffset:0,focusKey:selectedBlock.getKey(),focusOffset:0,isBackward:!1})});return Draft.EditorState.push(editorState,newContent,"insert-fragment")}(editorState,null!==(_menuData$key5=null==menuData?void 0:menuData.key)&&void 0!==_menuData$key5?_menuData$key5:"")})),hideBlockMenu(),props.editor.focus())}),{wait:300}),handleRemove=_useDebounceFn3.run,block=Object(react.useMemo)((function(){return isFalsy(menuData)?null:props.editorState.getCurrentContent().getBlockForKey(menuData.key.split("-")[0])}),[menuData,props.editorState]);if(isNull(menuData)||isNull(menuData.x)||isNull(menuData.y)||isNull(menuData.h))return null;var renderDire=function renderDire(dire,menuActionMode,children){return isBlockDirective(dire)&&!isClasDirective(dire)||dire.type===DirectiveType.CONTAINER?Object(jsx_runtime.jsx)(dire.control,{blockKey:menuData.key.split("-")[0],menuActionMode:menuActionMode,getPopupContainer:function getPopupContainer(){var _container$current;return null!==(_container$current=container.current)&&void 0!==_container$current?_container$current:document.body},title:dire.tooltip,disabled:props.disabled,editorState:props.editorState,asMenuItem:!0,editor:props.editor,children:children},dire.name):null};return Object(jsx_runtime.jsxs)("div",{className:classes.blockMenu,ref:container,style:{top:menuData.y,left:menuData.x,height:menuData.h+"px",lineHeight:menuData.h+"px"},children:[Object(jsx_runtime.jsx)(popover.a,{overlayClassName:classes.popover,visible:additionMenuVisible,placement:"leftTop",getPopupContainer:function getPopupContainer(){var _container$current2;return null!==(_container$current2=container.current)&&void 0!==_container$current2?_container$current2:document.body},content:Object(jsx_runtime.jsx)("div",{className:classes.menuContent,ref:blockMenuContent,onMouseDown:function onMouseDown(e){return e.preventDefault()},children:Object(jsx_runtime.jsxs)(menu.a,{selectedKeys:[],onClick:function onClick(){return hideAddtionMenu()},getPopupContainer:function getPopupContainer(){var _container$current3;return null!==(_container$current3=container.current)&&void 0!==_container$current3?_container$current3:document.body},children:[isUndefined(props.blockMenuButtons)&&props.dires.map((function(dire){return dire.type===DirectiveType.CONTAINER?null:renderDire(dire,insertAfterMode?MenuActionMode.INSERT_AFTER:MenuActionMode.INSERT_BEFORE)})),!isUndefined(props.blockMenuButtons)&&props.blockMenuButtons.map((function(name){var children=[],_name$split2=block_menu_slicedToArray(name.split(">"),2),n=_name$split2[0],rest=_name$split2[1];isFalsy(rest)||(children=rest.split(","));var dire=props.direMap[n];return isUndefined(dire)?null:renderDire(dire,insertAfterMode?MenuActionMode.INSERT_AFTER:MenuActionMode.INSERT_BEFORE,children.map((function(childName){var child=props.direMap[childName];return isUndefined(child)?null:renderDire(child,insertAfterMode?MenuActionMode.INSERT_AFTER:MenuActionMode.INSERT_BEFORE)})))}))]})}),children:Object(jsx_runtime.jsx)(tooltip.a,{title:insertAfterMode?"块后插入":"块前插入",children:Object(jsx_runtime.jsx)(es_button.a,{className:classes.btn,type:"text",icon:Object(jsx_runtime.jsx)(PlusOutlined.a,{style:{opacity:.6}}),onContextMenu:function onContextMenu(e){e.preventDefault(),setInsertAfterMode(!1),showAddtionMenu()},onClick:function onClick(){setInsertAfterMode(!0),showAddtionMenu()},onMouseDown:function onMouseDown(e){return e.preventDefault()}})})}),Object(jsx_runtime.jsx)(popover.a,{overlayClassName:classes.popover,visible:menuContentVisible,placement:"leftTop",getPopupContainer:function getPopupContainer(){var _container$current4;return null!==(_container$current4=container.current)&&void 0!==_container$current4?_container$current4:document.body},content:Object(jsx_runtime.jsxs)("div",{className:classes.menuContent,ref:blockMenuContent,onMouseDown:function onMouseDown(e){return e.preventDefault()},children:[Object(jsx_runtime.jsxs)("div",{style:{color:"grey",fontSize:14},children:["KEY: ",menuData.key]}),Object(jsx_runtime.jsx)("div",{className:classes.blockDireWrap,children:props.dires.map((function(dire){return isClasDirective(dire)?Object(jsx_runtime.jsx)(dire.control,{blockKey:menuData.key.split("-")[0],getPopupContainer:function getPopupContainer(){var _container$current5;return null!==(_container$current5=container.current)&&void 0!==_container$current5?_container$current5:document.body},title:dire.tooltip,disabled:props.disabled,editorState:props.editorState,editor:props.editor},dire.name):null}))}),Object(jsx_runtime.jsxs)(menu.a,{selectedKeys:[],getPopupContainer:function getPopupContainer(){var _container$current6;return null!==(_container$current6=container.current)&&void 0!==_container$current6?_container$current6:document.body},children:[Object(jsx_runtime.jsx)(menu.a.SubMenu,{icon:Object(jsx_runtime.jsx)(RetweetOutlined.a,{}),title:"转换为",children:Object(jsx_runtime.jsxs)(menu.a,{selectedKeys:[null!==(_block$getType=null==block?void 0:block.getType())&&void 0!==_block$getType?_block$getType:""],onClick:function onClick(){return setMenuContentVisible(!1)},getPopupContainer:function getPopupContainer(){var _container$current7;return null!==(_container$current7=container.current)&&void 0!==_container$current7?_container$current7:document.body},children:[isUndefined(props.blockMenuButtons)&&props.dires.map((function(dire){return dire.type===DirectiveType.CONTAINER?null:renderDire(dire,MenuActionMode.EXCHANGE)})),!isUndefined(props.blockMenuButtons)&&props.blockMenuButtons.map((function(name){var children=[],_name$split4=block_menu_slicedToArray(name.split(">"),2),n=_name$split4[0],rest=_name$split4[1];isFalsy(rest)||(children=rest.split(","));var dire=props.direMap[n];return isUndefined(dire)?null:renderDire(dire,MenuActionMode.EXCHANGE,children.map((function(childName){var child=props.direMap[childName];return isUndefined(child)?null:renderDire(child,MenuActionMode.EXCHANGE)})))}))]})}),!isFalsy(blockInstance)&&Object(jsx_runtime.jsx)(menu.a.Item,{icon:Object(jsx_runtime.jsx)(SettingOutlined.a,{}),onClick:function onClick(){blockInstance.showSettingModal(),setMenuContentVisible(!1)},children:"配置"}),Object(jsx_runtime.jsx)(menu.a.Item,{icon:Object(jsx_runtime.jsx)(CopyOutlined.a,{}),onClick:function handleCopy(){var _menuData$key;if(null!=props.editorContainer.current){var blockElem=props.editorContainer.current.querySelector('[data-block="true"][data-offset-key="'+(null!==(_menuData$key=null==menuData?void 0:menuData.key)&&void 0!==_menuData$key?_menuData$key:"")+'"]');null!=blockElem?(copy_html(blockElem.outerHTML+"<br>"),message.b.success("复制成功")):message.b.error("复制失败")}},children:"复制"}),Object(jsx_runtime.jsx)(menu.a.Item,{icon:Object(jsx_runtime.jsx)(icon_font,{type:"icon-paste"}),onClick:triggerCustomPaste,children:"粘贴"}),Object(jsx_runtime.jsx)(menu.a.Item,{icon:Object(jsx_runtime.jsx)(icon_font,{type:"icon-insert-row-up"}),onClick:handleInsertBefore,children:"块前插入"}),Object(jsx_runtime.jsx)(menu.a.Item,{icon:Object(jsx_runtime.jsx)(icon_font,{type:"icon-insert-row-bottom"}),onClick:handleInsertAfter,children:"块后插入"}),Object(jsx_runtime.jsx)(menu.a.Item,{icon:Object(jsx_runtime.jsx)(icon_font,{type:"icon-remove"}),onClick:handleRemove,children:"删除"})]})]}),children:Object(jsx_runtime.jsx)(es_button.a,{className:classes.btn,type:"text",icon:Object(jsx_runtime.jsx)(HolderOutlined.a,{}),onClick:function onClick(){return function showMenuContent(){setMenuContentVisible(!0),setAddtionMenuVisible(!1)}()},onMouseDown:function onMouseDown(e){return e.preventDefault()}})})]})}));block_menu_BlockMenu.displayName="BlockMenu";var block_menu=block_menu_BlockMenu;try{block_menu_BlockMenu.displayName="BlockMenu",block_menu_BlockMenu.__docgenInfo={description:"",displayName:"BlockMenu",props:{registedBlockInstanceMap:{defaultValue:null,description:"",name:"registedBlockInstanceMap",required:!0,type:{name:"MutableRefObject<Record<string, IBlockInstance | undefined>>"}},dires:{defaultValue:null,description:"",name:"dires",required:!0,type:{name:"Directive[]"}},direMap:{defaultValue:null,description:"",name:"direMap",required:!0,type:{name:"Record<string, Directive | undefined>"}},editorState:{defaultValue:null,description:"",name:"editorState",required:!0,type:{name:"EditorState"}},editorContainer:{defaultValue:null,description:"",name:"editorContainer",required:!0,type:{name:"RefObject<HTMLDivElement>"}},setEditorState:{defaultValue:null,description:"",name:"setEditorState",required:!0,type:{name:"Dispatch<SetStateAction<EditorState>>"}},editor:{defaultValue:null,description:"",name:"editor",required:!0,type:{name:"EditorInstance"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},blockMenuButtons:{defaultValue:null,description:"",name:"blockMenuButtons",required:!1,type:{name:"string[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/block-menu.tsx#BlockMenu"]={docgenInfo:block_menu_BlockMenu.__docgenInfo,name:"BlockMenu",path:"src/block-menu.tsx#BlockMenu"})}catch(__react_docgen_typescript_loader_error){}function scrolledSize(node,container){if(null==node)return{x:0,y:0};var scrolled={x:node.scrollLeft,y:node.scrollTop};if(node===document.body.parentElement||node===container)return scrolled;var scrolledOfParent=scrolledSize(node.parentElement,container);return{x:scrolled.x+scrolledOfParent.x,y:scrolled.y+scrolledOfParent.y}}function offsetFromContainer(node){var container=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body.parentElement;if(null==node)return{x:0,y:0};var offsetOfNode={x:node.offsetLeft+node.scrollLeft,y:node.offsetTop+node.scrollTop};if(node===document.body.parentElement||node===container)return offsetOfNode;var offsetParent=node.offsetParent;null==offsetParent&&node!==document.body.parentElement&&(offsetParent=document.body.parentElement);var offsetOfParent=offsetFromContainer(offsetParent,container),scrolled=scrolledSize(node,offsetParent);return{x:offsetOfNode.x+offsetOfParent.x-scrolled.x,y:offsetOfNode.y+offsetOfParent.y-scrolled.y}}function float_inline_menu_slicedToArray(arr,i){return function float_inline_menu_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function float_inline_menu_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function float_inline_menu_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return float_inline_menu_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return float_inline_menu_arrayLikeToArray(o,minLen)}(arr,i)||function float_inline_menu_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function float_inline_menu_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var float_inline_menu_useStyles=Object(react_jss_esm.a)((function(theme){return{floatInlineMenu:{position:"absolute",transform:"translateY(-100%)",display:"flex",background:"#fff",zIndex:6,borderRadius:18,padding:"2px 11px",border:"solid 1px #ededed",boxShadow:theme.boxShadowBase,"& button, & .ant-select-selector":{border:"none !important",boxShadow:"none !important"}},ctrl:{"&:not(:last-child)":{marginRight:theme.marginXss}}}}),{name:"FloatInlineMenu"}),FloatInlineMenu=Object(react.forwardRef)((function(props,ref){var classes=float_inline_menu_useStyles(),_useState2=float_inline_menu_slicedToArray(Object(react.useState)(null),2),menuData=_useState2[0],setMenuData=_useState2[1],triggeredBySelect=Object(react.useRef)(!1),adjustPosition=Object(react.useRef)(!1),container=Object(react.useRef)(null),hideBlockMenu=function hideBlockMenu(){setMenuData(null)};Object(react.useEffect)((function(){if(adjustPosition.current)adjustPosition.current=!1;else if(!isNull(menuData)&&!isNull(props.editorContainer.current)&&!isNull(container.current)){var _newMenuData$x,_newMenuData,editorContainerRect=props.editorContainer.current.getBoundingClientRect(),containerRect=container.current.getBoundingClientRect(),newMenuData=null,excessWidth=containerRect.left+containerRect.width-(editorContainerRect.left+editorContainerRect.width);if(excessWidth>0&&(newMenuData={x:menuData.x-excessWidth-10,y:menuData.y}),containerRect.top<editorContainerRect.top)newMenuData={x:null!==(_newMenuData$x=null===(_newMenuData=newMenuData)||void 0===_newMenuData?void 0:_newMenuData.x)&&void 0!==_newMenuData$x?_newMenuData$x:menuData.x,y:containerRect.height};isNull(newMenuData)||(adjustPosition.current=!0,setMenuData(newMenuData))}}),[props.editorContainer,menuData]);var handleDocClick=Object(react.useCallback)((function(e){e.target instanceof HTMLElement&&(isNull(container.current)||(triggeredBySelect.current?triggeredBySelect.current=!1:container.current.contains(e.target)||hideBlockMenu()))}),[]);Object(react.useEffect)((function(){return document.addEventListener("click",handleDocClick,!1),function(){document.removeEventListener("click",handleDocClick,!1)}}),[handleDocClick]);var instance={handleSelect:function handleSelect(){if(isFalsy(props.disabled)){var selection=document.getSelection();if(!isNull(selection))if(selection.isCollapsed)setMenuData(null);else{var range=selection.getRangeAt(0),offset=offsetFromContainer(props.editorContainer.current),scrolled=scrolledSize(props.editorContainer.current,document.body.parentElement),rect=range.getBoundingClientRect();triggeredBySelect.current=!0,setMenuData({x:rect.left-offset.x+scrolled.x,y:rect.top-offset.y+scrolled.y})}}},hide:hideBlockMenu};Object(react.useImperativeHandle)(ref,(function(){return instance}));var inlineMenuDire=isUndefined(props.inlineMenuButtons)?props.dires:props.inlineMenuButtons.reduce((function(acc,name){var dire=props.direMap[name];return isUndefined(dire)||acc.push(dire),acc}),[]);return isNull(menuData)||isNull(menuData.x)||isNull(menuData.y)?null:Object(jsx_runtime.jsx)("div",{className:classes.floatInlineMenu,ref:container,style:{top:menuData.y,left:menuData.x},children:inlineMenuDire.map((function(dire){return isInlineDirective(dire)?Object(jsx_runtime.jsx)("span",{className:classes.ctrl,children:Object(jsx_runtime.jsx)(dire.control,{getPopupContainer:function getPopupContainer(){var _container$current;return null!==(_container$current=container.current)&&void 0!==_container$current?_container$current:document.body},title:dire.tooltip,disabled:props.disabled,editorState:props.editorState,editor:props.editor})},dire.name):null}))})}));FloatInlineMenu.displayName="BlockMenu";var float_inline_menu=FloatInlineMenu;try{BlockMenu.displayName="BlockMenu",BlockMenu.__docgenInfo={description:"",displayName:"BlockMenu",props:{dires:{defaultValue:null,description:"",name:"dires",required:!0,type:{name:"Directive[]"}},direMap:{defaultValue:null,description:"",name:"direMap",required:!0,type:{name:"Record<string, Directive | undefined>"}},registedBlockInstanceMap:{defaultValue:null,description:"",name:"registedBlockInstanceMap",required:!0,type:{name:"MutableRefObject<Record<string, IBlockInstance | undefined>>"}},editorContainer:{defaultValue:null,description:"",name:"editorContainer",required:!0,type:{name:"RefObject<HTMLDivElement>"}},setEditorState:{defaultValue:null,description:"",name:"setEditorState",required:!0,type:{name:"Dispatch<SetStateAction<EditorState>>"}},editor:{defaultValue:null,description:"",name:"editor",required:!0,type:{name:"EditorInstance"}},editorState:{defaultValue:null,description:"",name:"editorState",required:!0,type:{name:"EditorState"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},inlineMenuButtons:{defaultValue:null,description:"",name:"inlineMenuButtons",required:!1,type:{name:"string[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/float-inline-menu.tsx#BlockMenu"]={docgenInfo:BlockMenu.__docgenInfo,name:"BlockMenu",path:"src/float-inline-menu.tsx#BlockMenu"})}catch(__react_docgen_typescript_loader_error){}function editor_core_toConsumableArray(arr){return function editor_core_arrayWithoutHoles(arr){if(Array.isArray(arr))return editor_core_arrayLikeToArray(arr)}(arr)||function editor_core_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||editor_core_unsupportedIterableToArray(arr)||function editor_core_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function editor_core_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return editor_core_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?editor_core_arrayLikeToArray(o,minLen):void 0}}function editor_core_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var usePostContentStyle=Object(react_jss_esm.a)(post_content_style,{name:StyleName.POST_CONTENT}),editor_core_useEditorStyles=Object(react_jss_esm.a)((function(theme){return{editorCore:{position:"relative",overflow:"hidden","&:not($disabled)":{cursor:"text"},fontSize:"16px","&$fullscreen":{flex:1,overflowX:"hidden",overflowY:"auto"},"@global":{".DraftEditor-editorContainer":{paddingTop:"0.1px"},".public-DraftEditorPlaceholder-root":{paddingTop:theme.paddingMd},".public-DraftEditor-content":{paddingBottom:"100px","& > div":{maxWidth:theme.maxPostWidth+160,margin:"0 auto",padding:theme.paddingMd+"px 80px 0"}},".public-DraftStyleDefault-pre":{backgroundColor:"rgba(0, 0, 0, 0.05)",fontFamily:'"Inconsolata", "Menlo", "Consolas", monospace',fontSize:"16px",padding:"20px"},".public-DraftEditorPlaceholder-inner":{maxWidth:theme.maxPostWidth,margin:"0 auto"}}},disabled:{},fullscreen:{},hidePlaceholder:{"@global":{".public-DraftEditorPlaceholder-root":{display:"none"}}}}}),{name:"Editor"}),EditorCore=Object(react.forwardRef)((function(props,_ref){var _cls,_blockMenu$current,_props$placeholder,handleEditorStateChange=props.handleEditorStateChange,postClasses=usePostContentStyle(),classes=editor_core_useEditorStyles(),editorWrap=Object(react.useRef)(null),blockMenuWrap=Object(react.useRef)(null),floatMenuWrap=Object(react.useRef)(null),styleMap=props.dires.reduce((function(acc,cur){return isStylDirective(cur)&&(acc=Object.assign({},acc,cur.styleMap)),acc}),{}),editor=Object(react.useRef)(null),maybeInsertNewLine=Object(react.useCallback)((function(){handleEditorStateChange((function(editorState){var contentState=editorState.getCurrentContent(),lastBlock=contentState.getLastBlock();if(lastBlock.getType()===BLOCK_TYPE_UNSTYLED&&""===lastBlock.getText())return editorState;var block=new Draft.ContentBlock({key:Object(Draft.genKey)(),type:BLOCK_TYPE_UNSTYLED,text:""}),newBlockMap=contentState.getBlockMap().set(block.getKey(),block),newContentState=Draft.ContentState.createFromBlockArray(newBlockMap.toArray()).set("selectionAfter",new Draft.SelectionState({anchorKey:block.getKey(),focusKey:block.getKey(),anchorOffset:0,focusOffset:0}));return Draft.EditorState.push(editorState,newContentState,"insert-fragment")}))}),[handleEditorStateChange]),contentState=Object(react.useMemo)((function(){return props.editorState.getCurrentContent()}),[props.editorState]),hidePlaceholder=Object(react.useMemo)((function(){return!contentState.hasText()&&contentState.getBlockMap().first().getType()!==BLOCK_TYPE_UNSTYLED}),[contentState]),getBlockStyle=Object(react.useCallback)((function(block){var data=block.getData(),classNames=props.dires.reduce((function(acc,cur){return isClasDirective(cur)&&acc.push(cur.getBlockClassName(data)),acc}),[]);return classnames_default.a.apply(void 0,editor_core_toConsumableArray(classNames))}),[props.dires]),blockRenderMap=Object(react.useMemo)((function(){var map=props.dires.reduce((function(acc,cur){return isBlockDirective(cur)&&!isFalsy(cur.blockRender)&&(acc[cur.name]=cur.blockRender),acc}),{});return Draft.DefaultDraftBlockRenderMap.merge(immutable_default.a.Map(map))}),[props.dires]),blockMenu=Object(react.useRef)(null),floatInlineMenu=Object(react.useRef)(null),handleMouseEnter=Object(useDebounceFn.a)((function(e){isNull(blockMenu.current)||blockMenu.current.handleMouseMovesOverBlock(e)}),{wait:100}).run;return Object(jsx_runtime.jsxs)("div",{className:classnames_default()(classes.editorCore,postClasses.postContent,(_cls={},_cls[classes.hidePlaceholder]=hidePlaceholder,_cls[classes.fullscreen]=props.fullscreen,_cls[classes.disabled]=props.disabled,_cls)),onMouseMove:handleMouseEnter,onScroll:null===(_blockMenu$current=blockMenu.current)||void 0===_blockMenu$current?void 0:_blockMenu$current.hide,onClick:function handleClick(e){if(!isNull(editor.current))if(isNull(editorWrap.current))editor.current.focus();else{var contentEle=editorWrap.current.querySelector(".public-DraftEditor-content");isNull(contentEle)?editor.current.focus():e.target instanceof HTMLDivElement&&(contentEle.contains(e.target)?editor.current.focus():!isNull(blockMenuWrap.current)&&blockMenuWrap.current.contains(e.target)||!isNull(floatMenuWrap.current)&&floatMenuWrap.current.contains(e.target)||(maybeInsertNewLine(),setTimeout((function(){var _editor$current;null===(_editor$current=editor.current)||void 0===_editor$current||_editor$current.focus()}),200)))}},onSelect:function onSelect(){var _floatInlineMenu$curr;return null===(_floatInlineMenu$curr=floatInlineMenu.current)||void 0===_floatInlineMenu$curr?void 0:_floatInlineMenu$curr.handleSelect()},ref:function ref(node){isUndefined(props.editorWrapRef)||(props.editorWrapRef.current=node),editorWrap.current=node},children:[Object(jsx_runtime.jsx)("div",{ref:blockMenuWrap,children:Object(jsx_runtime.jsx)(block_menu,{ref:blockMenu,dires:props.dires,direMap:props.direMap,editorState:props.editorState,registedBlockInstanceMap:props.registedBlockInstanceMap,editorContainer:editorWrap,setEditorState:props.handleEditorStateChange,disabled:props.disabled,editor:props.instance,blockMenuButtons:props.blockMenuButtons})}),Object(jsx_runtime.jsx)("div",{ref:floatMenuWrap,children:Object(jsx_runtime.jsx)(float_inline_menu,{ref:floatInlineMenu,dires:props.dires,direMap:props.direMap,editorState:props.editorState,registedBlockInstanceMap:props.registedBlockInstanceMap,editorContainer:editorWrap,setEditorState:props.handleEditorStateChange,editor:props.instance,disabled:props.disabled,inlineMenuButtons:props.inlineMenuButtons})}),Object(jsx_runtime.jsx)(Draft.Editor,{readOnly:props.readOnly,blockStyleFn:getBlockStyle,blockRendererFn:function blockRenderFn(contentBlock){var type=contentBlock.getType();type===BLOCK_TYPE_ATOMIC&&(type=contentBlock.getData().get("type"));var dire=props.direMap[type];if(!isFalsy(dire)&&isCompBlockDirective(dire))return{component:dire.component,editable:dire.editable,props:{onChange:handleEditorStateChange,onReadOnly:props.setReadOnly,registedBlockInstanceMap:props.registedBlockInstanceMap}}},blockRenderMap:blockRenderMap,customStyleMap:styleMap,editorState:props.editorState,handleKeyCommand:function handleKeyCommand(command,editorState){if(console.log("command",command),props.dires.some((function(dire){var _dire$handleCommand;return!(Array.isArray(dire.command)&&!dire.command.includes(command))&&(!(!Array.isArray(dire.command)&&dire.command!==command)&&!isFalsy(null===(_dire$handleCommand=dire.handleCommand)||void 0===_dire$handleCommand?void 0:_dire$handleCommand.call(dire,props.instance,command,props.editorState)))})))return"handled";var newState=Draft.RichUtils.handleKeyCommand(editorState,command);return isNull(newState)?"not-handled":(handleEditorStateChange(newState),"handled")},keyBindingFn:function keyBindingFn(e){var _props$frozenKeyBoard;if(null!==(_props$frozenKeyBoard=props.frozenKeyBoard)&&void 0!==_props$frozenKeyBoard&&_props$frozenKeyBoard)return"not-handled-command";if(1===e.key.length||e.key.toLowerCase().startsWith("arrow")){var _ret=function(){var keys=[];e.ctrlKey&&keys.push("ctrl"),e.shiftKey&&keys.push("shift"),e.altKey&&keys.push("alt"),keys.push(e.key.toLowerCase());for(var command=null,_loop=function _loop(i){var dire=props.dires[i];if(isFalsy(dire.shortcut)||isFalsy(dire.command)||isFalsy(dire.handleCommand))return"continue";var shortcuts=[];return Array.isArray(dire.shortcut)?shortcuts=dire.shortcut:shortcuts.push(dire.shortcut),isNull(command=shortcuts.reduce((function(result,shortcut,j){var _dire$command,parts=shortcut.toLowerCase().split("+");if(parts.length!==keys.length)return result;parts.every((function(part){return keys.includes(part)}))&&(result=Array.isArray(dire.command)?dire.command[j]:null!==(_dire$command=dire.command)&&void 0!==_dire$command?_dire$command:null);return result}),null))?void 0:"break"},i=0;i<props.dires.length;i++){var _ret2=_loop(i);if("continue"!==_ret2&&"break"===_ret2)break}if(!isNull(command))return e.preventDefault(),{v:command}}();if("object"==typeof _ret)return _ret.v}return Object(Draft.getDefaultKeyBinding)(e)},handleReturn:function handleReturn(e,editorState){var selection=editorState.getSelection(),block=editorState.getCurrentContent().getBlockForKey(selection.getEndKey()),blockType=block.getType();return blockType===BLOCK_TYPE_CODE||e.shiftKey?(handleEditorStateChange(Draft.RichUtils.insertSoftNewline(editorState)),"handled"):e.altKey||e.metaKey||e.ctrlKey||blockType!==BLOCK_TYPE_ATOMIC?"not-handled":(handleEditorStateChange(function insertBlockAt(editorState,pivotBlockKey,newBlockType,data){isUndefined(newBlockType)&&(newBlockType=BLOCK_TYPE_UNSTYLED);var content=editorState.getCurrentContent(),blockMap=content.getBlockMap(),block=blockMap.get(pivotBlockKey);if(isFalsy(block))throw new Error("The pivot key - "+pivotBlockKey+" is not present in blockMap.");var blocksBefore=blockMap.toSeq().takeUntil((function(v){return v===block})),blocksAfter=blockMap.toSeq().skipUntil((function(v){return v===block})).rest(),newBlockKey=Object(Draft.genKey)(),newBlock=new Draft.ContentBlock({key:newBlockKey,type:newBlockType,text:"",characterList:Object(immutable.List)(),depth:0,data:Object(immutable.Map)().merge(Object.assign({},data))}),newBlockMap=blocksBefore.concat([[pivotBlockKey,block],[newBlockKey,newBlock]],blocksAfter).toOrderedMap(),selection=editorState.getSelection(),newContent=content.merge({blockMap:newBlockMap,selectionBefore:selection,selectionAfter:selection.merge({anchorKey:newBlockKey,anchorOffset:0,focusKey:newBlockKey,focusOffset:0,isBackward:!1})});return Draft.EditorState.push(editorState,newContent,"split-block")}(editorState,block.getKey())),"handled")},onChange:handleEditorStateChange,onTab:function handleTab(e){e.preventDefault(),handleEditorStateChange((function(editorState){var selection=editorState.getSelection(),contentState=editorState.getCurrentContent();if(contentState.getBlockForKey(selection.getEndKey()).getType()===BLOCK_TYPE_CODE){var newContentState=Draft.Modifier.replaceText(contentState,selection,"    ");return Draft.EditorState.push(editorState,newContentState,"insert-characters")}return Draft.RichUtils.onTab(e,editorState,4)}))},handlePastedText:function handlePastedText(str,html,editorState){var _step,contentState=editorState.getCurrentContent(),selection=editorState.getSelection(),block=contentState.getBlockForKey(selection.getFocusKey()),_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=editor_core_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(props.dires);try{for(_iterator.s();!(_step=_iterator.n()).done;){var _dire$capturePasteEve,dire=_step.value;if(block.getType()===dire.name&&(isBlockDirective(dire)&&null!==(_dire$capturePasteEve=dire.capturePasteEvent)&&void 0!==_dire$capturePasteEve&&_dire$capturePasteEve)){var _newState=Draft.Modifier.insertText(contentState,selection,str);return handleEditorStateChange(Draft.EditorState.push(editorState,_newState,"insert-characters")),"handled"}}}catch(err){_iterator.e(err)}finally{_iterator.f()}if(isUndefined(html))return"not-handled";console.log("html:",html);var options=import_html_options_getOptions(0,props.dires),blockMap=Object(esm_main.a)("<div>"+html+"</div>",options).getBlockMap(),newState=Draft.Modifier.replaceWithFragment(contentState,selection,blockMap);return handleEditorStateChange(Draft.EditorState.push(editorState,newState,"insert-fragment")),"handled"},placeholder:null!==(_props$placeholder=props.placeholder)&&void 0!==_props$placeholder?_props$placeholder:"Tell a story...",ref:function ref(node){"function"==typeof _ref?_ref(node):null!=_ref&&(_ref.current=node),editor.current=node},spellCheck:!0,onFocus:function onFocus(){return props.setFocused(!0)},onBlur:function onBlur(){return props.setFocused(!1)}})]})}));EditorCore.displayName="EditorCore";var editor_core=EditorCore;try{EditorCore.displayName="EditorCore",EditorCore.__docgenInfo={description:"",displayName:"EditorCore",props:{editorState:{defaultValue:null,description:"",name:"editorState",required:!0,type:{name:"EditorState"}},handleEditorStateChange:{defaultValue:null,description:"",name:"handleEditorStateChange",required:!0,type:{name:"(v: EditorState | ((editorState: EditorState) => EditorState)) => void"}},fullscreen:{defaultValue:null,description:"",name:"fullscreen",required:!0,type:{name:"boolean"}},setFullscreen:{defaultValue:null,description:"",name:"setFullscreen",required:!0,type:{name:"Dispatch<SetStateAction<boolean>>"}},dires:{defaultValue:null,description:"",name:"dires",required:!0,type:{name:"Directive[]"}},direMap:{defaultValue:null,description:"",name:"direMap",required:!0,type:{name:"Record<string, Directive | undefined>"}},setFocused:{defaultValue:null,description:"",name:"setFocused",required:!0,type:{name:"Dispatch<SetStateAction<boolean>>"}},registedBlockInstanceMap:{defaultValue:null,description:"",name:"registedBlockInstanceMap",required:!0,type:{name:"MutableRefObject<Record<string, IBlockInstance | undefined>>"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},setReadOnly:{defaultValue:null,description:"",name:"setReadOnly",required:!0,type:{name:"Dispatch<SetStateAction<boolean>>"}},instance:{defaultValue:null,description:"",name:"instance",required:!0,type:{name:"EditorInstance"}},editorWrapRef:{defaultValue:null,description:"",name:"editorWrapRef",required:!1,type:{name:"MutableRefObject<HTMLDivElement | null>"}},frozenKeyBoard:{defaultValue:null,description:"",name:"frozenKeyBoard",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},blockMenuButtons:{defaultValue:null,description:"",name:"blockMenuButtons",required:!1,type:{name:"string[]"}},inlineMenuButtons:{defaultValue:null,description:"",name:"inlineMenuButtons",required:!1,type:{name:"string[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/editor-core.tsx#EditorCore"]={docgenInfo:EditorCore.__docgenInfo,name:"EditorCore",path:"src/editor-core.tsx#EditorCore"})}catch(__react_docgen_typescript_loader_error){}function editor_toConsumableArray(arr){return function editor_arrayWithoutHoles(arr){if(Array.isArray(arr))return editor_arrayLikeToArray(arr)}(arr)||function editor_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||editor_unsupportedIterableToArray(arr)||function editor_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function editor_slicedToArray(arr,i){return function editor_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function editor_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||editor_unsupportedIterableToArray(arr,i)||function editor_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function editor_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return editor_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?editor_arrayLikeToArray(o,minLen):void 0}}function editor_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var editor_useEditorStyles=Object(react_jss_esm.a)((function(theme){return{root:{background:"#fff",border:"1px solid #ddd",fontFamily:'"Georgia", serif',borderRadius:theme.borderRadiusBase,fontSize:16,"&:hover:not($fullscreen):not($disabled)":{borderColor:"#40a9ff"},'& [data-block="true"]:hover, & [data-block="true"]$activedBlock':{position:"relative",outline:"dashed 1px #ddd",outlineOffset:3,"&::after":{content:"attr(data-offset-key)",position:"absolute",top:"100%",right:0,fontSize:12,background:"rgba(0, 0, 0, .5)",color:"#fff",padding:"3px 5px",borderRadius:5,zIndex:2}},'& [data-block="true"]:focus-visible':{outline:"none"}},activedBlock:{},frozenKeyBoard:{"& .public-DraftEditor-content":{caretColor:"transparent"}},disabled:{color:"rgba(0, 0, 0, 0.25)",backgroundColor:"#f5f5f5",cursor:"not-allowed"},fullscreen:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:theme.zindexModal,display:"flex",flexDirection:"column",overflow:"hidden",border:"none"},focused:{"&:not($fullscreen)":{borderColor:"#40a9ff",boxShadow:"0 0 0 2 rgb(24 144 255 / 20%)"}}}}),{name:"Editor"}),editor_directives=[undo,redo,bold,font_size,text_align,code_block,copy,edit_source,directives_separator,directives_link,directives_image,image_inline,directives_embed,title,line_height,blockquote,ol,ul,italic,underline,strikethrough,code,text_color,text_bg_color,clear,directives_fullscreen,save,group],editor_decorators=[decorators_image,decorators_link,decorators_prism],RichTextEditor=Object(react.forwardRef)((function(props,ref){var _editor$current$blur,_editor$current,_editor$current$blur2,_editor$current2,_cls,classes=editor_useEditorStyles(),_useState2=editor_slicedToArray(Object(react.useState)(!1),2),fullscreen=_useState2[0],setFullscreen=_useState2[1],_useState4=editor_slicedToArray(Object(react.useState)(!isFalsy(props.disabled)),2),readOnly=_useState4[0],setReadOnly=_useState4[1],registedBlockInstanceMap=Object(react.useRef)({}),_useState6=editor_slicedToArray(Object(react.useState)(!1),2),focused=_useState6[0],setFocused=_useState6[1],editorContainer=Object(react.useRef)(null),overlayContainer=Object(react.useRef)(null),getPopupContainer=props.getPopupContainer,onChange=props.onChange,_useDires2=editor_slicedToArray(useDires(editor_directives),2),registedDires=_useDires2[0],registedDireMap=_useDires2[1],editor=Object(react.useRef)(null),rawJson=Object(react.useRef)("{}");Object(react.useEffect)((function(){return setReadOnly(!isFalsy(props.disabled))}),[props.disabled]);var getEditorContentContainer=Object(react.useCallback)((function(element){if(!isFalsy(getPopupContainer))return getPopupContainer(element);for(;;){var parent=element.parentElement;if(isNull(parent))return document.body;if(parent.classList.contains("public-DraftEditor-content"))return parent;element=parent}}),[getPopupContainer]),_useDecorators2=editor_slicedToArray(use_decorators(editor_decorators,{onReadOnly:setReadOnly,onChange:function _setEditorState(fn){return setEditorState(fn)},getPopupContainer:getEditorContentContainer}),2),registedDecorators=_useDecorators2[0],registedCompDecorators=_useDecorators2[1],getEditState=Object(react.useCallback)((function(value){var decorator=new multidecorators([new Draft.CompositeDecorator(registedDecorators)].concat(editor_toConsumableArray(registedCompDecorators)));try{if(!isUndefined(value)){var json=JSON.parse(value);return rawJson.current=json,Draft.EditorState.createWithContent(Object(Draft.convertFromRaw)(json),decorator)}return rawJson.current="{}",Draft.EditorState.createEmpty(decorator)}catch(err){return console.log("parse json fail: ",err),rawJson.current="{}",Draft.EditorState.createEmpty(decorator)}}),[registedCompDecorators,registedDecorators]),_useState8=editor_slicedToArray(Object(react.useState)((function(){return getEditState(props.value)})),2),editorState=_useState8[0],setEditorState=_useState8[1];Object(react.useEffect)((function(){if(!isUndefined(props.value)&&rawJson.current!==props.value){var value=getEditState(props.value);setEditorState(value)}}),[props.value,getEditState]);var handleContentClick=Object(react.useCallback)((function(e){if(e instanceof MouseEvent&&e.currentTarget instanceof HTMLElement){var rect=e.currentTarget.getBoundingClientRect();e.offsetY>rect.height-100&&function maybeInsertNewLine(){setEditorState((function(editorState){var contentState=editorState.getCurrentContent(),lastBlock=contentState.getLastBlock();if(lastBlock.getType()===BLOCK_TYPE_UNSTYLED&&""===lastBlock.getText())return editorState;var block=new Draft.ContentBlock({key:Object(Draft.genKey)(),type:BLOCK_TYPE_UNSTYLED,text:""}),newBlockMap=contentState.getBlockMap().set(block.getKey(),block),newContentState=Draft.ContentState.createFromBlockArray(newBlockMap.toArray()).set("selectionAfter",new Draft.SelectionState({anchorKey:block.getKey(),focusKey:block.getKey(),anchorOffset:0,focusOffset:0}));return Draft.EditorState.push(editorState,newContentState,"insert-fragment")}))}()}}),[]);Object(react.useEffect)((function(){var container=editorContainer.current;if(!isNull(container)){var contentEle=container.querySelector(".public-DraftEditor-content");if(!isNull(contentEle))return contentEle.addEventListener("click",handleContentClick,!1),function(){contentEle.removeEventListener("click",handleContentClick,!1)}}}),[handleContentClick]);var handleEditorStateChange=function handleEditorStateChange(v){if("function"==typeof v)setEditorState((function(editorState){var newEditorState=v(editorState),json=JSON.stringify(Object(Draft.convertToRaw)(newEditorState.getCurrentContent()));return rawJson.current=json,null==onChange||onChange(json),newEditorState}));else{setEditorState(v);var json=JSON.stringify(Object(Draft.convertToRaw)(v.getCurrentContent()));rawJson.current=json,null==onChange||onChange(json)}},contentState=Object(react.useMemo)((function(){return editorState.getCurrentContent()}),[editorState]),getHTML=Object(react.useCallback)((function(){var options=getOptions(contentState,registedDires);return Object(main.a)(contentState,options)}),[contentState,registedDires]),scrollTop=Object(react.useRef)(0),instance={registedDires:registedDires,getHTML:getHTML,focus:null!==(_editor$current$blur=null===(_editor$current=editor.current)||void 0===_editor$current?void 0:_editor$current.blur)&&void 0!==_editor$current$blur?_editor$current$blur:function(){},blur:null!==(_editor$current$blur2=null===(_editor$current2=editor.current)||void 0===_editor$current2?void 0:_editor$current2.blur)&&void 0!==_editor$current$blur2?_editor$current$blur2:function(){},setEditorState:handleEditorStateChange,setFullscreen:setFullscreen,windowScrollTop:scrollTop,onSave:props.onSave};return Object(react.useImperativeHandle)(ref,(function(){return instance})),Object(jsx_runtime.jsxs)("div",{ref:editorContainer,className:classnames_default()(classes.root,props.className,(_cls={},_cls[classes.fullscreen]=fullscreen,_cls[classes.focused]=focused,_cls[classes.disabled]=props.disabled,_cls[classes.frozenKeyBoard]=props.frozenKeyBoard,_cls)),children:[!isUndefined(props.controlBarButtons)&&Object(jsx_runtime.jsx)(editor_controls,{stickyOffsetTop:props.ctrlBarStickyOffsetTop,editor:instance,editorState:editorState,fullscreen:fullscreen,disabled:props.disabled,direMap:registedDireMap,className:props.controlsClassName,borderedControls:props.borderedControls,controlBarButtons:props.controlBarButtons}),Object(jsx_runtime.jsx)("div",{ref:overlayContainer}),Object(jsx_runtime.jsx)(editor_core,{ref:editor,editorState:editorState,handleEditorStateChange:handleEditorStateChange,fullscreen:fullscreen,setFullscreen:setFullscreen,dires:registedDires,direMap:registedDireMap,setFocused:setFocused,registedBlockInstanceMap:registedBlockInstanceMap,frozenKeyBoard:props.frozenKeyBoard,placeholder:props.placeholder,readOnly:readOnly,setReadOnly:setReadOnly,instance:instance,disabled:props.disabled,blockMenuButtons:props.blockMenuButtons,inlineMenuButtons:props.inlineMenuButtons})]})}));RichTextEditor.displayName="Editor";var src_editor=RichTextEditor;try{Editor.displayName="Editor",Editor.__docgenInfo={description:"",displayName:"Editor",props:{frozenKeyBoard:{defaultValue:null,description:"",name:"frozenKeyBoard",required:!1,type:{name:"boolean"}},ctrlBarStickyOffsetTop:{defaultValue:null,description:"",name:"ctrlBarStickyOffsetTop",required:!1,type:{name:"string | number"}},getPopupContainer:{defaultValue:null,description:"",name:"getPopupContainer",required:!1,type:{name:"((triggerNode: HTMLElement) => HTMLElement)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: string) => void)"}},controls:{defaultValue:null,description:"",name:"controls",required:!1,type:{name:"ControlItem[]"}},controlsClassName:{defaultValue:null,description:"",name:"controlsClassName",required:!1,type:{name:"string"}},controlsForFullscreen:{defaultValue:null,description:"",name:"controlsForFullscreen",required:!1,type:{name:"ControlItem[]"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!1,type:{name:"(() => void)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},borderedControls:{defaultValue:null,description:"",name:"borderedControls",required:!1,type:{name:"boolean"}},controlBarButtons:{defaultValue:null,description:"",name:"controlBarButtons",required:!1,type:{name:"string[]"}},blockMenuButtons:{defaultValue:null,description:"",name:"blockMenuButtons",required:!1,type:{name:"string[]"}},inlineMenuButtons:{defaultValue:null,description:"",name:"inlineMenuButtons",required:!1,type:{name:"string[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/editor.tsx#Editor"]={docgenInfo:Editor.__docgenInfo,name:"Editor",path:"src/editor.tsx#Editor"})}catch(__react_docgen_typescript_loader_error){}var BreakpointKey,theming_esm=__webpack_require__("./node_modules/theming/dist/theming.esm.js");!function(BreakpointKey){BreakpointKey[BreakpointKey.XS=480]="XS",BreakpointKey[BreakpointKey.SM=576]="SM",BreakpointKey[BreakpointKey.MD=768]="MD",BreakpointKey[BreakpointKey.LG=992]="LG",BreakpointKey[BreakpointKey.XL=1200]="XL",BreakpointKey[BreakpointKey.XXL=1620]="XXL"}(BreakpointKey||(BreakpointKey={}));var styles_theme={primaryColor:"#1890ff",linkColor:"#1890ff",successColor:"#52c41a",warningColor:"#faad14",errorColor:"#f5222d",headingColor:"rgba(0, 0, 0, 0.85)",textColor:"rgba(0, 0, 0, 0.65)",textColorSecondary:"rgba(0, 0, 0, 0.45)",disabledColor:"rgba(0, 0, 0, 0.25)",borderColorBase:"#d9d9d9",boxShadowBase:"0 3px 6px -4px rgba(0, 0, 0, 0.12), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 9px 28px 8px rgba(0, 0, 0, 0.05)",backgroundColor:"#fff",backgroundColorLight:"rgb(250, 250, 250)",backgroundColorBase:"rgb(245, 245, 245)",wechatColor:"#56c13d",alipayColor:"#1595db",paddingLg:24,paddingMd:16,paddingSm:12,paddingXs:8,paddingXss:4,marginLg:24,marginMd:16,marginSm:12,marginXs:8,marginXss:4,zindexBadge:"auto",zindexTableFixed:2,zindexAffix:10,zindexBackTop:10,zindexPickerPanel:10,zindexPopupClose:10,zindexModal:1e3,zindexModalMask:1e3,zindexMessage:1010,zindexNotification:1010,zindexPopover:1030,zindexDropdown:1050,zindexPicker:1050,zindexPopoconfirm:1060,zindexTooltip:1070,zindexImage:1080,maxPostWidth:750,footerHeight:.72,fontSizeBase:14,borderRadiusBase:.02,breakpoints:{up:function up(key){return"@media (min-width: "+key+"px)"},down:function down(key){return"@media (max-width: "+(key-1)+"px)"},only:function only(key){return"@media (width: "+key+"px)"},between:function between(start,end){return"@media (min-width: "+start+"px) and (max-width: "+(end-1)+"px)"},phoneScreen:function phoneScreen(){return this.down(BreakpointKey.MD)},phoneScreenHidden:function phoneScreenHidden(){return this.up(BreakpointKey.MD)}}},config_provider=__webpack_require__("./node_modules/antd/es/config-provider/index.js"),zh_CN=__webpack_require__("./node_modules/antd/lib/locale/zh_CN.js"),zh_CN_default=__webpack_require__.n(zh_CN),EditorWrap=(__webpack_require__("./node_modules/antd/dist/antd.variable.min.css"),__webpack_require__("./node_modules/draft-js/dist/Draft.css"),Object(react.forwardRef)((function(props,ref){return Object(react.useEffect)((function(){config_provider.a.config({theme:styles_theme})}),[]),Object(jsx_runtime.jsx)(theming_esm.b,{theme:styles_theme,children:Object(jsx_runtime.jsx)(config_provider.a,{locale:zh_CN_default.a,children:Object(jsx_runtime.jsx)(src_editor,Object.assign({},props,{ref:ref}))})})})));EditorWrap.displayName="EditorWrap";var editor_wrap=EditorWrap;try{EditorWrap.displayName="EditorWrap",EditorWrap.__docgenInfo={description:"",displayName:"EditorWrap",props:{frozenKeyBoard:{defaultValue:null,description:"",name:"frozenKeyBoard",required:!1,type:{name:"boolean"}},ctrlBarStickyOffsetTop:{defaultValue:null,description:"",name:"ctrlBarStickyOffsetTop",required:!1,type:{name:"string | number"}},getPopupContainer:{defaultValue:null,description:"",name:"getPopupContainer",required:!1,type:{name:"((triggerNode: HTMLElement) => HTMLElement)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: string) => void)"}},controls:{defaultValue:null,description:"",name:"controls",required:!1,type:{name:"ControlItem[]"}},controlsClassName:{defaultValue:null,description:"",name:"controlsClassName",required:!1,type:{name:"string"}},controlsForFullscreen:{defaultValue:null,description:"",name:"controlsForFullscreen",required:!1,type:{name:"ControlItem[]"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!1,type:{name:"(() => void)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},borderedControls:{defaultValue:null,description:"",name:"borderedControls",required:!1,type:{name:"boolean"}},controlBarButtons:{defaultValue:null,description:"",name:"controlBarButtons",required:!1,type:{name:"string[]"}},blockMenuButtons:{defaultValue:null,description:"",name:"blockMenuButtons",required:!1,type:{name:"string[]"}},inlineMenuButtons:{defaultValue:null,description:"",name:"inlineMenuButtons",required:!1,type:{name:"string[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/editor-wrap.tsx#EditorWrap"]={docgenInfo:EditorWrap.__docgenInfo,name:"EditorWrap",path:"src/editor-wrap.tsx#EditorWrap"})}catch(__react_docgen_typescript_loader_error){}var meta={title:"Example/Editor",component:editor_wrap,argTypes:{}},editor_wrap_stories_Template=(__webpack_exports__.default=meta,function Template(props){var editor=Object(react.useRef)(null);return Object(jsx_runtime.jsx)("div",{children:Object(jsx_runtime.jsx)(editor_wrap,Object.assign({},props,{ref:editor}))})});editor_wrap_stories_Template.displayName="Template";var Default=editor_wrap_stories_Template.bind({});Default.args={onSave:function onSave(){console.log("save")},controlBarButtons:["UNDO","REDO","HEADER","FONTSIZE","LINEHEIGHT","TEXTALIGN","blockquote","code-block","ordered-list-item","unordered-list-item","BOLD","ITALIC","UNDERLINE","STRIKETHROUGH","CODE","TEXTCOLOR","TEXTBGCOLOR","LINK","atomic_image","atomic_embed","CLEAR","COPY","EDIT_SOURCE","FULLSCREEN","IMAGE","SAVE","GROUP>atomic_separator"],inlineMenuButtons:["BOLD","ITALIC","UNDERLINE","STRIKETHROUGH","CODE","TEXTCOLOR","TEXTBGCOLOR","IMAGE","LINK"],blockMenuButtons:["HEADER","blockquote","ordered-list-item","unordered-list-item","code-block","atomic_image","atomic_embed","GROUP>atomic_separator"],value:JSON.stringify({blocks:[{key:"abopj",text:"标题一",type:"header-one",depth:0,inlineStyleRanges:[],entityRanges:[],data:{TEXTALIGN:"right"}},{key:"akt6g",text:"",type:"atomic_image",depth:0,inlineStyleRanges:[],entityRanges:[],data:{image:"https://t7.baidu.com/it/u=860330160,4117395242&fm=193&f=GIF","show-caption":!1,"resize-width":750}},{key:"5l77h",text:"",type:"atomic_embed",depth:0,inlineStyleRanges:[],entityRanges:[],data:{url:'<iframe src="//player.bilibili.com/player.html?aid=295040859&bvid=BV1uF411B7Jz&cid=467179904&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>',"show-caption":!1,width:"100%",height:"56.25%"}},{key:"7cbla",text:"",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"518fr",text:"In the first place we have granted to God, and by this our present charter confirmed for us and our heirs forever that the English Church shall be free, and shall have her rights entire, and her liberties inviolate; and we will that it be thus observed; which is apparent from this that the freedom of elections, which is reckoned most important and very essential to the English Church, we, of our pure and unconstrained will, did grant, and did by our charter confirm and did obtain the ratification of the same from our lord, Pope Innocent III, before the quarrel arose between us and our barons: and this we will observe, and our will is that it be observed in good faith by our heirs forever. We have also granted to all freemen of our kingdom, for us and our heirs forever, all the underwritten liberties, to be had and held by them and their heirs, of us and our heirs forever.",type:"unstyled",depth:0,inlineStyleRanges:[{offset:0,length:1,style:"FONTSIZE-36"}],entityRanges:[],data:{}},{key:"7bp6d",text:"",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"dbkdk",text:"Fog everywhere. Fog up the river, where it flows among green aits and meadows; fog down the river, where it rolls deified among the tiers of shipping and the waterside pollutions of a great (and dirty) city. Fog on the Essex marshes, fog on the Kentish heights. Fog creeping into the cabooses of collier-brigs; fog lying out on the yards and hovering in the rigging of great ships; fog drooping on the gunwales of barges and small boats. Fog in the eyes and throats of ancient Greenwich pensioners, wheezing by the firesides of their wards; fog in the stem and bowl of the afternoon pipe of the wrathful skipper, down in his close cabin; fog cruelly pinching the toes and fingers of his shivering little apprentice boy on deck. Chance people on the bridges peeping over the parapets into a nether sky of fog, with fog all round them, as if they were up in a balloon and hanging in the misty clouds.",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{FONTSIZE:"24"}},{key:"3mi8a",text:"",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"ecaja",text:"yes and those handsome Moors all in white and turbans like kings asking you to sit down in their little bit of a shop and Ronda with the old windows of the posadas 2 glancing eyes a lattice hid for her lover to kiss the iron and the wineshops half open at night and the castanets and the night we missed the boat at Algeciras the watchman going about serene with his lamp and O that awful deepdown torrent O and the sea the sea crimson sometimes like fire and the glorious sunsets and the figtrees in the Alameda gardens yes and all the queer little streets and the pink and blue and yellow houses and the rosegardens and the jessamine and geraniums and cactuses and Gibraltar as a girl where I was a Flower of the mountain yes when I put the rose in my hair like the Andalusian girls used or shall I wear a red yes and how he kissed me under the Moorish wall and I thought well as well him as another and then I asked him with my eyes to ask again yes and then he asked me would I yes to say yes my mountain flower and first I put my arms around him yes and drew him down to me so he could feel my breasts all perfume yes and his heart was going like mad and yes I said yes I will Yes.",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{LINEHEIGHT:"2"}},{key:"1oq6q",text:"",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"cv42j",text:"And Eurypylus, son of Euaemon, killed Hypsenor, the son of noble Dolopion, who had been made priest of the river Scamander, and was honoured among the people as though he were a god. Eurypylus gave him chase as he was flying before him, smote him with his sword upon the arm, and lopped his strong hand from off it. The bloody hand fell to the ground, and the shades of death, with fate that no man can withstand, came over his eyes. Thus furiously did the battle rage between them. As for the son of Tydeus, you could not say whether he was more among the Achaeans or the Trojans. He rushed across the plain like a winter torrent that has burst its barrier in full flood; no dykes, no walls of fruitful vineyards can embank it when it is swollen with rain from heaven, but in a moment it comes tearing onward, and lays many a field waste that many a strong man hand has reclaimed- even so were the dense phalanxes of the Trojans driven in rout by the son of Tydeus, and many though they were, they dared not abide his onslaught.",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"3rgs6",text:"",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"1nrt0",text:"Because I could not stop for Death,\nHe kindly stopped for me;\nThe carriage held but just ourselvesAnd Immortality.\n\nWe slowly drove,\n he knew no haste,\nAnd I had put awayMy labor, \nand my leisure too,For his civility.\n\nWe passed the school where children played,\nTheir lessons scarcely done;\nWe passed the fields of gazing grain,\nWe passed the setting sun.",type:"blockquote",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"ehgah",text:"",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"ftcu4",text:"To begin at the beginning:\nIt is Spring, moonless night in the small town, starless and bible-black, the cobblestreets silent and the hunched, courters'-and- rabbits' wood limping invisible down to the sloeblack, slow, black, crowblack, fishingboat-bobbing sea. The houses are blind as moles (though moles see fine to-night in the snouting, velvet dingles) or blind as Captain Cat there in the muffled middle by the pump and the town clock, the shops in mourning, the Welfare Hall in widows' weeds. And all the people of the lulled and dumbfound town are sleeping now.\nHush, the babies are sleeping, the farmers, the fishers, the tradesmen and pensioners, cobbler, schoolteacher, postman and publican, the undertaker and the fancy woman, drunkard, dressmaker, preacher, policeman, the webfoot cocklewomen and the tidy wives. Young girls lie bedded soft or glide in their dreams, with rings and trousseaux, bridesmaided by glow-worms down the aisles of the organplaying wood. The boys are dreaming wicked or of the bucking ranches of the night and the jollyrogered sea. And the anthracite statues of the horses sleep in the fields, and the cows in the byres, and the dogs in the wet-nosed yards; and the cats nap in the slant corners or lope sly, streaking and needling, on the one cloud of the roofs.\nYou can hear the dew falling, and the hushed town breathing.",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"8s4m8",text:"",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"682pj",text:"console.log('hello')\nconsole.log('hello')",type:"code-block",depth:0,inlineStyleRanges:[],entityRanges:[],data:{syntax:"javascript"}},{key:"657hi",text:"",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"9e84l",text:"标题",type:"atomic_separator",depth:0,inlineStyleRanges:[],entityRanges:[],data:{color:"black",margin_h:0}},{key:"dokhq",text:"11111",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[{offset:0,length:5,key:0}],data:{}}],entityMap:{0:{type:"LINK",mutability:"MUTABLE",data:{url:"1111"}}}})};var FontSize=editor_wrap_stories_Template.bind({});FontSize.args={value:JSON.stringify({blocks:[{key:"518fr",text:"In the first place we have granted to God, and by this our present charter confirmed for us and our heirs forever that the English Church shall be free, and shall have her rights entire, and her liberties inviolate; and we will that it be thus observed; which is apparent from this that the freedom of elections, which is reckoned most important and very essential to the English Church, we, of our pure and unconstrained will, did grant, and did by our charter confirm and did obtain the ratification of the same from our lord, Pope Innocent III, before the quarrel arose between us and our barons: and this we will observe, and our will is that it be observed in good faith by our heirs forever. We have also granted to all freemen of our kingdom, for us and our heirs forever, all the underwritten liberties, to be had and held by them and their heirs, of us and our heirs forever.",type:"unstyled",depth:0,inlineStyleRanges:[{offset:0,length:1,style:"FONTSIZE-36"}],entityRanges:[],data:{}}],entityMap:{}})};var Blockquote=editor_wrap_stories_Template.bind({});Blockquote.args={value:JSON.stringify({blocks:[{key:"bhjh0",text:"Because I could not stop for Death,\nHe kindly stopped for me;\nThe carriage held but just ourselvesAnd Immortality.\n\nWe slowly drove,\nhe knew no haste,\nAnd I had put awayMy labor,\nand my leisure too,For his civility.\n\nWe passed the school where children played,\nTheir lessons scarcely done;\nWe passed the fields of gazing grain,\nWe passed the setting sun.",type:"blockquote",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}}],entityMap:{}})};var editor_wrap_stories_Image=editor_wrap_stories_Template.bind({});editor_wrap_stories_Image.args={value:JSON.stringify({blocks:[{key:"d95tm",text:"[atomic_image]",type:"atomic_image",depth:0,inlineStyleRanges:[],entityRanges:[],data:{image:"https://t7.baidu.com/it/u=860330160,4117395242&fm=193&f=GIF","show-caption":!1,"resize-width":750}}],entityMap:{}})};var InlineImage=editor_wrap_stories_Template.bind({});InlineImage.args={value:JSON.stringify({blocks:[{key:"518fr",text:"In the first place we have granted to God, and by this our present charter confirmed for us and our heirs forever that the English Church shall be free, and shall have her rights entire, and her liberties inviolate; and we will that it be thus observed; which is apparent from this that the freedom of elections,  which is reckoned most important and very essential to the English Church, we, of our pure and unconstrained will, did grant, and did by our charter confirm and did obtain the ratification of the same from our lord, Pope Innocent III, before the quarrel arose between us and our barons: and this we will observe, and our will is that it be observed in good faith by our heirs forever. We have also granted to all freemen of our kingdom, for us and our heirs forever, all the underwritten liberties, to be had and held by them and their heirs, of us and our heirs forever.",type:"unstyled",depth:0,inlineStyleRanges:[{offset:0,length:1,style:"FONTSIZE-36"}],entityRanges:[{offset:313,length:1,key:0}],data:{}}],entityMap:{0:{type:"IMAGE",mutability:"IMMUTABLE",data:{src:"https://t7.baidu.com/it/u=860330160,4117395242&fm=193&f=GIF"}}}})};var Video=editor_wrap_stories_Template.bind({});Video.args={value:JSON.stringify({blocks:[{key:"5l77h",text:"",type:"atomic_embed",depth:0,inlineStyleRanges:[],entityRanges:[],data:{url:'<iframe src="//player.bilibili.com/player.html?aid=295040859&bvid=BV1uF411B7Jz&cid=467179904&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>',"show-caption":!1,width:"100%",height:"56.25%"}}],entityMap:{}})};var OrderedListItem=editor_wrap_stories_Template.bind({});OrderedListItem.args={value:JSON.stringify({blocks:[{key:"bhjh0",text:"Apple",type:"ordered-list-item",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"er93q",text:"Ball",type:"ordered-list-item",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"f5o3q",text:"Cat",type:"ordered-list-item",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"7ltu4",text:"Dog",type:"ordered-list-item",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}}],entityMap:{}})};var UnorderedListItem=editor_wrap_stories_Template.bind({});UnorderedListItem.args={value:JSON.stringify({blocks:[{key:"bhjh0",text:"Apple",type:"unordered-list-item",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"er93q",text:"Ball",type:"unordered-list-item",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"f5o3q",text:"Cat",type:"unordered-list-item",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"7ltu4",text:"Dog",type:"unordered-list-item",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}}],entityMap:{}})};var Italic=editor_wrap_stories_Template.bind({});Italic.args={value:JSON.stringify({blocks:[{key:"518fr",text:"In the first place we have granted to God, and by this our present charter confirmed for us and our heirs forever that the English Church shall be free, and shall have her rights entire, and her liberties inviolate; and we will that it be thus observed; which is apparent from this that the freedom of elections, which is reckoned most important and very essential to the English Church, we, of our pure and unconstrained will, did grant, and did by our charter confirm and did obtain the ratification of the same from our lord, Pope Innocent III, before the quarrel arose between us and our barons: and this we will observe, and our will is that it be observed in good faith by our heirs forever. We have also granted to all freemen of our kingdom, for us and our heirs forever, all the underwritten liberties, to be had and held by them and their heirs, of us and our heirs forever.",type:"unstyled",depth:0,inlineStyleRanges:[{offset:0,length:41,style:"ITALIC"}],entityRanges:[],data:{}}],entityMap:{}})};var Underline=editor_wrap_stories_Template.bind({});Underline.args={value:JSON.stringify({blocks:[{key:"518fr",text:"In the first place we have granted to God, and by this our present charter confirmed for us and our heirs forever that the English Church shall be free, and shall have her rights entire, and her liberties inviolate; and we will that it be thus observed; which is apparent from this that the freedom of elections, which is reckoned most important and very essential to the English Church, we, of our pure and unconstrained will, did grant, and did by our charter confirm and did obtain the ratification of the same from our lord, Pope Innocent III, before the quarrel arose between us and our barons: and this we will observe, and our will is that it be observed in good faith by our heirs forever. We have also granted to all freemen of our kingdom, for us and our heirs forever, all the underwritten liberties, to be had and held by them and their heirs, of us and our heirs forever.",type:"unstyled",depth:0,inlineStyleRanges:[{offset:0,length:41,style:"UNDERLINE"}],entityRanges:[],data:{}}],entityMap:{}})};var Strikethrough=editor_wrap_stories_Template.bind({});Strikethrough.args={value:JSON.stringify({blocks:[{key:"518fr",text:"In the first place we have granted to God, and by this our present charter confirmed for us and our heirs forever that the English Church shall be free, and shall have her rights entire, and her liberties inviolate; and we will that it be thus observed; which is apparent from this that the freedom of elections, which is reckoned most important and very essential to the English Church, we, of our pure and unconstrained will, did grant, and did by our charter confirm and did obtain the ratification of the same from our lord, Pope Innocent III, before the quarrel arose between us and our barons: and this we will observe, and our will is that it be observed in good faith by our heirs forever. We have also granted to all freemen of our kingdom, for us and our heirs forever, all the underwritten liberties, to be had and held by them and their heirs, of us and our heirs forever.",type:"unstyled",depth:0,inlineStyleRanges:[{offset:0,length:41,style:"STRIKETHROUGH"}],entityRanges:[],data:{}}],entityMap:{}})};var TextDecoration=editor_wrap_stories_Template.bind({});TextDecoration.args={value:JSON.stringify({blocks:[{key:"518fr",text:"In the first place we have granted to God, and by this our present charter confirmed for us and our heirs forever that the English Church shall be free, and shall have her rights entire, and her liberties inviolate; and we will that it be thus observed; which is apparent from this that the freedom of elections, which is reckoned most important and very essential to the English Church, we, of our pure and unconstrained will, did grant, and did by our charter confirm and did obtain the ratification of the same from our lord, Pope Innocent III, before the quarrel arose between us and our barons: and this we will observe, and our will is that it be observed in good faith by our heirs forever. We have also granted to all freemen of our kingdom, for us and our heirs forever, all the underwritten liberties, to be had and held by them and their heirs, of us and our heirs forever.",type:"unstyled",depth:0,inlineStyleRanges:[{offset:0,length:41,style:"UNDERLINE"},{offset:0,length:41,style:"STRIKETHROUGH"}],entityRanges:[],data:{}}],entityMap:{}})};var Code=editor_wrap_stories_Template.bind({});Code.args={value:JSON.stringify({blocks:[{key:"518fr",text:"In the first place we have granted to God, and by this our present charter confirmed for us and our heirs forever that the English Church shall be free, and shall have her rights entire, and her liberties inviolate; and we will that it be thus observed; which is apparent from this that the freedom of elections, which is reckoned most important and very essential to the English Church, we, of our pure and unconstrained will, did grant, and did by our charter confirm and did obtain the ratification of the same from our lord, Pope Innocent III, before the quarrel arose between us and our barons: and this we will observe, and our will is that it be observed in good faith by our heirs forever. We have also granted to all freemen of our kingdom, for us and our heirs forever, all the underwritten liberties, to be had and held by them and their heirs, of us and our heirs forever.",type:"unstyled",depth:0,inlineStyleRanges:[{offset:0,length:41,style:"CODE"}],entityRanges:[],data:{}}],entityMap:{}})};var CodeBlock=editor_wrap_stories_Template.bind({});CodeBlock.args={value:JSON.stringify({blocks:[{key:"682pj",text:"console.log('hello')\nconsole.log('hello')",type:"code-block",depth:0,inlineStyleRanges:[],entityRanges:[],data:{syntax:"javascript"}}],entityMap:{}})};var Bold=editor_wrap_stories_Template.bind({});Bold.args={value:JSON.stringify({blocks:[{key:"518fr",text:"In the first place we have granted to God, and by this our present charter confirmed for us and our heirs forever that the English Church shall be free, and shall have her rights entire, and her liberties inviolate; and we will that it be thus observed; which is apparent from this that the freedom of elections, which is reckoned most important and very essential to the English Church, we, of our pure and unconstrained will, did grant, and did by our charter confirm and did obtain the ratification of the same from our lord, Pope Innocent III, before the quarrel arose between us and our barons: and this we will observe, and our will is that it be observed in good faith by our heirs forever. We have also granted to all freemen of our kingdom, for us and our heirs forever, all the underwritten liberties, to be had and held by them and their heirs, of us and our heirs forever.",type:"unstyled",depth:0,inlineStyleRanges:[{offset:0,length:41,style:"BOLD"}],entityRanges:[],data:{}}],entityMap:{}})};var Test=editor_wrap_stories_Template.bind({});Test.args={value:JSON.stringify({blocks:[{key:"518fr",text:"一、【标题】",type:"header-one",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"3719e",text:"段落正文",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"b8r5l",text:"标题一",type:"header-one",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"egn3m",text:"标题二",type:"header-two",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"bej3d",text:"标题三",type:"header-three",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"66dds",text:"标题四",type:"header-four",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"ci956",text:"标题五",type:"header-five",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"c8hkg",text:"标题六",type:"header-six",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"fks7p",text:"二、【字号】",type:"header-one",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"5h9bq",text:"默认字号",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"7103f",text:"字号 8，字号 9，字号 10，字号 11，字号 12，字号 14，字号 16，字号 18，字号 24，字号 30，字号 36，字号 48，字号 60，字号 72，字号 96",type:"unstyled",depth:0,inlineStyleRanges:[{offset:10,length:6,style:"FONTSIZE-10"},{offset:5,length:5,style:"FONTSIZE-9"},{offset:16,length:6,style:"FONTSIZE-11"},{offset:22,length:6,style:"FONTSIZE-12"},{offset:46,length:6,style:"FONTSIZE-24"},{offset:82,length:5,style:"FONTSIZE-96"},{offset:28,length:6,style:"FONTSIZE-14"},{offset:58,length:6,style:"FONTSIZE-36"},{offset:64,length:6,style:"FONTSIZE-48"},{offset:34,length:6,style:"FONTSIZE-16"},{offset:40,length:6,style:"FONTSIZE-18"},{offset:70,length:6,style:"FONTSIZE-60"},{offset:76,length:6,style:"FONTSIZE-72"},{offset:52,length:6,style:"FONTSIZE-30"},{offset:0,length:5,style:"FONTSIZE-8"}],entityRanges:[],data:{}},{key:"19sf4",text:"段落字号 30（整个段落保持同一字号）",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{FONTSIZE:30}},{key:"bqar5",text:"三、【行距】",type:"header-one",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"ff0s2",text:"----------------------",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"3ucjl",text:"默认行距\n默认行距\n默认行距",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"7muss",text:"----------------------",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"8kua",text:"行距 1.2\n行距 1.2\n行距 1.2",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{LINEHEIGHT:1.2}},{key:"7bip0",text:"----------------------",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"8nl5f",text:"行据 1.5\n行据 1.5\n行据 1.5",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{LINEHEIGHT:1.5}},{key:"a15t2",text:"----------------------",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"8889j",text:"行距 1.8\n行距 1.8\n行距 1.8",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{LINEHEIGHT:1.8}},{key:"1jq9q",text:"----------------------",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"27g03",text:"行距 2\n行距 2\n行距 2",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{LINEHEIGHT:2}},{key:"fbe0v",text:"----------------------",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"rdhj",text:"四、【对齐】",type:"header-one",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"a4r52",text:"居左对齐",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{TEXTALIGN:"left"}},{key:"5a02l",text:"居中对齐",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{TEXTALIGN:"center"}},{key:"44j8v",text:"居右对齐",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{TEXTALIGN:"right"}},{key:"7ri8k",text:"两端对齐",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{TEXTALIGN:"justify"}},{key:"btc35",text:"默认对齐",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"7qo33",text:"五、【有序列表】",type:"header-one",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"dl3fs",text:"列表项一",type:"ordered-list-item",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"ftojo",text:"列表项二",type:"ordered-list-item",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"605ck",text:"列表项三",type:"ordered-list-item",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"46qth",text:"六、【无序列表】",type:"header-one",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"8cidl",text:"列表项一",type:"unordered-list-item",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"1b06j",text:"列表项二",type:"unordered-list-item",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"6oo63",text:"列表项三",type:"unordered-list-item",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"3a760",text:"七、【文字属性】",type:"header-one",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"6jsg2",text:"粗体、斜体、下划线、删除线、code、文字颜色、文字背景色",type:"unstyled",depth:0,inlineStyleRanges:[{offset:24,length:5,style:"TEXTBGCOLOR-#73D8FF"},{offset:0,length:29,style:"FONTSIZE-16"},{offset:0,length:2,style:"BOLD"},{offset:14,length:4,style:"TEXTBGCOLOR-#EEEEEE"},{offset:19,length:4,style:"TEXTBGCOLOR-#FFFFFF"},{offset:6,length:3,style:"UNDERLINE"},{offset:14,length:4,style:"CODE"},{offset:3,length:2,style:"ITALIC"},{offset:10,length:3,style:"STRIKETHROUGH"},{offset:19,length:4,style:"TEXTCOLOR-#F44E3B"}],entityRanges:[],data:{}},{key:"43oi8",text:"八、【嵌入内容】",type:"header-one",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"6rh6e",text:"链接",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[{offset:0,length:2,key:0}],data:{}},{key:"9lvkj",text:"[atomic_image]",type:"atomic_image",depth:0,inlineStyleRanges:[],entityRanges:[],data:{image:"https://hello-up-files-test.oss-cn-shenzhen.aliyuncs.com/image/dc2ea7bd-c0a4-48ba-aced-8c857a4416d6.png"}},{key:"dfrpg",text:"[atomic_embed]",type:"atomic_embed",depth:0,inlineStyleRanges:[],entityRanges:[],data:{url:"https://player.bilibili.com/player.html?aid=889649010&bvid=BV1eP4y1x7JU&cid=384798962&page=1",width:"100%",height:"56.25%"}},{key:"43r0i",text:"[atomic_embed]",type:"atomic_embed",depth:0,inlineStyleRanges:[],entityRanges:[],data:{url:"https://v.qq.com/txp/iframe/player.html?vid=a3269lb86ei",width:"100%",height:"56.25%"}},{key:"1vm5h",text:"[atomic_embed]",type:"atomic_embed",depth:0,inlineStyleRanges:[],entityRanges:[],data:{url:"https://www.icloud.com.cn/keynote/0VEq3cRbI4EzmY1z1gHAQu-7Q?embed=true",width:"100%",height:"56.25%"}},{key:"dnt4p",text:"九、【引用】",type:"header-one",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"5j771",text:"引用内容\n引用内容",type:"blockquote",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"akodo",text:"十、【代码块】",type:"header-one",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"c5foi",text:"console.log('hello world');\n<div>test</div>\nrm -f /",type:"code-block",depth:0,inlineStyleRanges:[],entityRanges:[],data:{syntax:"js","show-line-numbers":!0}},{key:"20pok",text:"十一、【自定义块】",type:"header-one",depth:0,inlineStyleRanges:[{offset:0,length:9,style:"TEXTCOLOR-#000000"},{offset:0,length:9,style:"TEXTBGCOLOR-#FFFFFF"}],entityRanges:[],data:{}},{key:"4t1pr",text:"标题",type:"atomic_separator",depth:0,inlineStyleRanges:[],entityRanges:[],data:{color:"rgb(0, 149, 197)",margin_h:0}},{key:"1bd9v",text:"〇、【复合样式】",type:"header-one",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"913kj",text:"粗体、斜体、下划线、删除线、文字颜色、文字背景色",type:"unstyled",depth:0,inlineStyleRanges:[{offset:0,length:24,style:"BOLD"},{offset:0,length:24,style:"ITALIC"},{offset:0,length:24,style:"UNDERLINE"},{offset:0,length:24,style:"STRIKETHROUGH"},{offset:0,length:24,style:"TEXTCOLOR-#0062B1"},{offset:0,length:24,style:"TEXTBGCOLOR-#FCDC00"},{offset:10,length:3,style:"FONTSIZE-12"}],entityRanges:[],data:{FONTSIZE:"18",TEXTALIGN:"center"}},{key:"3jk8h",text:"",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}}],entityMap:{0:{type:"LINK",mutability:"MUTABLE",data:{url:"https://test.ci.hello-up.com/"}}}})};var TestWithControls=editor_wrap_stories_Template.bind({});TestWithControls.args={controlBarButtons:["UNDO","REDO","HEADER","FONTSIZE","LINEHEIGHT","TEXTALIGN","blockquote","code-block","ordered-list-item","unordered-list-item","BOLD","ITALIC","UNDERLINE","STRIKETHROUGH","CODE","TEXTCOLOR","TEXTBGCOLOR","LINK","atomic_image","atomic_embed","CLEAR","COPY","EDIT_SOURCE","FULLSCREEN","IMAGE","SAVE","GROUP>atomic_separator"],inlineMenuButtons:["BOLD","ITALIC","UNDERLINE","STRIKETHROUGH","CODE","TEXTCOLOR","TEXTBGCOLOR","IMAGE","LINK"],blockMenuButtons:["HEADER","blockquote","ordered-list-item","unordered-list-item","code-block","atomic_image","atomic_embed","GROUP>atomic_separator"],value:JSON.stringify({blocks:[{key:"518fr",text:"一、【标题】",type:"header-one",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"3719e",text:"段落正文",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"b8r5l",text:"标题一",type:"header-one",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"egn3m",text:"标题二",type:"header-two",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"bej3d",text:"标题三",type:"header-three",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"66dds",text:"标题四",type:"header-four",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"ci956",text:"标题五",type:"header-five",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"c8hkg",text:"标题六",type:"header-six",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"fks7p",text:"二、【字号】",type:"header-one",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"5h9bq",text:"默认字号",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"7103f",text:"字号 8，字号 9，字号 10，字号 11，字号 12，字号 14，字号 16，字号 18，字号 24，字号 30，字号 36，字号 48，字号 60，字号 72，字号 96",type:"unstyled",depth:0,inlineStyleRanges:[{offset:10,length:6,style:"FONTSIZE-10"},{offset:5,length:5,style:"FONTSIZE-9"},{offset:16,length:6,style:"FONTSIZE-11"},{offset:22,length:6,style:"FONTSIZE-12"},{offset:46,length:6,style:"FONTSIZE-24"},{offset:82,length:5,style:"FONTSIZE-96"},{offset:28,length:6,style:"FONTSIZE-14"},{offset:58,length:6,style:"FONTSIZE-36"},{offset:64,length:6,style:"FONTSIZE-48"},{offset:34,length:6,style:"FONTSIZE-16"},{offset:40,length:6,style:"FONTSIZE-18"},{offset:70,length:6,style:"FONTSIZE-60"},{offset:76,length:6,style:"FONTSIZE-72"},{offset:52,length:6,style:"FONTSIZE-30"},{offset:0,length:5,style:"FONTSIZE-8"}],entityRanges:[],data:{}},{key:"19sf4",text:"段落字号 30（整个段落保持同一字号）",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{FONTSIZE:30}},{key:"bqar5",text:"三、【行距】",type:"header-one",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"ff0s2",text:"----------------------",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"3ucjl",text:"默认行距\n默认行距\n默认行距",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"7muss",text:"----------------------",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"8kua",text:"行距 1.2\n行距 1.2\n行距 1.2",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{LINEHEIGHT:1.2}},{key:"7bip0",text:"----------------------",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"8nl5f",text:"行据 1.5\n行据 1.5\n行据 1.5",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{LINEHEIGHT:1.5}},{key:"a15t2",text:"----------------------",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"8889j",text:"行距 1.8\n行距 1.8\n行距 1.8",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{LINEHEIGHT:1.8}},{key:"1jq9q",text:"----------------------",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"27g03",text:"行距 2\n行距 2\n行距 2",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{LINEHEIGHT:2}},{key:"fbe0v",text:"----------------------",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"rdhj",text:"四、【对齐】",type:"header-one",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"a4r52",text:"居左对齐",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{TEXTALIGN:"left"}},{key:"5a02l",text:"居中对齐",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{TEXTALIGN:"center"}},{key:"44j8v",text:"居右对齐",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{TEXTALIGN:"right"}},{key:"7ri8k",text:"两端对齐",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{TEXTALIGN:"justify"}},{key:"btc35",text:"默认对齐",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"7qo33",text:"五、【有序列表】",type:"header-one",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"dl3fs",text:"列表项一",type:"ordered-list-item",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"ftojo",text:"列表项二",type:"ordered-list-item",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"605ck",text:"列表项三",type:"ordered-list-item",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"46qth",text:"六、【无序列表】",type:"header-one",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"8cidl",text:"列表项一",type:"unordered-list-item",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"1b06j",text:"列表项二",type:"unordered-list-item",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"6oo63",text:"列表项三",type:"unordered-list-item",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"3a760",text:"七、【文字属性】",type:"header-one",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"6jsg2",text:"粗体、斜体、下划线、删除线、code、文字颜色、文字背景色",type:"unstyled",depth:0,inlineStyleRanges:[{offset:24,length:5,style:"TEXTBGCOLOR-#73D8FF"},{offset:0,length:29,style:"FONTSIZE-16"},{offset:0,length:2,style:"BOLD"},{offset:14,length:4,style:"TEXTBGCOLOR-#EEEEEE"},{offset:19,length:4,style:"TEXTBGCOLOR-#FFFFFF"},{offset:6,length:3,style:"UNDERLINE"},{offset:14,length:4,style:"CODE"},{offset:3,length:2,style:"ITALIC"},{offset:10,length:3,style:"STRIKETHROUGH"},{offset:19,length:4,style:"TEXTCOLOR-#F44E3B"}],entityRanges:[],data:{}},{key:"43oi8",text:"八、【嵌入内容】",type:"header-one",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"6rh6e",text:"链接",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[{offset:0,length:2,key:0}],data:{}},{key:"9lvkj",text:"[atomic_image]",type:"atomic_image",depth:0,inlineStyleRanges:[],entityRanges:[],data:{image:"https://hello-up-files-test.oss-cn-shenzhen.aliyuncs.com/image/dc2ea7bd-c0a4-48ba-aced-8c857a4416d6.png"}},{key:"dfrpg",text:"[atomic_embed]",type:"atomic_embed",depth:0,inlineStyleRanges:[],entityRanges:[],data:{url:"https://player.bilibili.com/player.html?aid=889649010&bvid=BV1eP4y1x7JU&cid=384798962&page=1",width:"100%",height:"56.25%"}},{key:"43r0i",text:"[atomic_embed]",type:"atomic_embed",depth:0,inlineStyleRanges:[],entityRanges:[],data:{url:"https://v.qq.com/txp/iframe/player.html?vid=a3269lb86ei",width:"100%",height:"56.25%"}},{key:"1vm5h",text:"[atomic_embed]",type:"atomic_embed",depth:0,inlineStyleRanges:[],entityRanges:[],data:{url:"https://www.icloud.com.cn/keynote/0VEq3cRbI4EzmY1z1gHAQu-7Q?embed=true",width:"100%",height:"56.25%"}},{key:"dnt4p",text:"九、【引用】",type:"header-one",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"5j771",text:"引用内容\n引用内容",type:"blockquote",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"akodo",text:"十、【代码块】",type:"header-one",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"c5foi",text:"console.log('hello world');\n<div>test</div>\nrm -f /",type:"code-block",depth:0,inlineStyleRanges:[],entityRanges:[],data:{syntax:"js","show-line-numbers":!0}},{key:"20pok",text:"十一、【自定义块】",type:"header-one",depth:0,inlineStyleRanges:[{offset:0,length:9,style:"TEXTCOLOR-#000000"},{offset:0,length:9,style:"TEXTBGCOLOR-#FFFFFF"}],entityRanges:[],data:{}},{key:"4t1pr",text:"标题",type:"atomic_separator",depth:0,inlineStyleRanges:[],entityRanges:[],data:{color:"rgb(0, 149, 197)",margin_h:0}},{key:"1bd9v",text:"〇、【复合样式】",type:"header-one",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"913kj",text:"粗体、斜体、下划线、删除线、文字颜色、文字背景色",type:"unstyled",depth:0,inlineStyleRanges:[{offset:0,length:24,style:"BOLD"},{offset:0,length:24,style:"ITALIC"},{offset:0,length:24,style:"UNDERLINE"},{offset:0,length:24,style:"STRIKETHROUGH"},{offset:0,length:24,style:"TEXTCOLOR-#0062B1"},{offset:0,length:24,style:"TEXTBGCOLOR-#FCDC00"},{offset:10,length:3,style:"FONTSIZE-12"}],entityRanges:[],data:{FONTSIZE:"18",TEXTALIGN:"center"}},{key:"3jk8h",text:"",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}}],entityMap:{0:{type:"LINK",mutability:"MUTABLE",data:{url:"https://test.ci.hello-up.com/"}}}})};try{Meta.displayName="Meta",Meta.__docgenInfo={description:"Metadata to configure the stories for a component.",displayName:"Meta",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/editor-wrap.stories.tsx#Meta"]={docgenInfo:Meta.__docgenInfo,name:"Meta",path:"src/editor-wrap.stories.tsx#Meta"})}catch(__react_docgen_typescript_loader_error){}},"./src/utils/atob.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js");__webpack_exports__.a=function atob(str){return"undefined"!=typeof window?window.atob(str):Buffer.from(str.toString(),"base64").toString("binary")}}).call(this,__webpack_require__("./node_modules/buffer/index.js").Buffer)},"./src/utils/btoa.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js");__webpack_exports__.a=function btoa(str){return"undefined"!=typeof window?window.btoa(str):Buffer.from(str.toString(),"binary").toString("base64")}}).call(this,__webpack_require__("./node_modules/buffer/index.js").Buffer)},"./storybook-init-framework-entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js")},0:function(module,exports,__webpack_require__){__webpack_require__("./node_modules/@storybook/core-client/dist/esm/globals/polyfills.js"),__webpack_require__("./node_modules/@storybook/core-client/dist/esm/globals/globals.js"),__webpack_require__("./storybook-init-framework-entry.js"),__webpack_require__("./node_modules/@storybook/react/dist/esm/client/preview/config-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-actions/dist/esm/preset/addDecorator.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-actions/dist/esm/preset/addArgs.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-links/dist/esm/preset/addDecorator.js-generated-config-entry.js"),module.exports=__webpack_require__("./generated-stories-entry.js")},1:function(module,exports){}},[[0,2,3]]]);